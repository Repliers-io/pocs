/*! For license information please see components-chatbot-chatbot-stories.caa39f1e.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkpocs=self.webpackChunkpocs||[]).push([[978],{"./src/components/chatbot/chatbot.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{BasicPropertySearch:()=>BasicPropertySearch,CustomBranding:()=>CustomBranding,ErrorHandling:()=>ErrorHandling,InContext:()=>InContext,LeftPositioned:()=>LeftPositioned,MobileView:()=>MobileView,MultiTurnConversation:()=>MultiTurnConversation,VisualSearch:()=>VisualSearch,WithChatGPT:()=>WithChatGPT,__namedExportsOrder:()=>__namedExportsOrder,default:()=>chatbot_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),x=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/x.js"),createLucideIcon=__webpack_require__("./node_modules/lucide-react/dist/esm/createLucideIcon.js");const MessageCircle=(0,createLucideIcon.Z)("message-circle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]),DEFAULT_WELCOME_MESSAGE="Hi! I'm your AI real estate assistant. Tell me what you're looking for and I'll help you find the perfect home.",BUTTON_LABELS_CHAT_WITH_US="Chat with us",BUTTON_LABELS_CLOSE="Close chat",BUTTON_LABELS_SEND="Send message";function FloatingButton({isOpen,onClick,position="bottom-right"}){return(0,jsx_runtime.jsx)("button",{onClick,"aria-label":isOpen?BUTTON_LABELS_CLOSE:BUTTON_LABELS_CHAT_WITH_US,className:`\n        fixed ${{"bottom-right":"bottom-6 right-6","bottom-left":"bottom-6 left-6"}[position]} z-50\n        flex items-center gap-3 px-6 py-4\n        bg-gradient-to-r from-blue-600 to-blue-700\n        text-white rounded-full shadow-2xl\n        hover:shadow-blue-500/50 hover:scale-105\n        active:scale-95\n        transition-all duration-300 ease-out\n        group\n      `,style:{animation:"slideUp 0.5s ease-out forwards"},children:isOpen?(0,jsx_runtime.jsx)(x.Z,{className:"w-6 h-6"}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("span",{className:"text-2xl",role:"img","aria-label":"house",children:"üè†"}),(0,jsx_runtime.jsx)("span",{className:"font-semibold text-sm tracking-wide hidden sm:inline",children:BUTTON_LABELS_CHAT_WITH_US}),(0,jsx_runtime.jsx)(MessageCircle,{className:"w-5 h-5 group-hover:rotate-12 transition-transform duration-300"})]})})}if("undefined"!=typeof document){const style=document.createElement("style");style.textContent="\n    @keyframes slideUp {\n      from {\n        opacity: 0;\n        transform: translateY(20px);\n      }\n      to {\n        opacity: 1;\n        transform: translateY(0);\n      }\n    }\n  ",document.head.querySelector("style[data-chatbot-animations]")||(style.setAttribute("data-chatbot-animations","true"),document.head.appendChild(style))}FloatingButton.__docgenInfo={description:"",methods:[],displayName:"FloatingButton",props:{isOpen:{required:!0,tsType:{name:"boolean"},description:""},onClick:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},position:{required:!1,tsType:{name:"union",raw:'"bottom-right" | "bottom-left"',elements:[{name:"literal",value:'"bottom-right"'},{name:"literal",value:'"bottom-left"'}]},description:"",defaultValue:{value:'"bottom-right"',computed:!1}}}};var loader_circle=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/loader-circle.js");const Send=(0,createLucideIcon.Z)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var console=__webpack_require__("./node_modules/console-browserify/index.js");function normalizeListingData(raw){var _raw_details,_raw_details1,_raw_details2,_raw_details3,_raw_details4;let sqft;if(null===(_raw_details=raw.details)||void 0===_raw_details?void 0:_raw_details.sqft){const sqftStr=raw.details.sqft.replace(/[^0-9-]/g,"");if(sqftStr.includes("-")){const[min,max]=sqftStr.split("-").map(Number);sqft=Math.round((min+max)/2)}else sqft=parseInt(sqftStr,10)}const address={streetNumber:raw.address.streetNumber||"",streetName:raw.address.streetName||"",streetSuffix:raw.address.streetSuffix,city:raw.address.city||"",province:raw.address.province,postalCode:raw.address.postalCode};return{mlsNumber:raw.mlsNumber,listPrice:raw.listPrice,bedrooms:(null===(_raw_details1=raw.details)||void 0===_raw_details1?void 0:_raw_details1.numBedrooms)||0,bathrooms:(null===(_raw_details2=raw.details)||void 0===_raw_details2?void 0:_raw_details2.numBathrooms)||0,sqft,address,images:raw.images,propertyType:null===(_raw_details3=raw.details)||void 0===_raw_details3?void 0:_raw_details3.propertyType,status:raw.standardStatus,description:null===(_raw_details4=raw.details)||void 0===_raw_details4?void 0:_raw_details4.description,listDate:raw.listDate,daysOnMarket:raw.simpleDaysOnMarket||raw.daysOnMarket}}class RepliersNLPService{async processQuery(prompt){console.group("üß† Repliers NLP API Call"),console.log("Prompt:",prompt),console.log("Current nlpId:",this.currentNlpId||"none (new conversation)");try{var _data_request_body;const requestBody={prompt,...this.currentNlpId&&{nlpId:this.currentNlpId}};console.log("Request body:",JSON.stringify(requestBody,null,2));const response=await fetch(`${this.baseUrl}/nlp`,{method:"POST",headers:{"Content-Type":"application/json","repliers-api-key":this.apiKey},body:JSON.stringify(requestBody)});if(console.log("Response status:",response.status),!response.ok){if(406===response.status)throw console.error("‚ùå Query not relevant to property search (406)"),console.groupEnd(),new Error("IRRELEVANT_QUERY");throw console.error(`‚ùå NLP API error: ${response.status}`),console.groupEnd(),new Error(`NLP API error: ${response.status}`)}const data=await response.json();return this.currentNlpId=data.nlpId,console.log("‚úÖ NLP Response:"),console.log("  - nlpId:",data.nlpId),console.log("  - summary:",data.summary),console.log("  - url:",data.request.url),(null===(_data_request_body=data.request.body)||void 0===_data_request_body?void 0:_data_request_body.imageSearchItems)&&console.log("  - imageSearchItems:",data.request.body.imageSearchItems),console.groupEnd(),data}catch(error){throw console.error("‚ùå NLP processing error:",error),console.groupEnd(),error}}async searchListings(url,body){console.group("üè† Repliers Listings API Call"),console.log("URL:",url),console.log("Body:",body?JSON.stringify(body,null,2):"none");try{const response=await fetch(url,{method:body?"POST":"GET",headers:{"Content-Type":"application/json","repliers-api-key":this.apiKey},...body&&{body:JSON.stringify(body)}});if(console.log("Response status:",response.status),!response.ok)throw console.error(`‚ùå Listings API error: ${response.status}`),console.groupEnd(),new Error(`Listings API error: ${response.status}`);const rawListings=(await response.json()).listings||[];if(console.log(`‚úÖ Found ${rawListings.length} properties`),rawListings.length>0){console.log("First listing (raw API response):",rawListings[0]);const normalized=normalizeListingData(rawListings[0]);console.log("First listing (normalized for UI):",{mlsNumber:normalized.mlsNumber,price:normalized.listPrice,bedrooms:normalized.bedrooms,bathrooms:normalized.bathrooms,sqft:normalized.sqft,propertyType:normalized.propertyType,status:normalized.status,address:`${normalized.address.streetNumber} ${normalized.address.streetName}, ${normalized.address.city}`})}return console.groupEnd(),rawListings.map(normalizeListingData)}catch(error){throw console.error("‚ùå Listings search error:",error),console.groupEnd(),error}}resetContext(){console.log("üîÑ Resetting conversation context (clearing nlpId)"),this.currentNlpId=null}getCurrentNlpId(){return this.currentNlpId}constructor(apiKey){this.baseUrl="https://api.repliers.io",this.currentNlpId=null,this.apiKey=apiKey}}var openaiService_console=__webpack_require__("./node_modules/console-browserify/index.js");class OpenAIService{createSystemPrompt(brokerageName){return`You are a helpful and friendly real estate assistant for ${brokerageName}.\n\nYour role:\n- Help users find their ideal property through natural conversation\n- Ask clarifying questions about their needs (bedrooms, budget, location, features)\n- When users describe what they're looking for, the system will automatically search and show properties\n- Discuss property details, neighborhoods, and answer real estate questions\n- Be warm, professional, and focused on helping them find a home\n\nImportant:\n- You DON'T need to execute searches yourself - the system handles that\n- When property results are shown, acknowledge them and offer to help refine the search\n- Keep responses concise (2-3 sentences max) - this is a chat interface\n- Guide the conversation toward understanding their property needs\n\nExample conversation:\nUser: "Hi"\nYou: "Hello! I'm here to help you find your perfect property. What are you looking for?"\n\nUser: "3 bedroom condo"\nYou: "Great! I'll search for 3 bedroom condos. Any specific location or budget in mind?"\n[System shows property results automatically]\n\nUser: "Under $800k in Toronto"\nYou: "Perfect! Here are condos in Toronto with 3 bedrooms under $800k. Would you like to refine by neighborhood or features?"\n[System shows refined results]`}initializeConversation(){this.conversationHistory=[{role:"system",content:this.systemPrompt}]}addPropertyContext(listings,query){const contextMessage=`[Property Search Results]\nQuery: "${query}"\nFound ${listings.length} properties.\n\n${listings.slice(0,3).map(((listing,i)=>`\n${i+1}. MLS #${listing.mlsNumber}\n   Price: $${listing.listPrice.toLocaleString()}\n   ${listing.bedrooms} bed, ${listing.bathrooms} bath${listing.sqft?`, ${listing.sqft} sqft`:""}\n   ${listing.address.streetNumber} ${listing.address.streetName}, ${listing.address.city}\n   Type: ${listing.propertyType||"N/A"}\n`)).join("")}\n\n${listings.length>3?`\n... and ${listings.length-3} more properties`:""}\n\nThe user can see these property cards in the chat. Acknowledge the results and offer to help them refine or discuss specific properties.`;this.conversationHistory.push({role:"system",content:contextMessage})}async chat(userMessage){openaiService_console.group("ü§ñ OpenAI ChatGPT API Call"),openaiService_console.log("User message:",userMessage);try{this.conversationHistory.push({role:"user",content:userMessage}),openaiService_console.log("Conversation history length:",this.conversationHistory.length),openaiService_console.log("Sending to OpenAI...");const response=await fetch(`${this.baseUrl}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify({model:"gpt-4o-mini",messages:this.conversationHistory,temperature:.7,max_tokens:150})});if(openaiService_console.log("Response status:",response.status),!response.ok)throw openaiService_console.error(`‚ùå OpenAI API error: ${response.status}`),openaiService_console.groupEnd(),new Error(`OpenAI API error: ${response.status}`);const assistantMessage=(await response.json()).choices[0].message.content;return this.conversationHistory.push({role:"assistant",content:assistantMessage}),openaiService_console.log("‚úÖ ChatGPT response:",assistantMessage),openaiService_console.groupEnd(),assistantMessage}catch(error){throw openaiService_console.error("‚ùå ChatGPT error:",error),openaiService_console.groupEnd(),error}}resetConversation(){openaiService_console.log("üîÑ Resetting ChatGPT conversation"),this.initializeConversation()}getConversationHistory(){return this.conversationHistory}trimHistory(maxMessages=10){if(this.conversationHistory.length>maxMessages+1){const systemPrompt=this.conversationHistory[0],recentMessages=this.conversationHistory.slice(-maxMessages);this.conversationHistory=[systemPrompt,...recentMessages],openaiService_console.log(`üìù Trimmed conversation history to ${this.conversationHistory.length} messages`)}}constructor(apiKey,brokerageName="Real Estate Assistant"){this.baseUrl="https://api.openai.com/v1",this.conversationHistory=[],this.apiKey=apiKey,this.systemPrompt=this.createSystemPrompt(brokerageName),this.initializeConversation()}}function getErrorMessage(error){if(error instanceof Error){if("IRRELEVANT_QUERY"===error.message)return"I can help you find properties! Try asking about homes, condos, or apartments for sale. For example: '3 bedroom condo in Toronto' or 'house under $800k'.";if(error.message.includes("API error"))return"Sorry, I'm having trouble connecting to the property search service. Please try again in a moment.";if(error.message.includes("401")||error.message.includes("403"))return"There's an issue with the API configuration. Please contact support.";if(error.message.includes("timeout"))return"The search is taking longer than expected. Please try again."}return"Sorry, something went wrong. Please try again or rephrase your search."}function formatAddress(address){return`${[address.streetNumber,address.streetName,address.streetSuffix].filter(Boolean).join(" ")}, ${[address.city,address.province].filter(Boolean).join(", ")}`}var useChatRuntime_console=__webpack_require__("./node_modules/console-browserify/index.js");const House=(0,createLucideIcon.Z)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),ChevronUp=(0,createLucideIcon.Z)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);var chevron_down=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/chevron-down.js");const Bed=(0,createLucideIcon.Z)("bed",[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]]);var bath=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/bath.js");const Maximize2=(0,createLucideIcon.Z)("maximize-2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);function PropertyCard({listing,onViewDetails}){var _listing_images;const[imageLoaded,setImageLoaded]=(0,react.useState)(!1),[imageError,setImageError]=(0,react.useState)(!1),imageUrl=function getImageUrl(imageUrl){if(!imageUrl)return;let fullUrl=imageUrl;imageUrl.startsWith("http://")||imageUrl.startsWith("https://")||(fullUrl=`https://cdn.repliers.io/${imageUrl.startsWith("/")?imageUrl.slice(1):imageUrl}`);if(fullUrl.includes("class="))return fullUrl;const separator=fullUrl.includes("?")?"&":"?";return`${fullUrl}${separator}class=small`}(null===(_listing_images=listing.images)||void 0===_listing_images?void 0:_listing_images[0]),showImage=imageUrl&&!imageError,propertySummary=function getPropertySummary(listing){const type=listing.propertyType||"property",address=formatAddress(listing.address);return`${listing.bedrooms} bedroom, ${listing.bathrooms} bathroom ${type} at ${address}`}(listing),handleClick=()=>{onViewDetails?onViewDetails(listing):alert(`Property details:\nMLS #${listing.mlsNumber}\n\nFull details view coming soon!`)};return(0,jsx_runtime.jsxs)("div",{className:" bg-white rounded-xl shadow-md overflow-hidden hover:shadow-xl hover:scale-[1.02] transition-all duration-300 ease-out cursor-pointer focus-within:ring-2 focus-within:ring-blue-500 ",onClick:handleClick,onKeyPress:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),handleClick())},tabIndex:0,role:"button","aria-label":`View details for ${propertySummary}`,children:[(0,jsx_runtime.jsxs)("div",{className:"relative h-40 bg-gray-200 overflow-hidden",children:[showImage?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[!imageLoaded&&(0,jsx_runtime.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,jsx_runtime.jsx)("div",{className:"w-10 h-10 border-3 border-gray-300 border-t-blue-600 rounded-full animate-spin"})}),(0,jsx_runtime.jsx)("img",{src:imageUrl,alt:`Property at ${formatAddress(listing.address)}`,className:`\n                w-full h-full object-cover\n                transition-opacity duration-300\n                ${imageLoaded?"opacity-100":"opacity-0"}\n              `,onLoad:()=>setImageLoaded(!0),onError:()=>setImageError(!0),loading:"lazy"})]}):(0,jsx_runtime.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-gradient-to-br from-gray-100 to-gray-200",children:(0,jsx_runtime.jsx)(House,{className:"w-12 h-12 text-gray-400"})}),listing.propertyType&&(0,jsx_runtime.jsx)("div",{className:"absolute top-2 left-2 bg-white/90 backdrop-blur-sm px-2 py-0.5 rounded-full text-[10px] font-semibold text-gray-700 shadow-md",children:listing.propertyType}),listing.status&&(0,jsx_runtime.jsx)("div",{className:"absolute top-2 right-2 bg-blue-600 text-white px-2 py-0.5 rounded-full text-[10px] font-semibold shadow-md",children:listing.status})]}),(0,jsx_runtime.jsxs)("div",{className:"p-3 space-y-2",children:[(0,jsx_runtime.jsxs)("div",{className:"space-y-0.5",children:[(0,jsx_runtime.jsx)("div",{className:"text-xl font-bold text-gray-900",children:(price=listing.listPrice,new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD",minimumFractionDigits:0,maximumFractionDigits:0}).format(price))}),(0,jsx_runtime.jsxs)("div",{className:"text-[10px] text-gray-500",children:["MLS #",listing.mlsNumber]})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-3 text-gray-600",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-1",title:"Bedrooms",children:[(0,jsx_runtime.jsx)(Bed,{className:"w-3.5 h-3.5"}),(0,jsx_runtime.jsx)("span",{className:"text-xs font-medium",children:listing.bedrooms})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-1",title:"Bathrooms",children:[(0,jsx_runtime.jsx)(bath.Z,{className:"w-3.5 h-3.5"}),(0,jsx_runtime.jsx)("span",{className:"text-xs font-medium",children:listing.bathrooms})]}),listing.sqft&&(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-1",title:"Square footage",children:[(0,jsx_runtime.jsx)(Maximize2,{className:"w-3.5 h-3.5"}),(0,jsx_runtime.jsx)("span",{className:"text-xs font-medium",children:listing.sqft.toLocaleString()})]})]}),(0,jsx_runtime.jsx)("div",{className:"text-xs text-gray-700 pt-1 border-t border-gray-100",children:formatAddress(listing.address)}),(0,jsx_runtime.jsxs)("button",{className:" w-full mt-1.5 py-1.5 px-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white text-xs font-semibold rounded-lg hover:from-blue-700 hover:to-blue-800 active:scale-95 transition-all duration-200 flex items-center justify-center gap-1.5 ",onClick:e=>{e.stopPropagation(),handleClick()},"aria-label":`View full details for ${propertySummary}`,children:["View Details",(0,jsx_runtime.jsx)("span",{"aria-hidden":"true",children:"‚Üí"})]})]})]});var price}function PropertyResults({listings,onViewDetails}){const[showAll,setShowAll]=(0,react.useState)(!1);if(!listings||0===listings.length)return(0,jsx_runtime.jsxs)("div",{className:"mt-4 p-6 bg-gray-50 rounded-xl border border-gray-200 text-center space-y-3",children:[(0,jsx_runtime.jsx)("div",{className:"flex justify-center",children:(0,jsx_runtime.jsx)("div",{className:"p-3 bg-white rounded-full shadow-sm",children:(0,jsx_runtime.jsx)(House,{className:"w-8 h-8 text-gray-400"})})}),(0,jsx_runtime.jsxs)("div",{className:"space-y-1",children:[(0,jsx_runtime.jsx)("p",{className:"text-gray-700 font-medium",children:"No properties found"}),(0,jsx_runtime.jsx)("p",{className:"text-sm text-gray-500",children:"Try adjusting your search criteria or exploring different neighborhoods."})]})]});const displayedListings=showAll?listings:listings.slice(0,5),hasMore=listings.length>5;return(0,jsx_runtime.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,jsx_runtime.jsx)("div",{className:"flex items-center justify-between px-1",children:(0,jsx_runtime.jsxs)("p",{className:"text-sm font-semibold text-gray-700",children:["Found ",listings.length," ",1===listings.length?"property":"properties"]})}),(0,jsx_runtime.jsx)("div",{className:" grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn ",children:displayedListings.map(((listing,index)=>(0,jsx_runtime.jsx)("div",{className:"animate-slideUp",style:{animationDelay:.1*index+"s"},children:(0,jsx_runtime.jsx)(PropertyCard,{listing,onViewDetails})},listing.mlsNumber)))}),hasMore&&(0,jsx_runtime.jsx)("div",{className:"flex justify-center pt-2",children:(0,jsx_runtime.jsx)("button",{onClick:()=>setShowAll(!showAll),className:" flex items-center gap-2 px-6 py-2 bg-white border-2 border-gray-300 text-gray-700 font-medium text-sm rounded-lg hover:border-blue-500 hover:text-blue-600 active:scale-95 transition-all duration-200 ","aria-label":showAll?"Show fewer properties":"Show all properties",children:showAll?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Show Less",(0,jsx_runtime.jsx)(ChevronUp,{className:"w-4 h-4"})]}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Show ",listings.length-5," More",(0,jsx_runtime.jsx)(chevron_down.Z,{className:"w-4 h-4"})]})})})]})}if(PropertyCard.__docgenInfo={description:"PropertyCard Component\n\nDisplays a single property listing in a beautiful, responsive card format.\nIncludes image, price, specs (bed/bath/sqft), and address.\n\nFeatures:\n- Lazy-loaded images with placeholder\n- Responsive design (full width mobile, fixed width desktop)\n- Hover effects\n- Accessible with ARIA labels",methods:[],displayName:"PropertyCard",props:{listing:{required:!0,tsType:{name:"PropertyListing"},description:""},onViewDetails:{required:!1,tsType:{name:"signature",type:"function",raw:"(listing: PropertyListing) => void",signature:{arguments:[{type:{name:"PropertyListing"},name:"listing"}],return:{name:"void"}}},description:""}}},"undefined"!=typeof document){const style=document.createElement("style");style.textContent="\n    @keyframes fadeIn {\n      from {\n        opacity: 0;\n      }\n      to {\n        opacity: 1;\n      }\n    }\n\n    @keyframes slideUp {\n      from {\n        opacity: 0;\n        transform: translateY(10px);\n      }\n      to {\n        opacity: 1;\n        transform: translateY(0);\n      }\n    }\n\n    .animate-fadeIn {\n      animation: fadeIn 0.5s ease-out;\n    }\n\n    .animate-slideUp {\n      opacity: 0;\n      animation: slideUp 0.4s ease-out forwards;\n    }\n  ",document.head.querySelector("style[data-property-animations]")||(style.setAttribute("data-property-animations","true"),document.head.appendChild(style))}function ChatWidget({isOpen,onClose,brokerageName,brokerageLogo,welcomeMessage,placeholder,repliersApiKey,openaiApiKey}){const{messages,isLoading,sendMessage}=function useChatRuntime(repliersApiKey,openaiApiKey,brokerageName="Real Estate Assistant",welcomeMessage=DEFAULT_WELCOME_MESSAGE){const nlpService=(0,react.useMemo)((()=>new RepliersNLPService(repliersApiKey)),[repliersApiKey]),chatGPT=(0,react.useMemo)((()=>openaiApiKey?new OpenAIService(openaiApiKey,brokerageName):null),[openaiApiKey,brokerageName]),[messages,setMessages]=(0,react.useState)([{id:"welcome",role:"assistant",content:welcomeMessage,timestamp:new Date}]),[isLoading,setIsLoading]=(0,react.useState)(!1),processPropertySearch=(0,react.useCallback)((async userMessage=>{useChatRuntime_console.log("üîç Processing property search:",userMessage);const nlpResponse=await nlpService.processQuery(userMessage),searchingMessage={id:`searching-${Date.now()}`,role:"assistant",content:`${nlpResponse.summary||"Searching for properties"}...`,timestamp:new Date,isLoading:!0};setMessages((prev=>[...prev,searchingMessage]));const listings=await nlpService.searchListings(nlpResponse.request.url,nlpResponse.request.body);return setMessages((prev=>prev.filter((msg=>msg.id!==searchingMessage.id)))),listings}),[nlpService]),handleChatGPTMessage=(0,react.useCallback)((async(userMessage,listings)=>chatGPT?(listings&&chatGPT.addPropertyContext(listings,userMessage),await chatGPT.chat(userMessage)):listings&&listings.length>0?`I found ${listings.length} ${1===listings.length?"property":"properties"} that match your search!`:"I specialize in helping you find properties! Try asking me something like '3 bedroom condo in Toronto' or 'house under $800k with a backyard'."),[chatGPT]),sendMessage=(0,react.useCallback)((async content=>{if(!content.trim()||isLoading)return;const userMessage={id:`user-${Date.now()}`,role:"user",content:content.trim(),timestamp:new Date};setMessages((prev=>[...prev,userMessage])),setIsLoading(!0);try{if(function isPropertySearchQuery(message){const lowerMessage=message.toLowerCase();return["house","home","condo","apartment","townhouse","property","listing","real estate","looking for","find","search","show me","want","need","interested in","bed","bedroom","bath","bathroom","sqft","square feet","price","budget","under","over","between","kitchen","garage","parking","backyard","pool","basement","balcony","fireplace","in","near","around","toronto","downtown","neighborhood"].some((keyword=>lowerMessage.includes(keyword)))}(content)){const listings=await processPropertySearch(content),response=await handleChatGPTMessage(content,listings),resultMessage={id:`result-${Date.now()}`,role:"assistant",content:response,propertyResults:listings.length>0?listings:void 0,timestamp:new Date};setMessages((prev=>[...prev,resultMessage]))}else{const response=await handleChatGPTMessage(content),responseMessage={id:`response-${Date.now()}`,role:"assistant",content:response,timestamp:new Date};setMessages((prev=>[...prev,responseMessage]))}chatGPT&&chatGPT.trimHistory(20)}catch(error){useChatRuntime_console.error("Error processing message:",error),setMessages((prev=>prev.filter((msg=>!msg.isLoading))));const errorMessage={id:`error-${Date.now()}`,role:"assistant",content:getErrorMessage(error),timestamp:new Date,error:!0};setMessages((prev=>[...prev,errorMessage]))}finally{setIsLoading(!1)}}),[isLoading,processPropertySearch,handleChatGPTMessage,chatGPT]),resetConversation=(0,react.useCallback)((()=>{nlpService.resetContext(),chatGPT&&chatGPT.resetConversation(),setMessages([{id:"welcome",role:"assistant",content:welcomeMessage,timestamp:new Date}]),setIsLoading(!1)}),[nlpService,chatGPT,welcomeMessage]);return{messages,isLoading,sendMessage,resetConversation}}(repliersApiKey,openaiApiKey,brokerageName,welcomeMessage),[inputValue,setInputValue]=(0,react.useState)(""),messagesEndRef=(0,react.useRef)(null);(0,react.useEffect)((()=>{var _messagesEndRef_current;null===(_messagesEndRef_current=messagesEndRef.current)||void 0===_messagesEndRef_current||_messagesEndRef_current.scrollIntoView({behavior:"smooth"})}),[messages]);const handleSend=()=>{inputValue.trim()&&!isLoading&&(sendMessage(inputValue),setInputValue(""))};return isOpen?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-40 transition-opacity duration-300 md:hidden",onClick:onClose,"aria-hidden":"true"}),(0,jsx_runtime.jsxs)("div",{className:`\n          fixed z-50 bg-white rounded-2xl shadow-2xl\n          flex flex-col overflow-hidden\n          transition-all duration-300 ease-out\n          ${isOpen?"opacity-100 translate-y-0 scale-100":"opacity-0 translate-y-4 scale-95 pointer-events-none"}\n\n          /* Mobile: Full screen */\n          inset-4 md:inset-auto\n\n          /* Desktop: Bottom right, fixed size - wider for property cards */\n          md:bottom-24 md:right-6\n          md:w-[480px] md:h-[700px]\n        `,role:"dialog","aria-labelledby":"chat-header","aria-modal":"true",children:[(0,jsx_runtime.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-4 flex items-center justify-between shadow-lg",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-3",children:[brokerageLogo&&(0,jsx_runtime.jsx)("img",{src:brokerageLogo,alt:`${brokerageName} logo`,className:"w-10 h-10 rounded-full bg-white/10 p-1 object-contain"}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h2",{id:"chat-header",className:"font-semibold text-lg",children:brokerageName}),(0,jsx_runtime.jsx)("p",{className:"text-xs text-blue-100",children:"Online now"})]})]}),(0,jsx_runtime.jsx)("button",{onClick:onClose,"aria-label":BUTTON_LABELS_CLOSE,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:(0,jsx_runtime.jsx)(x.Z,{className:"w-5 h-5"})})]}),(0,jsx_runtime.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-4 bg-gradient-to-b from-blue-50/30 to-white",children:[messages.map((message=>(0,jsx_runtime.jsxs)("div",{className:"space-y-3",children:[(0,jsx_runtime.jsx)("div",{className:"flex "+("user"===message.role?"justify-end":"justify-start"),children:(0,jsx_runtime.jsxs)("div",{className:`\n                    max-w-[85%] rounded-2xl px-4 py-3 shadow-sm\n                    ${"user"===message.role?"bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-br-sm":message.error?"bg-red-50 text-red-800 rounded-bl-sm border border-red-200":message.isLoading?"bg-blue-50 text-blue-800 rounded-bl-sm border border-blue-200 flex items-center gap-2":"bg-white text-gray-800 rounded-bl-sm border border-gray-100"}\n                  `,children:[message.isLoading&&(0,jsx_runtime.jsx)(loader_circle.Z,{className:"w-4 h-4 animate-spin"}),(0,jsx_runtime.jsx)("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:message.content})]})}),"assistant"===message.role&&message.propertyResults&&message.propertyResults.length>0&&(0,jsx_runtime.jsx)("div",{className:"w-full",children:(0,jsx_runtime.jsx)(PropertyResults,{listings:message.propertyResults})})]},message.id))),isLoading&&!messages.some((m=>m.isLoading))&&(0,jsx_runtime.jsx)("div",{className:"flex justify-start",children:(0,jsx_runtime.jsx)("div",{className:"bg-white text-gray-800 rounded-2xl rounded-bl-sm px-4 py-3 shadow-sm border border-gray-100",children:(0,jsx_runtime.jsx)(loader_circle.Z,{className:"w-5 h-5 animate-spin text-blue-600"})})}),(0,jsx_runtime.jsx)("div",{ref:messagesEndRef})]}),(0,jsx_runtime.jsxs)("div",{className:"border-t border-gray-200 p-4 bg-white",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)("input",{type:"text",value:inputValue,onChange:e=>setInputValue(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),handleSend())},placeholder,disabled:isLoading,className:" flex-1 px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50 disabled:cursor-not-allowed text-sm transition-all duration-200 ","aria-label":"Message input"}),(0,jsx_runtime.jsx)("button",{onClick:handleSend,disabled:!inputValue.trim()||isLoading,"aria-label":BUTTON_LABELS_SEND,className:" p-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl hover:shadow-lg hover:scale-105 disabled:bg-gray-300 disabled:cursor-not-allowed disabled:hover:scale-100 transition-all duration-200 flex items-center justify-center ",children:(0,jsx_runtime.jsx)(Send,{className:"w-5 h-5"})})]}),(0,jsx_runtime.jsx)("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"Powered by Repliers AI ‚Ä¢ Press Enter to send"})]})]})]}):null}function Chatbot({repliersApiKey,openaiApiKey,brokerageName="Real Estate Assistant",brokerageLogo,primaryColor,position="bottom-right",welcomeMessage=DEFAULT_WELCOME_MESSAGE,placeholder="e.g., 3 bedroom house in Toronto under $800k..."}){const[isOpen,setIsOpen]=(0,react.useState)(!1);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(FloatingButton,{isOpen,onClick:()=>{setIsOpen((prev=>!prev))},position}),(0,jsx_runtime.jsx)(ChatWidget,{isOpen,onClose:()=>{setIsOpen(!1)},brokerageName,brokerageLogo,welcomeMessage,placeholder,repliersApiKey,openaiApiKey})]})}PropertyResults.__docgenInfo={description:'PropertyResults Component\n\nDisplays a grid of property cards with pagination controls.\n\nFeatures:\n- Responsive grid (1 col mobile, 2 col desktop)\n- Show 5 properties initially, "Show more" for rest\n- Empty state with helpful message\n- Staggered fade-in animations\n- Property count header',methods:[],displayName:"PropertyResults",props:{listings:{required:!0,tsType:{name:"Array",elements:[{name:"PropertyListing"}],raw:"PropertyListing[]"},description:""},onViewDetails:{required:!1,tsType:{name:"signature",type:"function",raw:"(listing: PropertyListing) => void",signature:{arguments:[{type:{name:"PropertyListing"},name:"listing"}],return:{name:"void"}}},description:""}}},ChatWidget.__docgenInfo={description:"",methods:[],displayName:"ChatWidget",props:{isOpen:{required:!0,tsType:{name:"boolean"},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},brokerageName:{required:!0,tsType:{name:"string"},description:""},brokerageLogo:{required:!1,tsType:{name:"string"},description:""},welcomeMessage:{required:!0,tsType:{name:"string"},description:""},placeholder:{required:!0,tsType:{name:"string"},description:""},repliersApiKey:{required:!0,tsType:{name:"string"},description:""},openaiApiKey:{required:!1,tsType:{name:"string"},description:""}}};Chatbot.__docgenInfo={description:'Real Estate Chatbot Component\n\n@description A conversational AI chatbot for real estate websites that combines:\n- Repliers NLP API for natural language property searches\n- OpenAI ChatGPT for intelligent conversation (optional)\n\nFeatures:\n- Floating action button with smooth animations\n- Modal chat interface (responsive: full-screen mobile, panel desktop)\n- Natural language property search powered by Repliers NLP\n- Intelligent conversation with ChatGPT (when API key provided)\n- Context-aware multi-turn conversations using nlpId\n- Beautiful property cards with images and details\n- Visual search support (e.g., "modern white kitchen")\n- Customizable branding (logo, colors, messages)\n- Accessible and keyboard-navigable\n\n@param props - The component props\n@returns JSX.Element\n\n@example\n```tsx\n// With ChatGPT\n<Chatbot\n  repliersApiKey="your_repliers_api_key"\n  openaiApiKey="your_openai_api_key"\n  brokerageName="Acme Realty"\n  brokerageLogo="/logo.png"\n  position="bottom-right"\n/>\n\n// Without ChatGPT (fallback to simple responses)\n<Chatbot\n  repliersApiKey="your_repliers_api_key"\n  brokerageName="Acme Realty"\n/>\n```',methods:[],displayName:"Chatbot",props:{repliersApiKey:{required:!0,tsType:{name:"string"},description:"Repliers API key (required for property search)"},openaiApiKey:{required:!1,tsType:{name:"string"},description:"OpenAI API key (optional - for enhanced conversation, coming soon)"},brokerageName:{required:!1,tsType:{name:"string"},description:"Name of the brokerage to display in header",defaultValue:{value:'"Real Estate Assistant"',computed:!1}},brokerageLogo:{required:!1,tsType:{name:"string"},description:"URL to brokerage logo image"},primaryColor:{required:!1,tsType:{name:"string"},description:"Primary brand color (hex or Tailwind color)"},position:{required:!1,tsType:{name:"union",raw:'"bottom-right" | "bottom-left"',elements:[{name:"literal",value:'"bottom-right"'},{name:"literal",value:'"bottom-left"'}]},description:"Position of the floating button",defaultValue:{value:'"bottom-right"',computed:!1}},welcomeMessage:{required:!1,tsType:{name:"string"},description:"Custom welcome message from the assistant",defaultValue:{value:"\"Hi! I'm your AI real estate assistant. Tell me what you're looking for and I'll help you find the perfect home.\"",computed:!1}},placeholder:{required:!1,tsType:{name:"string"},description:"Placeholder text for input field",defaultValue:{value:'"e.g., 3 bedroom house in Toronto under $800k..."',computed:!1}}}};const SAMPLE_REPLIERS_API_KEY="pxI19UMy9zfw9vz5lRxoGpjJWXrMnm",chatbot_stories={title:"pocs/Chatbot/Real Estate Chatbot",component:Chatbot,parameters:{layout:"fullscreen",docs:{description:{component:'\n# Real Estate Chatbot with ChatGPT + NLP Integration\n\nA conversational AI chatbot for real estate websites that combines:\n- **OpenAI ChatGPT** for natural conversation (optional)\n- **Repliers NLP API** for property searches\n\n## ‚ú® Features\n\n- ü§ñ **ChatGPT Conversation** - Natural, helpful dialogue (when OpenAI key provided)\n- üó£Ô∏è **Natural Language Search** - Ask in plain English: "3 bedroom condo in Toronto"\n- üîÑ **Context-Aware** - Multi-turn refinement using nlpId\n- üé® **Visual Search** - Search by aesthetics: "modern white kitchen"\n- üè† **Beautiful Property Cards** - Images, specs, and details\n- üì± **Fully Responsive** - Full-screen on mobile, panel on desktop\n- üé® **Customizable Branding** - Logo, colors, and messaging\n- ‚ôø **Accessible** - Keyboard navigation and ARIA labels\n\n## üß† How It Works\n\n### With ChatGPT (OpenAI key provided):\n1. **User**: "Hello!"\n2. **ChatGPT**: "Hi! I\'m here to help you find your perfect property. What are you looking for?"\n3. **User**: "3 bedroom condo in Toronto"\n4. **Repliers NLP**: Processes search ‚Üí Returns properties\n5. **ChatGPT**: "I found 12 condos in Toronto with 3 bedrooms! Would you like to refine by price or neighborhood?"\n\n### Without ChatGPT (fallback):\n1. **User**: "3 bedroom condo in Toronto"\n2. **System**: Processes search ‚Üí Returns properties with simple confirmation\n\n## üîë API Keys\n\n**Repliers API**: Sample key provided (get yours at [repliers.com](https://repliers.com))\n**OpenAI API**: Add your key in controls to enable ChatGPT (get at [platform.openai.com](https://platform.openai.com))\n\n## üéØ Try These Queries\n\n**General Conversation** (with OpenAI key):\n- "Hello!"\n- "What can you help me with?"\n- "Tell me about the first property"\n\n**Property Search**:\n- "3 bedroom condo in Toronto"\n- "House under $800k with a backyard"\n- "Modern apartment with white kitchen"\n- "Show me properties in the Annex"\n\n## üîó Multi-Turn Conversations\n\nThe chatbot maintains context across both systems:\n1. "Hi!" ‚Üí ChatGPT responds\n2. "I want a condo" ‚Üí Searches properties\n3. "Make it 3 bedrooms" ‚Üí Refines search (uses nlpId)\n4. "Tell me about the first one" ‚Üí ChatGPT discusses property\n        '}}},argTypes:{repliersApiKey:{control:"text",description:"Repliers API key (required for property search)",table:{type:{summary:"string"},defaultValue:{summary:"Sample key provided"}}},openaiApiKey:{control:"text",description:"OpenAI API key (optional - enables ChatGPT for natural conversation). Get yours at platform.openai.com",table:{type:{summary:"string"},defaultValue:{summary:"undefined (uses fallback responses)"}}},brokerageName:{control:"text",description:"Name of the brokerage to display in chat header",table:{type:{summary:"string"},defaultValue:{summary:"Real Estate Assistant"}}},brokerageLogo:{control:"text",description:"URL to brokerage logo image",table:{type:{summary:"string"}}},primaryColor:{control:"color",description:"Primary brand color (future feature - Step 3)",table:{type:{summary:"string"},defaultValue:{summary:"#3B82F6"}}},position:{control:"radio",options:["bottom-right","bottom-left"],description:"Position of the floating button",table:{type:{summary:"bottom-right | bottom-left"},defaultValue:{summary:"bottom-right"}}},welcomeMessage:{control:"text",description:"Custom welcome message from the assistant",table:{type:{summary:"string"},defaultValue:{summary:"Hi! I'm your AI real estate assistant. Tell me what you're looking for and I'll help you find the perfect home."}}},placeholder:{control:"text",description:"Placeholder text for the message input",table:{type:{summary:"string"},defaultValue:{summary:"e.g., 3 bedroom house in Toronto under $800k..."}}}}},BasicPropertySearch={args:{repliersApiKey:SAMPLE_REPLIERS_API_KEY,brokerageName:"Acme Realty",welcomeMessage:"Hi! I'm your AI real estate assistant. Tell me what you're looking for!"}},WithChatGPT={args:{repliersApiKey:SAMPLE_REPLIERS_API_KEY,openaiApiKey:void 0,brokerageName:"Smart Homes Realty",welcomeMessage:"Hi! I'm your AI assistant powered by ChatGPT. What kind of property are you looking for?"},parameters:{docs:{description:{story:'\n**üéâ NEW: ChatGPT Integration!**\n\nThis story showcases the intelligent conversation system that combines:\n- OpenAI ChatGPT for natural dialogue\n- Repliers NLP for property searches\n\nThe chatbot automatically detects property search queries and routes them to Repliers NLP,\nwhile handling general conversation with ChatGPT. This creates a seamless, intelligent\nexperience where users can chat naturally and search for properties in the same conversation.\n\n**How to enable ChatGPT:**\n1. Get an API key from [platform.openai.com](https://platform.openai.com)\n2. Paste it in the "openaiApiKey" control below\n3. Start chatting!\n\n**Without an OpenAI key**, the chatbot still works with fallback responses.\n        '}}}},CustomBranding={args:{repliersApiKey:SAMPLE_REPLIERS_API_KEY,brokerageName:"Luxury Homes Toronto",brokerageLogo:"https://images.unsplash.com/photo-1560518883-ce09059eeffa?w=100&h=100&fit=crop",welcomeMessage:"Welcome to Luxury Homes Toronto! Let me help you find your dream property in the heart of the city.",placeholder:"Describe your dream home...",primaryColor:"#1e40af"}},LeftPositioned={args:{repliersApiKey:SAMPLE_REPLIERS_API_KEY,brokerageName:"Downtown Properties",position:"bottom-left"}},MultiTurnConversation={args:{repliersApiKey:SAMPLE_REPLIERS_API_KEY,brokerageName:"Smart Homes Realty",welcomeMessage:"Hi! Start by telling me what type of property you're interested in, then we can refine from there."},parameters:{docs:{description:{story:"\nThe chatbot uses Repliers' **nlpId** feature to maintain conversation context.\nEach refinement builds on previous queries, making the search feel natural and conversational.\n\nOpen your browser console to see the nlpId being maintained across messages!\n        "}}}},VisualSearch={args:{repliersApiKey:SAMPLE_REPLIERS_API_KEY,brokerageName:"Design-Forward Homes",welcomeMessage:"Looking for a specific style or aesthetic? Describe the look you want!",placeholder:"e.g., modern kitchen, hardwood floors..."},parameters:{docs:{description:{story:"\nVisual search allows users to find properties based on aesthetics.\nThe Repliers NLP API extracts visual preferences and uses imageSearchItems\nto rank properties by visual similarity.\n        "}}}},MobileView={args:{repliersApiKey:SAMPLE_REPLIERS_API_KEY,brokerageName:"Mobile Realty"},parameters:{viewport:{defaultViewport:"mobile1"},docs:{description:{story:"\nOn mobile devices, the chat interface takes up the full screen.\nProperty cards stack vertically for easy scrolling.\n        "}}}},InContext={args:{repliersApiKey:SAMPLE_REPLIERS_API_KEY,brokerageName:"Premier Properties"},decorators:[Story=>(0,jsx_runtime.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 to-white",children:[(0,jsx_runtime.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,jsx_runtime.jsxs)("div",{className:"container mx-auto px-6 py-4",children:[(0,jsx_runtime.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Premier Properties"}),(0,jsx_runtime.jsx)("p",{className:"text-sm text-gray-600",children:"Find your dream home with AI assistance"})]})}),(0,jsx_runtime.jsx)("main",{className:"container mx-auto px-6 py-12",children:(0,jsx_runtime.jsxs)("div",{className:"max-w-4xl mx-auto text-center space-y-6",children:[(0,jsx_runtime.jsx)("h2",{className:"text-4xl font-bold text-gray-900",children:"AI-Powered Property Search"}),(0,jsx_runtime.jsx)("p",{className:"text-xl text-gray-600",children:"Chat with our AI assistant to find properties that match your exact needs. Just describe what you're looking for in natural language!"}),(0,jsx_runtime.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-12",children:[1,2,3].map((i=>(0,jsx_runtime.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,jsx_runtime.jsx)("div",{className:"h-48 bg-gray-200"}),(0,jsx_runtime.jsxs)("div",{className:"p-4",children:[(0,jsx_runtime.jsxs)("h3",{className:"font-semibold text-lg",children:["Property ",i]}),(0,jsx_runtime.jsx)("p",{className:"text-gray-600",children:"3 bed ‚Ä¢ 2 bath ‚Ä¢ $750,000"})]})]},i)))}),(0,jsx_runtime.jsxs)("div",{className:"mt-12 p-8 bg-blue-600 text-white rounded-2xl",children:[(0,jsx_runtime.jsx)("h3",{className:"text-2xl font-bold mb-2",children:"Try Our AI Chat Assistant"}),(0,jsx_runtime.jsx)("p",{className:"text-blue-100",children:"Click the chat button in the bottom right to get started!"})]})]})}),(0,jsx_runtime.jsx)(Story,{})]})],parameters:{docs:{description:{story:"\nThis story shows how the chatbot integrates seamlessly into a real estate website.\nThe floating button stays accessible while users browse the page.\n        "}}}},ErrorHandling={args:{repliersApiKey:"invalid_api_key_for_demo",brokerageName:"Error Demo",welcomeMessage:"Try searching for a property to see error handling in action."},parameters:{docs:{description:{story:"\nThis story uses an invalid API key to demonstrate error handling.\nTry searching for properties to see how errors are handled gracefully\nwith user-friendly messages.\n        "}}}},__namedExportsOrder=["BasicPropertySearch","WithChatGPT","CustomBranding","LeftPositioned","MultiTurnConversation","VisualSearch","MobileView","InContext","ErrorHandling"];BasicPropertySearch.parameters={...BasicPropertySearch.parameters,docs:{...BasicPropertySearch.parameters?.docs,source:{originalSource:'{\n  args: {\n    repliersApiKey: SAMPLE_REPLIERS_API_KEY,\n    brokerageName: "Acme Realty",\n    welcomeMessage: "Hi! I\'m your AI real estate assistant. Tell me what you\'re looking for!"\n  }\n}',...BasicPropertySearch.parameters?.docs?.source},description:{story:'**Basic Property Search**\n\nThis story demonstrates the core NLP-powered property search functionality.\nThe chatbot understands natural language and returns real property listings.\n\n**Try these queries:**\n- "3 bedroom condo in Toronto"\n- "House under $800k with a backyard"\n- "Modern apartment with white kitchen"\n- "Show me properties in the Annex"\n\n**Check the browser console** to see NLP API calls and responses!',...BasicPropertySearch.parameters?.docs?.description}}},WithChatGPT.parameters={...WithChatGPT.parameters,docs:{...WithChatGPT.parameters?.docs,source:{originalSource:'{\n  args: {\n    repliersApiKey: SAMPLE_REPLIERS_API_KEY,\n    openaiApiKey: undefined,\n    // ‚¨ÖÔ∏è Paste your OpenAI API key here or use Storybook controls!\n    brokerageName: "Smart Homes Realty",\n    welcomeMessage: "Hi! I\'m your AI assistant powered by ChatGPT. What kind of property are you looking for?"\n  },\n  parameters: {\n    docs: {\n      description: {\n        story: `\n**üéâ NEW: ChatGPT Integration!**\n\nThis story showcases the intelligent conversation system that combines:\n- OpenAI ChatGPT for natural dialogue\n- Repliers NLP for property searches\n\nThe chatbot automatically detects property search queries and routes them to Repliers NLP,\nwhile handling general conversation with ChatGPT. This creates a seamless, intelligent\nexperience where users can chat naturally and search for properties in the same conversation.\n\n**How to enable ChatGPT:**\n1. Get an API key from [platform.openai.com](https://platform.openai.com)\n2. Paste it in the "openaiApiKey" control below\n3. Start chatting!\n\n**Without an OpenAI key**, the chatbot still works with fallback responses.\n        `\n      }\n    }\n  }\n}',...WithChatGPT.parameters?.docs?.source},description:{story:'**With ChatGPT (Step 3 Complete!)**\n\nThis story demonstrates the full ChatGPT + Repliers NLP integration.\nPaste your OpenAI API key in the controls to enable natural conversation!\n\n**Without OpenAI key**: Falls back to simple responses\n**With OpenAI key**: Full conversational AI with property search\n\n**Try this conversation flow:**\n1. "Hello!" ‚Üí ChatGPT responds warmly\n2. "I\'m looking for a condo" ‚Üí ChatGPT asks clarifying questions\n3. "3 bedrooms in Toronto" ‚Üí Searches properties\n4. "Under $800k" ‚Üí Refines search\n5. "Tell me about the first one" ‚Üí ChatGPT discusses property details\n\n**Check the browser console** to see both ChatGPT and NLP API calls!',...WithChatGPT.parameters?.docs?.description}}},CustomBranding.parameters={...CustomBranding.parameters,docs:{...CustomBranding.parameters?.docs,source:{originalSource:'{\n  args: {\n    repliersApiKey: SAMPLE_REPLIERS_API_KEY,\n    brokerageName: "Luxury Homes Toronto",\n    brokerageLogo: "https://images.unsplash.com/photo-1560518883-ce09059eeffa?w=100&h=100&fit=crop",\n    welcomeMessage: "Welcome to Luxury Homes Toronto! Let me help you find your dream property in the heart of the city.",\n    placeholder: "Describe your dream home...",\n    primaryColor: "#1e40af"\n  }\n}',...CustomBranding.parameters?.docs?.source},description:{story:"**Custom Branding**\n\nThis story shows how to white-label the chatbot with your brokerage's branding.\nCustomize the name, logo, colors, and welcome message.",...CustomBranding.parameters?.docs?.description}}},LeftPositioned.parameters={...LeftPositioned.parameters,docs:{...LeftPositioned.parameters?.docs,source:{originalSource:'{\n  args: {\n    repliersApiKey: SAMPLE_REPLIERS_API_KEY,\n    brokerageName: "Downtown Properties",\n    position: "bottom-left"\n  }\n}',...LeftPositioned.parameters?.docs?.source},description:{story:"**Left Position**\n\nSometimes you need the chat button on the left side of the screen.\nThis story demonstrates the position customization.",...LeftPositioned.parameters?.docs?.description}}},MultiTurnConversation.parameters={...MultiTurnConversation.parameters,docs:{...MultiTurnConversation.parameters?.docs,source:{originalSource:'{\n  args: {\n    repliersApiKey: SAMPLE_REPLIERS_API_KEY,\n    brokerageName: "Smart Homes Realty",\n    welcomeMessage: "Hi! Start by telling me what type of property you\'re interested in, then we can refine from there."\n  },\n  parameters: {\n    docs: {\n      description: {\n        story: `\nThe chatbot uses Repliers\' **nlpId** feature to maintain conversation context.\nEach refinement builds on previous queries, making the search feel natural and conversational.\n\nOpen your browser console to see the nlpId being maintained across messages!\n        `\n      }\n    }\n  }\n}',...MultiTurnConversation.parameters?.docs?.source},description:{story:'**Multi-Turn Conversation Demo**\n\nThis story demonstrates context-aware conversations using Repliers\' nlpId feature.\nThe chatbot maintains context across multiple messages!\n\n**Try this conversation flow:**\n1. Type: "I want a condo"\n2. Then: "3 bedrooms"\n3. Then: "In Toronto"\n4. Then: "Under $800k"\n\nEach message refines the previous search using the same nlpId.\nCheck the browser console to see the nlpId being passed!',...MultiTurnConversation.parameters?.docs?.description}}},VisualSearch.parameters={...VisualSearch.parameters,docs:{...VisualSearch.parameters?.docs,source:{originalSource:'{\n  args: {\n    repliersApiKey: SAMPLE_REPLIERS_API_KEY,\n    brokerageName: "Design-Forward Homes",\n    welcomeMessage: "Looking for a specific style or aesthetic? Describe the look you want!",\n    placeholder: "e.g., modern kitchen, hardwood floors..."\n  },\n  parameters: {\n    docs: {\n      description: {\n        story: `\nVisual search allows users to find properties based on aesthetics.\nThe Repliers NLP API extracts visual preferences and uses imageSearchItems\nto rank properties by visual similarity.\n        `\n      }\n    }\n  }\n}',...VisualSearch.parameters?.docs?.source},description:{story:'**Visual Search Demo**\n\nThe chatbot supports aesthetic/visual property searches!\nTry searching for properties by their appearance.\n\n**Try these visual queries:**\n- "Condo with modern white kitchen"\n- "House with hardwood floors"\n- "Apartment with marble countertops"\n\nThe NLP API will include imageSearchItems in the request,\nranking properties by visual match. Check the console!',...VisualSearch.parameters?.docs?.description}}},MobileView.parameters={...MobileView.parameters,docs:{...MobileView.parameters?.docs,source:{originalSource:'{\n  args: {\n    repliersApiKey: SAMPLE_REPLIERS_API_KEY,\n    brokerageName: "Mobile Realty"\n  },\n  parameters: {\n    viewport: {\n      defaultViewport: "mobile1"\n    },\n    docs: {\n      description: {\n        story: `\nOn mobile devices, the chat interface takes up the full screen.\nProperty cards stack vertically for easy scrolling.\n        `\n      }\n    }\n  }\n}',...MobileView.parameters?.docs?.source},description:{story:"**Mobile View**\n\nThis story demonstrates the mobile-responsive design.\nOn mobile, the chat interface expands to fill the entire screen\nfor an optimal user experience.",...MobileView.parameters?.docs?.description}}},InContext.parameters={...InContext.parameters,docs:{...InContext.parameters?.docs,source:{originalSource:'{\n  args: {\n    repliersApiKey: SAMPLE_REPLIERS_API_KEY,\n    brokerageName: "Premier Properties"\n  },\n  decorators: [Story => <div className="min-h-screen bg-gradient-to-b from-blue-50 to-white">\n        {/* Mock website header */}\n        <header className="bg-white shadow-sm border-b">\n          <div className="container mx-auto px-6 py-4">\n            <h1 className="text-2xl font-bold text-gray-900">\n              Premier Properties\n            </h1>\n            <p className="text-sm text-gray-600">\n              Find your dream home with AI assistance\n            </p>\n          </div>\n        </header>\n\n        {/* Mock website content */}\n        <main className="container mx-auto px-6 py-12">\n          <div className="max-w-4xl mx-auto text-center space-y-6">\n            <h2 className="text-4xl font-bold text-gray-900">\n              AI-Powered Property Search\n            </h2>\n            <p className="text-xl text-gray-600">\n              Chat with our AI assistant to find properties that match your\n              exact needs. Just describe what you\'re looking for in natural\n              language!\n            </p>\n\n            {/* Mock property cards */}\n            <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mt-12">\n              {[1, 2, 3].map(i => <div key={i} className="bg-white rounded-lg shadow-md overflow-hidden">\n                  <div className="h-48 bg-gray-200" />\n                  <div className="p-4">\n                    <h3 className="font-semibold text-lg">Property {i}</h3>\n                    <p className="text-gray-600">3 bed ‚Ä¢ 2 bath ‚Ä¢ $750,000</p>\n                  </div>\n                </div>)}\n            </div>\n\n            {/* CTA */}\n            <div className="mt-12 p-8 bg-blue-600 text-white rounded-2xl">\n              <h3 className="text-2xl font-bold mb-2">\n                Try Our AI Chat Assistant\n              </h3>\n              <p className="text-blue-100">\n                Click the chat button in the bottom right to get started!\n              </p>\n            </div>\n          </div>\n        </main>\n\n        {/* Chatbot will appear as floating button */}\n        <Story />\n      </div>],\n  parameters: {\n    docs: {\n      description: {\n        story: `\nThis story shows how the chatbot integrates seamlessly into a real estate website.\nThe floating button stays accessible while users browse the page.\n        `\n      }\n    }\n  }\n}',...InContext.parameters?.docs?.source},description:{story:"**In Real Estate Website Context**\n\nThis story shows how the chatbot looks when embedded in a typical\nreal estate website. The floating button stays accessible while\nusers browse properties on the page.",...InContext.parameters?.docs?.description}}},ErrorHandling.parameters={...ErrorHandling.parameters,docs:{...ErrorHandling.parameters?.docs,source:{originalSource:'{\n  args: {\n    repliersApiKey: "invalid_api_key_for_demo",\n    brokerageName: "Error Demo",\n    welcomeMessage: "Try searching for a property to see error handling in action."\n  },\n  parameters: {\n    docs: {\n      description: {\n        story: `\nThis story uses an invalid API key to demonstrate error handling.\nTry searching for properties to see how errors are handled gracefully\nwith user-friendly messages.\n        `\n      }\n    }\n  }\n}',...ErrorHandling.parameters?.docs?.source},description:{story:"**Error Handling Demo**\n\nThis story has an invalid API key to demonstrate error handling.\nTry sending a property search query to see the user-friendly error message.\n\nThe chatbot gracefully handles API errors without crashing.",...ErrorHandling.parameters?.docs?.description}}}},"./node_modules/lucide-react/dist/esm/createLucideIcon.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>createLucideIcon});var react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");const toPascalCase=string=>{const camelCase=(string=>string.replace(/^([A-Z])|[\s-_]+(\w)/g,((match,p1,p2)=>p2?p2.toUpperCase():p1.toLowerCase())))(string);return camelCase.charAt(0).toUpperCase()+camelCase.slice(1)},mergeClasses=(...classes)=>classes.filter(((className,index,array)=>Boolean(className)&&""!==className.trim()&&array.indexOf(className)===index)).join(" ").trim(),hasA11yProp=props=>{for(const prop in props)if(prop.startsWith("aria-")||"role"===prop||"title"===prop)return!0};var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Icon=(0,react.forwardRef)((({color="currentColor",size=24,strokeWidth=2,absoluteStrokeWidth,className="",children,iconNode,...rest},ref)=>(0,react.createElement)("svg",{ref,...defaultAttributes,width:size,height:size,stroke:color,strokeWidth:absoluteStrokeWidth?24*Number(strokeWidth)/Number(size):strokeWidth,className:mergeClasses("lucide",className),...!children&&!hasA11yProp(rest)&&{"aria-hidden":"true"},...rest},[...iconNode.map((([tag,attrs])=>(0,react.createElement)(tag,attrs))),...Array.isArray(children)?children:[children]]))),createLucideIcon=(iconName,iconNode)=>{const Component=(0,react.forwardRef)((({className,...props},ref)=>{return(0,react.createElement)(Icon,{ref,iconNode,className:mergeClasses(`lucide-${string=toPascalCase(iconName),string.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${iconName}`,className),...props});var string}));return Component.displayName=toPascalCase(iconName),Component}},"./node_modules/lucide-react/dist/esm/icons/bath.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>Bath});const Bath=(0,__webpack_require__("./node_modules/lucide-react/dist/esm/createLucideIcon.js").Z)("bath",[["path",{d:"M10 4 8 6",key:"1rru8s"}],["path",{d:"M17 19v2",key:"ts1sot"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"M7 19v2",key:"12npes"}],["path",{d:"M9 5 7.621 3.621A2.121 2.121 0 0 0 4 5v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5",key:"14ym8i"}]])},"./node_modules/lucide-react/dist/esm/icons/chevron-down.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>ChevronDown});const ChevronDown=(0,__webpack_require__("./node_modules/lucide-react/dist/esm/createLucideIcon.js").Z)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},"./node_modules/lucide-react/dist/esm/icons/loader-circle.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>LoaderCircle});const LoaderCircle=(0,__webpack_require__("./node_modules/lucide-react/dist/esm/createLucideIcon.js").Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},"./node_modules/lucide-react/dist/esm/icons/x.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>X});const X=(0,__webpack_require__("./node_modules/lucide-react/dist/esm/createLucideIcon.js").Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}}]);