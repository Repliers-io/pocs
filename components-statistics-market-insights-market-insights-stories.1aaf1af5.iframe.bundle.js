"use strict";(self.webpackChunkpocs=self.webpackChunkpocs||[]).push([[601],{"./src/components/statistics/market-insights/market-insights.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{MarketInsightsByAddress:()=>MarketInsightsByAddress,MarketInsightsByMLS:()=>MarketInsightsByMLS,__namedExportsOrder:()=>__namedExportsOrder,default:()=>market_insights_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),index_esm=__webpack_require__("./node_modules/react-hook-form/dist/index.esm.mjs"),zod=__webpack_require__("./node_modules/@hookform/resolvers/zod/dist/zod.mjs"),lib=__webpack_require__("./node_modules/zod/lib/index.mjs"),ui_form=__webpack_require__("./src/components/ui/form.tsx"),ui_button=__webpack_require__("./src/components/ui/button.tsx"),input=__webpack_require__("./src/components/ui/input.tsx"),api_input=__webpack_require__("./src/components/api-input/api-input.tsx");function MLSReport({listingData}){var _listingData_details,_listingData_details1,_listingData_address,_listingData_address1,_listingData_address2,_listingData_address3,_listingData_address4,_listingData_address5,_listingData_map,_listingData_map1,_listingData_address6,_listingData_address7,_listingData_details2,_listingData_details3,_listingData_details4,_listingData_details5,_listingData_details6,_listingData_details7,_listingData_lot,_listingData_lot1,_listingData_details8,_listingData_details9,_listingData_details10,_listingData_details11,_listingData_details12,_listingData_details13,_listingData_details14,_listingData_details15,_listingData_details16,_listingData_details17;return listingData?(0,jsx_runtime.jsxs)("div",{className:"space-y-4",children:[(0,jsx_runtime.jsxs)("div",{className:"flex justify-between items-center",children:[(0,jsx_runtime.jsx)("h3",{className:"text-xl font-semibold",children:"MLS Report"}),(0,jsx_runtime.jsxs)("div",{className:"space-x-2",children:[(0,jsx_runtime.jsx)(ui_button.z,{variant:"outline",size:"sm",onClick:()=>{navigator.clipboard.writeText(JSON.stringify(listingData,null,2))},children:"Copy Raw JSON"}),(0,jsx_runtime.jsx)(ui_button.z,{variant:"outline",size:"sm",onClick:()=>{var _listingData_details,_listingData_details1,_listingData_details2,_listingData_details3,_listingData_details4,_listingData_details5,_listingData_details6;const formattedText=`\nMLS #: ${listingData.mlsNumber}\nAddress: ${listingData.address.streetNumber} ${listingData.address.streetName} ${listingData.address.streetSuffix}\nCity: ${listingData.address.city}\nState: ${listingData.address.state}\nZip: ${listingData.address.zip}\nList Price: $${listingData.listPrice.toLocaleString()}\nProperty Type: ${null===(_listingData_details=listingData.details)||void 0===_listingData_details?void 0:_listingData_details.propertyType}\nStyle: ${null===(_listingData_details1=listingData.details)||void 0===_listingData_details1?void 0:_listingData_details1.style}\nBedrooms: ${null===(_listingData_details2=listingData.details)||void 0===_listingData_details2?void 0:_listingData_details2.numBedrooms} + ${null===(_listingData_details3=listingData.details)||void 0===_listingData_details3?void 0:_listingData_details3.numBedroomsPlus}\nBathrooms: ${null===(_listingData_details4=listingData.details)||void 0===_listingData_details4?void 0:_listingData_details4.numBathrooms}\nSquare Footage: ${null===(_listingData_details5=listingData.details)||void 0===_listingData_details5?void 0:_listingData_details5.sqft}\nYear Built: ${null===(_listingData_details6=listingData.details)||void 0===_listingData_details6?void 0:_listingData_details6.yearBuilt}\n              `;navigator.clipboard.writeText(formattedText)},children:"Copy Formatted"})]})]}),(0,jsx_runtime.jsxs)("div",{className:"space-y-4",children:[(0,jsx_runtime.jsxs)("div",{className:"bg-white p-4 rounded border",children:[(0,jsx_runtime.jsx)("h4",{className:"text-lg font-semibold mb-3",children:"Property Overview"}),(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("p",{className:"text-sm text-gray-600",children:"MLS Number"}),(0,jsx_runtime.jsx)("p",{className:"font-medium",children:listingData.mlsNumber})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("p",{className:"text-sm text-gray-600",children:"List Price"}),(0,jsx_runtime.jsxs)("p",{className:"font-medium",children:["$",listingData.listPrice.toLocaleString()]})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("p",{className:"text-sm text-gray-600",children:"Status"}),(0,jsx_runtime.jsx)("p",{className:"font-medium",children:listingData.status})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("p",{className:"text-sm text-gray-600",children:"Property Type"}),(0,jsx_runtime.jsx)("p",{className:"font-medium",children:null===(_listingData_details=listingData.details)||void 0===_listingData_details?void 0:_listingData_details.propertyType})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("p",{className:"text-sm text-gray-600",children:"Style"}),(0,jsx_runtime.jsx)("p",{className:"font-medium",children:null===(_listingData_details1=listingData.details)||void 0===_listingData_details1?void 0:_listingData_details1.style})]})]})]}),(0,jsx_runtime.jsxs)("div",{className:"bg-white p-4 rounded border",children:[(0,jsx_runtime.jsx)("h4",{className:"text-lg font-semibold mb-3",children:"Location Details"}),(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("p",{className:"text-sm text-gray-600",children:"Address"}),(0,jsx_runtime.jsxs)("p",{className:"font-medium",children:[null===(_listingData_address=listingData.address)||void 0===_listingData_address?void 0:_listingData_address.streetNumber," ",null===(_listingData_address1=listingData.address)||void 0===_listingData_address1?void 0:_listingData_address1.streetName," ",null===(_listingData_address2=listingData.address)||void 0===_listingData_address2?void 0:_listingData_address2.streetSuffix]}),(0,jsx_runtime.jsxs)("p",{className:"font-medium",children:[null===(_listingData_address3=listingData.address)||void 0===_listingData_address3?void 0:_listingData_address3.city,", ",null===(_listingData_address4=listingData.address)||void 0===_listingData_address4?void 0:_listingData_address4.state," ",null===(_listingData_address5=listingData.address)||void 0===_listingData_address5?void 0:_listingData_address5.zip]}),(null===(_listingData_map=listingData.map)||void 0===_listingData_map?void 0:_listingData_map.latitude)&&(null===(_listingData_map1=listingData.map)||void 0===_listingData_map1?void 0:_listingData_map1.longitude)&&(0,jsx_runtime.jsxs)("div",{className:"mt-2",children:[(0,jsx_runtime.jsx)("p",{className:"text-sm text-gray-600",children:"Coordinates"}),(0,jsx_runtime.jsxs)("p",{className:"font-medium",children:[listingData.map.latitude.toFixed(6),","," ",listingData.map.longitude.toFixed(6)]})]})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("p",{className:"text-sm text-gray-600",children:"Neighborhood"}),(0,jsx_runtime.jsx)("p",{className:"font-medium",children:null===(_listingData_address6=listingData.address)||void 0===_listingData_address6?void 0:_listingData_address6.neighborhood}),(0,jsx_runtime.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:"Major Intersection"}),(0,jsx_runtime.jsx)("p",{className:"font-medium",children:null===(_listingData_address7=listingData.address)||void 0===_listingData_address7?void 0:_listingData_address7.majorIntersection})]})]})]}),(0,jsx_runtime.jsxs)("div",{className:"bg-white p-4 rounded border",children:[(0,jsx_runtime.jsx)("h4",{className:"text-lg font-semibold mb-3",children:"Property Specifications"}),(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("p",{className:"text-sm text-gray-600",children:"Bedrooms"}),(0,jsx_runtime.jsxs)("p",{className:"font-medium",children:[null===(_listingData_details2=listingData.details)||void 0===_listingData_details2?void 0:_listingData_details2.numBedrooms," +"," ",null===(_listingData_details3=listingData.details)||void 0===_listingData_details3?void 0:_listingData_details3.numBedroomsPlus]})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("p",{className:"text-sm text-gray-600",children:"Bathrooms"}),(0,jsx_runtime.jsx)("p",{className:"font-medium",children:null===(_listingData_details4=listingData.details)||void 0===_listingData_details4?void 0:_listingData_details4.numBathrooms})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("p",{className:"text-sm text-gray-600",children:"Square Footage"}),(0,jsx_runtime.jsx)("p",{className:"font-medium",children:null===(_listingData_details5=listingData.details)||void 0===_listingData_details5?void 0:_listingData_details5.sqft})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("p",{className:"text-sm text-gray-600",children:"Garage Spaces"}),(0,jsx_runtime.jsx)("p",{className:"font-medium",children:null===(_listingData_details6=listingData.details)||void 0===_listingData_details6?void 0:_listingData_details6.numGarageSpaces})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("p",{className:"text-sm text-gray-600",children:"Year Built"}),(0,jsx_runtime.jsx)("p",{className:"font-medium",children:null===(_listingData_details7=listingData.details)||void 0===_listingData_details7?void 0:_listingData_details7.yearBuilt})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("p",{className:"text-sm text-gray-600",children:"Lot Size"}),(0,jsx_runtime.jsxs)("p",{className:"font-medium",children:[null===(_listingData_lot=listingData.lot)||void 0===_listingData_lot?void 0:_listingData_lot.width,"' x ",null===(_listingData_lot1=listingData.lot)||void 0===_listingData_lot1?void 0:_listingData_lot1.depth,"'"]})]})]})]}),(0,jsx_runtime.jsxs)("div",{className:"bg-white p-4 rounded border",children:[(0,jsx_runtime.jsx)("h4",{className:"text-lg font-semibold mb-3",children:"Key Features"}),(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[(0,jsx_runtime.jsxs)("li",{children:["Air Conditioning: ",null===(_listingData_details8=listingData.details)||void 0===_listingData_details8?void 0:_listingData_details8.airConditioning]}),(0,jsx_runtime.jsxs)("li",{children:["Heating: ",null===(_listingData_details9=listingData.details)||void 0===_listingData_details9?void 0:_listingData_details9.heating]}),(0,jsx_runtime.jsxs)("li",{children:["Basement: ",null===(_listingData_details10=listingData.details)||void 0===_listingData_details10?void 0:_listingData_details10.basement1]}),(0,jsx_runtime.jsxs)("li",{children:["Central Vacuum: ",null===(_listingData_details11=listingData.details)||void 0===_listingData_details11?void 0:_listingData_details11.centralVac]}),(0,jsx_runtime.jsxs)("li",{children:["Fireplaces: ",null===(_listingData_details12=listingData.details)||void 0===_listingData_details12?void 0:_listingData_details12.numFireplaces]})]})}),(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[(0,jsx_runtime.jsxs)("li",{children:["Garage Type: ",null===(_listingData_details13=listingData.details)||void 0===_listingData_details13?void 0:_listingData_details13.garage]}),(0,jsx_runtime.jsxs)("li",{children:["Exterior: ",null===(_listingData_details14=listingData.details)||void 0===_listingData_details14?void 0:_listingData_details14.exteriorConstruction1]}),(0,jsx_runtime.jsxs)("li",{children:["Foundation: ",null===(_listingData_details15=listingData.details)||void 0===_listingData_details15?void 0:_listingData_details15.foundationType]}),(0,jsx_runtime.jsxs)("li",{children:["Roof: ",null===(_listingData_details16=listingData.details)||void 0===_listingData_details16?void 0:_listingData_details16.roofMaterial]}),(0,jsx_runtime.jsxs)("li",{children:["Water Source: ",null===(_listingData_details17=listingData.details)||void 0===_listingData_details17?void 0:_listingData_details17.waterSource]})]})})]})]}),listingData.history&&listingData.history.length>0&&(0,jsx_runtime.jsxs)("div",{className:"bg-white p-4 rounded border",children:[(0,jsx_runtime.jsx)("h4",{className:"text-lg font-semibold mb-3",children:"Market History"}),(0,jsx_runtime.jsx)("div",{className:"space-y-6",children:listingData.history.map(((entry,index)=>(0,jsx_runtime.jsxs)("div",{className:"border rounded-lg p-4 bg-gray-50 hover:bg-gray-100 transition-colors",children:[(0,jsx_runtime.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsxs)("h5",{className:"font-semibold text-lg",children:["Sold"===entry.lastStatus?"Sold":"Listed"," on"," ",new Date(entry.listDate).toLocaleDateString()]}),(0,jsx_runtime.jsxs)("p",{className:"text-sm text-gray-600",children:["MLS #",entry.mlsNumber]})]}),(0,jsx_runtime.jsxs)("div",{className:"text-right",children:[(0,jsx_runtime.jsxs)("p",{className:"text-lg font-bold text-green-600",children:["$",entry.listPrice.toLocaleString()]}),"Sold"===entry.lastStatus&&entry.soldPrice&&(0,jsx_runtime.jsxs)("p",{className:"text-sm text-gray-600",children:["Sold for $",entry.soldPrice.toLocaleString()]})]})]}),(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("p",{className:"text-sm text-gray-600",children:"Status"}),(0,jsx_runtime.jsx)("p",{className:"font-medium",children:entry.lastStatus})]}),entry.dom&&(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("p",{className:"text-sm text-gray-600",children:"Days on Market"}),(0,jsx_runtime.jsx)("p",{className:"font-medium",children:entry.dom})]}),entry.soldDate&&(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("p",{className:"text-sm text-gray-600",children:"Sold Date"}),(0,jsx_runtime.jsx)("p",{className:"font-medium",children:new Date(entry.soldDate).toLocaleDateString()})]}),entry.originalPrice&&entry.originalPrice!==entry.listPrice&&(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("p",{className:"text-sm text-gray-600",children:"Original Price"}),(0,jsx_runtime.jsxs)("p",{className:"font-medium",children:["$",entry.originalPrice.toLocaleString()]})]})]}),entry.description&&(0,jsx_runtime.jsxs)("div",{className:"mt-4",children:[(0,jsx_runtime.jsx)("p",{className:"text-sm text-gray-600",children:"Description"}),(0,jsx_runtime.jsx)("p",{className:"text-sm mt-1",children:entry.description})]}),entry.latitude&&entry.longitude&&(0,jsx_runtime.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-4",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("p",{className:"text-sm text-gray-600",children:"Latitude"}),(0,jsx_runtime.jsx)("p",{className:"font-medium",children:entry.latitude})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("p",{className:"text-sm text-gray-600",children:"Longitude"}),(0,jsx_runtime.jsx)("p",{className:"font-medium",children:entry.longitude})]})]})]},index)))})]})]})]}):null}MLSReport.__docgenInfo={description:"",methods:[],displayName:"MLSReport",props:{listingData:{required:!0,tsType:{name:"any"},description:""}}};var unified_address_search=__webpack_require__("./src/components/unified-address-search/unified-address-search.tsx");const formSchema=lib.Ry({mlsNumber:lib.Z_().optional(),address:lib.Ry({streetNumber:lib.Z_(),streetName:lib.Z_(),streetSuffix:lib.Z_(),city:lib.Z_(),state:lib.Z_(),postalCode:lib.Z_(),country:lib.Z_()})}),initialValues={mlsNumber:"",address:{streetNumber:"",streetName:"",streetSuffix:"",city:"",state:"",postalCode:"",country:""}};function MarketInsights({by}){const[isLoading,setIsLoading]=react.useState(!1),[error,setError]=react.useState(null),[apiKey,setApiKey]=react.useState(""),[listingData,setListingData]=react.useState(null),[nearbyListings,setNearbyListings]=react.useState([]),[showNearbyListings,setShowNearbyListings]=react.useState(!1),[totalNearbyCount,setTotalNearbyCount]=react.useState(0),[recentListings,setRecentListings]=react.useState([]),[showRecentListings,setShowRecentListings]=react.useState(!1),[recentSoldListings,setRecentSoldListings]=react.useState([]),[showRecentSoldListings,setShowRecentSoldListings]=react.useState(!1),form=(0,index_esm.cI)({resolver:(0,zod.F)(formSchema),defaultValues:initialValues}),isWithinLastWeek=dateString=>{const listingDate=new Date(dateString),oneWeekAgo=new Date;return oneWeekAgo.setDate(oneWeekAgo.getDate()-7),listingDate>=oneWeekAgo},calculateDaysOnMarket=(listDate,soldDate)=>{const list=new Date(listDate),sold=new Date(soldDate),diffTime=Math.abs(sold.getTime()-list.getTime());return Math.ceil(diffTime/864e5)},handlePlaceSelect=react.useCallback((place=>{if(!place.address)return;const addressData={streetNumber:place.address.streetNumber||"",streetName:place.address.streetName||"",streetSuffix:place.address.streetSuffix||"",city:place.address.city||"",state:place.address.state||"",postalCode:place.address.postalCode||"",country:place.address.country||""};form.setValue("address.streetNumber",addressData.streetNumber),form.setValue("address.streetName",addressData.streetName),form.setValue("address.streetSuffix",addressData.streetSuffix),form.setValue("address.city",addressData.city),form.setValue("address.state",addressData.state),form.setValue("address.postalCode",addressData.postalCode),form.setValue("address.country",addressData.country),form.trigger()}),[form]);return(0,jsx_runtime.jsx)(ui_form.l0,{...form,children:(0,jsx_runtime.jsxs)("form",{onSubmit:form.handleSubmit((async data=>{try{var _listingData_map,_listingData_map1;let response;if(setIsLoading(!0),setError(null),setNearbyListings([]),setShowNearbyListings(!1),setTotalNearbyCount(0),setRecentListings([]),setShowRecentListings(!1),setRecentSoldListings([]),setShowRecentSoldListings(!1),"mls#"===by)response=await fetch(`https://api.repliers.io/listings/${data.mlsNumber}`,{headers:{"REPLIERS-API-KEY":apiKey,"Content-Type":"application/json"}});else{const url=`https://api.repliers.io/listings?${new URLSearchParams({city:data.address.city,streetNumber:data.address.streetNumber,streetName:data.address.streetName}).toString()}&status=A&status=U`;response=await fetch(url,{headers:{"REPLIERS-API-KEY":apiKey,"Content-Type":"application/json"}})}if(!response.ok)throw new Error(`API request failed with status ${response.status}`);const responseData=await response.json();let listingData;if("mls#"===by)listingData=responseData;else{var _responseData_listings;if(!(null===(_responseData_listings=responseData.listings)||void 0===_responseData_listings?void 0:_responseData_listings[0]))throw new Error("No listing found with the provided information");listingData=responseData.listings[0]}if(!listingData||!listingData.listPrice)throw new Error("No listing found with the provided information");setListingData(listingData),(null==listingData||null===(_listingData_map=listingData.map)||void 0===_listingData_map?void 0:_listingData_map.latitude)&&(null==listingData||null===(_listingData_map1=listingData.map)||void 0===_listingData_map1?void 0:_listingData_map1.longitude)&&await(async(lat,long)=>{try{const activeResponse=await fetch(`https://api.repliers.io/listings?lat=${lat}&long=${long}&radius=2&status=A&limit=100`,{headers:{"REPLIERS-API-KEY":apiKey,"Content-Type":"application/json"}});if(!activeResponse.ok)throw new Error(`API request failed with status ${activeResponse.status}`);const activeData=await activeResponse.json(),listings=activeData.listings||[];setNearbyListings(listings),setTotalNearbyCount(activeData.count||0);const recent=listings.filter((listing=>!!listing.listDate&&isWithinLastWeek(listing.listDate)));setRecentListings(recent);const soldResponse=await fetch(`https://api.repliers.io/listings?lat=${lat}&long=${long}&radius=2&status=U`,{headers:{"REPLIERS-API-KEY":apiKey,"Content-Type":"application/json"}});if(!soldResponse.ok)throw new Error(`API request failed with status ${soldResponse.status}`);const recentSold=((await soldResponse.json()).listings||[]).filter((listing=>listing.soldDate&&isWithinLastWeek(listing.soldDate)));setRecentSoldListings(recentSold)}catch(err){}})(listingData.map.latitude,listingData.map.longitude)}catch(err){setError(err instanceof Error?err.message:"An error occurred")}finally{setIsLoading(!1)}})),className:"space-y-8",children:[(0,jsx_runtime.jsx)(api_input.T,{onApiKeyChange:setApiKey,isEstimates:!1}),(0,jsx_runtime.jsxs)("div",{className:"space-y-4",children:[(0,jsx_runtime.jsx)("h2",{className:"text-lg font-semibold",children:"Property Information"}),(0,jsx_runtime.jsx)("div",{className:"grid grid-cols-1 gap-4",children:"mls#"===by?(0,jsx_runtime.jsx)(ui_form.Wi,{control:form.control,name:"mlsNumber",render:({field})=>(0,jsx_runtime.jsxs)(ui_form.xJ,{children:[(0,jsx_runtime.jsx)(ui_form.lX,{children:"MLS Number"}),(0,jsx_runtime.jsx)(ui_form.NI,{children:(0,jsx_runtime.jsx)(input.I,{...field,placeholder:"Enter MLS number"})}),(0,jsx_runtime.jsx)(ui_form.zG,{})]})}):(0,jsx_runtime.jsx)(ui_form.Wi,{control:form.control,name:"address",render:()=>(0,jsx_runtime.jsxs)(ui_form.xJ,{children:[(0,jsx_runtime.jsx)(ui_form.lX,{children:"Property Address"}),(0,jsx_runtime.jsx)(ui_form.NI,{children:(0,jsx_runtime.jsx)(unified_address_search.i,{onPlaceSelect:handlePlaceSelect,displayAddressComponents:!1,placeholder:"Enter property address...",disabled:isLoading})}),(0,jsx_runtime.jsx)(ui_form.zG,{})]})})})]}),(0,jsx_runtime.jsxs)("div",{className:"space-y-4",children:[(0,jsx_runtime.jsx)(ui_button.z,{type:"submit",disabled:isLoading,className:"w-full",children:isLoading?"Loading...":"Search"}),error&&(0,jsx_runtime.jsxs)("div",{className:"p-4 text-sm text-red-500 bg-red-50 rounded-md border border-red-200",children:[(0,jsx_runtime.jsx)("h3",{className:"font-semibold mb-2",children:"Error"}),error]}),listingData&&(0,jsx_runtime.jsx)(MLSReport,{listingData}),recentSoldListings.length>0&&!showRecentSoldListings&&(0,jsx_runtime.jsxs)("div",{className:"p-4 bg-purple-50 rounded-md border border-purple-200",children:[(0,jsx_runtime.jsxs)("p",{className:"text-sm text-purple-700 mb-2",children:["Found ",recentSoldListings.length," properties sold in the last 7 days within 2km radius",recentSoldListings.length>0&&(0,jsx_runtime.jsxs)("span",{className:"block mt-1",children:["(",recentSoldListings.filter((l=>"Sale"===l.type)).length," ","Sales,"," ",recentSoldListings.filter((l=>"Lease"===l.type)).length," ","Leases shown)"]})]}),(0,jsx_runtime.jsx)(ui_button.z,{variant:"outline",size:"sm",onClick:()=>setShowRecentSoldListings(!0),className:"text-purple-700 hover:text-purple-800",children:"Show Recent Sales"})]}),showRecentSoldListings&&recentSoldListings.length>0&&(0,jsx_runtime.jsxs)("div",{className:"p-4 bg-white rounded-md border",children:[(0,jsx_runtime.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h3",{className:"font-semibold",children:"Recent Sales (Last 7 Days)"}),(0,jsx_runtime.jsx)("p",{className:"text-sm text-gray-500",children:"Within 2km radius of the property"})]}),(0,jsx_runtime.jsx)(ui_button.z,{variant:"ghost",size:"sm",onClick:()=>setShowRecentSoldListings(!1),children:"Hide"})]}),(0,jsx_runtime.jsx)("div",{className:"space-y-2",children:recentSoldListings.map(((listing,index)=>(0,jsx_runtime.jsxs)("div",{className:"p-3 rounded-md hover:bg-gray-100 "+("Lease"===listing.type?"bg-purple-50":"bg-gray-50"),children:[(0,jsx_runtime.jsxs)("div",{className:"flex justify-between items-start",children:[(0,jsx_runtime.jsxs)("p",{className:"font-medium",children:[listing.address.streetNumber," ",listing.address.streetName," ",listing.address.streetSuffix]}),(0,jsx_runtime.jsx)("span",{className:"text-sm px-2 py-1 rounded "+("Lease"===listing.type?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"),children:listing.type})]}),(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-3 gap-4 mt-2",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("p",{className:"text-sm text-gray-600",children:"List Price"}),(0,jsx_runtime.jsxs)("p",{className:"font-medium text-gray-700",children:["$",listing.listPrice.toLocaleString()]})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("p",{className:"text-sm text-gray-600",children:"Sold Price"}),(0,jsx_runtime.jsxs)("p",{className:"font-medium text-green-600",children:["$",listing.soldPrice.toLocaleString()]})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("p",{className:"text-sm text-gray-600",children:"Days on Market"}),(0,jsx_runtime.jsxs)("p",{className:"font-medium text-gray-700",children:[calculateDaysOnMarket(listing.listDate,listing.soldDate)," ","days"]})]})]}),(0,jsx_runtime.jsxs)("div",{className:"mt-2 text-sm text-gray-500",children:["Sold: ",new Date(listing.soldDate).toLocaleDateString()]})]},index)))})]}),recentListings.length>0&&!showRecentListings&&(0,jsx_runtime.jsxs)("div",{className:"p-4 bg-green-50 rounded-md border border-green-200",children:[(0,jsx_runtime.jsxs)("p",{className:"text-sm text-green-700 mb-2",children:["Found ",recentListings.length," new listings in the last 7 days within 2km radius",recentListings.length>0&&(0,jsx_runtime.jsxs)("span",{className:"block mt-1",children:["(",recentListings.filter((l=>"Sale"===l.type)).length," ","Sales,"," ",recentListings.filter((l=>"Lease"===l.type)).length," ","Leases shown)"]})]}),(0,jsx_runtime.jsx)(ui_button.z,{variant:"outline",size:"sm",onClick:()=>setShowRecentListings(!0),className:"text-green-700 hover:text-green-800",children:"Show Recent Listings"})]}),showRecentListings&&recentListings.length>0&&(0,jsx_runtime.jsxs)("div",{className:"p-4 bg-white rounded-md border",children:[(0,jsx_runtime.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h3",{className:"font-semibold",children:"Recent Listings (Last 7 Days)"}),(0,jsx_runtime.jsx)("p",{className:"text-sm text-gray-500",children:"Within 2km radius of the property"})]}),(0,jsx_runtime.jsx)(ui_button.z,{variant:"ghost",size:"sm",onClick:()=>setShowRecentListings(!1),children:"Hide"})]}),(0,jsx_runtime.jsx)("div",{className:"space-y-2",children:recentListings.map(((listing,index)=>(0,jsx_runtime.jsxs)("div",{className:"p-3 rounded-md hover:bg-gray-100 "+("Lease"===listing.type?"bg-purple-50":"bg-gray-50"),children:[(0,jsx_runtime.jsxs)("div",{className:"flex justify-between items-start",children:[(0,jsx_runtime.jsxs)("p",{className:"font-medium",children:[listing.address.streetNumber," ",listing.address.streetName," ",listing.address.streetSuffix]}),(0,jsx_runtime.jsx)("span",{className:"text-sm px-2 py-1 rounded "+("Lease"===listing.type?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"),children:listing.type})]}),(0,jsx_runtime.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,jsx_runtime.jsxs)("p",{className:"text-sm text-gray-600",children:["$",listing.listPrice.toLocaleString()]}),(0,jsx_runtime.jsxs)("p",{className:"text-sm text-gray-500",children:["Listed:"," ",new Date(listing.listDate).toLocaleDateString()]})]})]},index)))})]}),nearbyListings.length>0&&!showNearbyListings&&(0,jsx_runtime.jsxs)("div",{className:"p-4 bg-blue-50 rounded-md border border-blue-200",children:[(0,jsx_runtime.jsxs)("p",{className:"text-sm text-blue-700 mb-2",children:["Found ",totalNearbyCount," active listings within 2km radius"]}),(0,jsx_runtime.jsx)(ui_button.z,{variant:"outline",size:"sm",onClick:()=>setShowNearbyListings(!0),className:"text-blue-700 hover:text-blue-800",children:"Show Nearby Listings"})]}),showNearbyListings&&nearbyListings.length>0&&(0,jsx_runtime.jsxs)("div",{className:"p-4 bg-white rounded-md border",children:[(0,jsx_runtime.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h3",{className:"font-semibold",children:"Nearby Active Listings"}),(0,jsx_runtime.jsx)("p",{className:"text-sm text-gray-500",children:"All active listings within 2km radius"})]}),(0,jsx_runtime.jsx)(ui_button.z,{variant:"ghost",size:"sm",onClick:()=>setShowNearbyListings(!1),children:"Hide"})]}),(0,jsx_runtime.jsx)("div",{className:"space-y-2",children:nearbyListings.map(((listing,index)=>(0,jsx_runtime.jsxs)("div",{className:"p-3 rounded-md hover:bg-gray-100 "+("Lease"===listing.type?"bg-purple-50":"bg-gray-50"),children:[(0,jsx_runtime.jsxs)("div",{className:"flex justify-between items-start",children:[(0,jsx_runtime.jsxs)("p",{className:"font-medium",children:[listing.address.streetNumber," ",listing.address.streetName," ",listing.address.streetSuffix]}),(0,jsx_runtime.jsx)("span",{className:"text-sm px-2 py-1 rounded "+("Lease"===listing.type?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"),children:listing.type})]}),(0,jsx_runtime.jsxs)("p",{className:"text-sm text-gray-600",children:["$",listing.listPrice.toLocaleString()]})]},index)))})]})]})]})})}MarketInsights.__docgenInfo={description:"",methods:[],displayName:"MarketInsights",props:{by:{required:!0,tsType:{name:"union",raw:'"mls#" | "address"',elements:[{name:"literal",value:'"mls#"'},{name:"literal",value:'"address"'}]},description:""}}};const market_insights_stories={title:"POCS/Reports/Market Insights Report",component:MarketInsights,parameters:{layout:"centered"},tags:["autodocs"]},MarketInsightsByMLS={args:{by:"mls#"}},MarketInsightsByAddress={args:{by:"address"}},__namedExportsOrder=["MarketInsightsByMLS","MarketInsightsByAddress"];MarketInsightsByMLS.parameters={...MarketInsightsByMLS.parameters,docs:{...MarketInsightsByMLS.parameters?.docs,source:{originalSource:'{\n  args: {\n    by: "mls#"\n  }\n}',...MarketInsightsByMLS.parameters?.docs?.source}}},MarketInsightsByAddress.parameters={...MarketInsightsByAddress.parameters,docs:{...MarketInsightsByAddress.parameters?.docs,source:{originalSource:'{\n  args: {\n    by: "address"\n  }\n}',...MarketInsightsByAddress.parameters?.docs?.source}}}}}]);