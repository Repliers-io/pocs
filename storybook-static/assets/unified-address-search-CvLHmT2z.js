import{j as e}from"./jsx-runtime-CBjAUaf4.js";import{r as l}from"./index-CoAThXCU.js";const b="AIzaSyBqlRCVfRWu5PagapW3CsV1VVba9fIdknA";function w({onPlaceSelect:f,placeholder:g="Enter an address...",className:j,disabled:x=!1,displayAddressComponents:N=!1}){const i=l.useRef(null),y=l.useRef(null),[v,_]=l.useState(!1),[p,h]=l.useState(!1),[a,S]=l.useState(null);return l.useEffect(()=>((async()=>{var t,r;if((r=(t=window.google)==null?void 0:t.maps)!=null&&r.places){h(!0);return}try{const s=document.createElement("script");s.src=`https://maps.googleapis.com/maps/api/js?key=${b}&libraries=places&loading=async&v=weekly`,s.async=!0,s.defer=!0;const m=new Promise((u,o)=>{s.onload=()=>{setTimeout(()=>u(),100)},s.onerror=()=>{o(new Error("Failed to load Google Maps API"))}});document.head.appendChild(s),await m,h(!0)}catch(s){console.error("Error loading Google Maps API:",s)}})(),()=>{const t=document.querySelector('script[src*="maps.googleapis.com"]');t&&document.head.removeChild(t)}),[]),l.useEffect(()=>{if(!(!p||!i.current||y.current))try{const d=document.createElement("input");d.type="text",d.placeholder=g,d.className="w-full px-3 py-2 border rounded-md",d.disabled=x;const t=new window.google.maps.places.Autocomplete(d,{types:["address"],fields:["address_components","formatted_address","place_id","geometry"]});return i.current&&(i.current.innerHTML="",i.current.appendChild(d),y.current=t),t.addListener("place_changed",()=>{const r=t.getPlace();if(!r.address_components)return;const s={city:"",streetNumber:"",streetName:"",streetSuffix:"",state:"",postalCode:"",country:""};r.address_components.forEach(u=>{const o=u.types,n=u.long_name;if(o.includes("street_number"))s.streetNumber=n;else if(o.includes("route")){const c=n.split(" ");if(c.length>1){const A=c[c.length-1].toLowerCase();["street","st","avenue","ave","road","rd","boulevard","blvd","lane","ln","drive","dr","court","ct","circle","cir","way","place","pl","terrace","ter","trail","trl","parkway","pkwy"].includes(A)?(s.streetSuffix=c.pop()||"",s.streetName=c.join(" ")):s.streetName=n}else s.streetName=n}else o.includes("locality")?s.city=n:o.includes("administrative_area_level_1")?s.state=n:o.includes("postal_code")?s.postalCode=n:o.includes("country")&&(s.country=n)});const m={address:s,formattedAddress:r.formatted_address||"",placeId:r.place_id||"",geometry:r.geometry?{lat:r.geometry.location.lat(),lng:r.geometry.location.lng()}:void 0};S(m),f(m)}),()=>{t&&window.google.maps.event.clearInstanceListeners(t)}}catch(d){console.error("Error initializing autocomplete:",d)}},[p,f,g,x]),e.jsx("div",{className:j,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"address-search",className:"text-sm font-medium",children:"Search Address"}),e.jsxs("div",{className:"min-w-[400px] w-auto",children:[e.jsx("div",{ref:i,children:!p&&e.jsx("div",{className:"text-muted-foreground",children:"Loading..."})}),v&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-900"})})]})]}),N&&a&&e.jsxs("div",{className:"mt-4 p-4 border rounded-lg bg-gray-50",children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:"Address Components"}),e.jsxs("dl",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsx("dt",{className:"font-medium text-gray-600",children:"Street Number:"}),e.jsx("dd",{children:a.address.streetNumber}),e.jsx("dt",{className:"font-medium text-gray-600",children:"Street Name:"}),e.jsx("dd",{children:a.address.streetName}),e.jsx("dt",{className:"font-medium text-gray-600",children:"Street Suffix:"}),e.jsx("dd",{children:a.address.streetSuffix}),e.jsx("dt",{className:"font-medium text-gray-600",children:"City:"}),e.jsx("dd",{children:a.address.city}),e.jsx("dt",{className:"font-medium text-gray-600",children:"State:"}),e.jsx("dd",{children:a.address.state}),e.jsx("dt",{className:"font-medium text-gray-600",children:"Postal Code:"}),e.jsx("dd",{children:a.address.postalCode}),e.jsx("dt",{className:"font-medium text-gray-600",children:"Country:"}),e.jsx("dd",{children:a.address.country}),e.jsx("dt",{className:"font-medium text-gray-600",children:"Formatted Address:"}),e.jsx("dd",{className:"col-span-2",children:a.formattedAddress})]})]})]})})}w.__docgenInfo={description:`UnifiedAddressSearch Component

@description Address autocomplete component using Google Places API
@param props - The component props
@returns JSX.Element`,methods:[],displayName:"UnifiedAddressSearch",props:{onPlaceSelect:{required:!0,tsType:{name:"signature",type:"function",raw:"(place: PlaceDetails) => void",signature:{arguments:[{type:{name:"PlaceDetails"},name:"place"}],return:{name:"void"}}},description:""},placeholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"Enter an address..."',computed:!1}},className:{required:!1,tsType:{name:"string"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},displayAddressComponents:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};export{w as U};
