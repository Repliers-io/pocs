"use strict";(self.webpackChunkpocs=self.webpackChunkpocs||[]).push([[983],{"./src/components/api-input/api-input.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{T:()=>ApiInput});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),_components_ui_input__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/ui/input.tsx"),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_components_ui_button__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/ui/button.tsx"),_barrel_optimize_names_Eye_EyeOff_lucide_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/eye-off.js"),_barrel_optimize_names_Eye_EyeOff_lucide_react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/eye.js"),_lib_api_keys_context__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/lib/api-keys-context.tsx"),console=__webpack_require__("./node_modules/console-browserify/index.js");function ApiInput({onApiKeyChange,className,isEstimates}){const{repliersApiKey,setRepliersApiKey}=(0,_lib_api_keys_context__WEBPACK_IMPORTED_MODULE_4__.nB)(),[showApiKey,setShowApiKey]=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(!1),[isValidating,setIsValidating]=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(!1),[validationError,setValidationError]=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);(0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)((()=>{onApiKeyChange(repliersApiKey)}),[repliersApiKey,onApiKeyChange]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:`flex flex-col gap-2 ${className}`,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label",{htmlFor:"api-key",className:"text-sm font-medium",children:"Repliers API Key"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_input__WEBPACK_IMPORTED_MODULE_1__.I,{id:"api-key",type:showApiKey?"text":"password",placeholder:"Enter your API key...",className:"max-w-[300px]",value:repliersApiKey,onChange:e=>{const newValue=e.target.value;setRepliersApiKey(newValue),onApiKeyChange(newValue),validationError&&setValidationError(null);const timeoutId=setTimeout((()=>{(async key=>{if(key){setIsValidating(!0),setValidationError(null);try{const endpoint=isEstimates?"https://api.repliers.io/estimates":"https://api.repliers.io/listings?area=toronto",response=await fetch(endpoint,{method:"HEAD",headers:{"REPLIERS-API-KEY":key,Accept:"application/json"}});401===response.status?setValidationError("Invalid API key. Please check your key and try again."):403===response.status?setValidationError(isEstimates?"Your API key doesn't have access to the estimates feature. Please upgrade your plan or contact Repliers support to request a trial.":"Your API key doesn't have access to the listings feature. Please upgrade your plan or contact Repliers support to request a trial."):response.ok||setValidationError("Failed to validate API key. Please try again.")}catch(error){console.error("API Error:",error),setValidationError("Failed to validate API key. Please try again.")}finally{setIsValidating(!1)}}})(newValue)}),500);return()=>clearTimeout(timeoutId)},required:!0}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_button__WEBPACK_IMPORTED_MODULE_3__.z,{type:"button",variant:"ghost",size:"icon",onClick:()=>setShowApiKey(!showApiKey),className:"h-10 w-10",children:showApiKey?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_Eye_EyeOff_lucide_react__WEBPACK_IMPORTED_MODULE_5__.Z,{className:"h-4 w-4"}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_Eye_EyeOff_lucide_react__WEBPACK_IMPORTED_MODULE_6__.Z,{className:"h-4 w-4"})})]}),isValidating&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-sm text-gray-500",children:"Validating API key..."}),validationError&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-sm text-red-500",children:validationError}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{className:"text-sm text-gray-500",children:["Don't have a Repliers API key?"," ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("a",{href:"https://repliers.com/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline",children:"Get one here"})]})]})}ApiInput.__docgenInfo={description:"",methods:[],displayName:"ApiInput",props:{onApiKeyChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(apiKey: string) => void",signature:{arguments:[{type:{name:"string"},name:"apiKey"}],return:{name:"void"}}},description:""},className:{required:!1,tsType:{name:"string"},description:""},isEstimates:{required:!1,tsType:{name:"boolean"},description:""}}}},"./src/components/listings/listing-by-address/listing-by-address.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{C:()=>ListingByAddress});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_components_api_input_api_input__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/api-input/api-input.tsx"),_components_unified_address_search_unified_address_search__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/unified-address-search/unified-address-search.tsx"),console=__webpack_require__("./node_modules/console-browserify/index.js");function ListingByAddress({className,onListingSelected,showDetails=!0}){const[selectedAddress,setSelectedAddress]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null),[propertyListings,setPropertyListings]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),[selectedListing,setSelectedListing]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null),[isLoading,setIsLoading]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),[error,setError]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null),[apiKey,setApiKey]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(""),[selectedImage,setSelectedImage]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null),[showOnlyRecent,setShowOnlyRecent]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!0),[allListings,setAllListings]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),validFieldCount=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)((()=>selectedListing?Object.entries(selectedListing).filter((([,value])=>null!=value)).length:0),[selectedListing]);(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{if(allListings.length>0){const recentListings=allListings.filter(isRecentListing);setPropertyListings(showOnlyRecent?recentListings:allListings)}}),[showOnlyRecent,allListings]);const formatPrice=price=>`$${price.toLocaleString()}`,formatAddress=address=>{if("string"==typeof address)return address;if("object"==typeof address&&null!==address){const parts=[];return address.streetNumber&&parts.push(address.streetNumber),address.streetName&&parts.push(address.streetName),address.streetSuffix&&parts.push(address.streetSuffix),address.city&&parts.push(address.city),address.state&&parts.push(address.state),(address.zip||address.postalCode)&&parts.push(address.zip||address.postalCode),parts.length>0?parts.join(" "):"Address not available"}return"Address not available"},isRecentListing=listing=>{const threeMonthsAgo=new Date;threeMonthsAgo.setMonth(threeMonthsAgo.getMonth()-3);const relevantDate=listing.listDate||listing.soldDate;if(!relevantDate)return!1;try{return new Date(relevantDate)>=threeMonthsAgo}catch(e){return!1}},formatTimestamp=timestamp=>{if(!timestamp)return"Not available";try{let date;if("number"==typeof timestamp)date=timestamp>1e12?new Date(timestamp):new Date(1e3*timestamp);else{if("string"!=typeof timestamp)return String(timestamp);date=new Date(timestamp)}return isNaN(date.getTime())?String(timestamp):date.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",timeZoneName:"short"})}catch(error){return String(timestamp)}};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-6",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_api_input_api_input__WEBPACK_IMPORTED_MODULE_2__.T,{onApiKeyChange:setApiKey,isEstimates:!1}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_unified_address_search_unified_address_search__WEBPACK_IMPORTED_MODULE_3__.i,{onPlaceSelect:async place=>{if(setSelectedAddress(place),setPropertyListings([]),setAllListings([]),setSelectedListing(null),setShowOnlyRecent(!0),setError(null),apiKey.trim()){setIsLoading(!0);try{console.log("🚀 Starting property listing search...");const listings=await(async(address,apiKey)=>{const params=new URLSearchParams({streetName:address.streetName,streetNumber:address.streetNumber,city:address.city});params.append("status","A"),params.append("status","U");const url=`https://api.repliers.io/listings?${params}`;console.log("🔍 Making API request to:",url),console.log("📍 Address components:",address),console.log("🔑 API Key (first 10 chars):",apiKey.substring(0,10)+"...");const response=await fetch(url,{headers:{"REPLIERS-API-KEY":apiKey}});if(console.log("📡 Response status:",response.status,response.statusText),!response.ok){const errorText=await response.text();throw console.error("❌ API Error Response:",errorText),new Error(`API request failed: ${response.status} ${response.statusText} - ${errorText}`)}const data=await response.json();console.log("📦 API Response data:",data),console.log("📊 Data type:",typeof data,"Is array:",Array.isArray(data)),console.log("🔍 Response properties:",Object.keys(data)),console.log("🔍 Full response structure:",JSON.stringify(data,null,2));let listings=[];if(data.data&&Array.isArray(data.data))listings=data.data;else if(data.results&&Array.isArray(data.results))listings=data.results;else if(data.listings&&Array.isArray(data.listings))listings=data.listings;else if(data.items&&Array.isArray(data.items))listings=data.items;else if(data.properties&&Array.isArray(data.properties))listings=data.properties;else if(Array.isArray(data))listings=data;else if(data.count>0)for(const key of Object.keys(data))if("object"==typeof data[key]&&null!==data[key]&&!["apiVersion","page","numPages","pageSize","count"].includes(key)){if(console.log(`🎯 Trying property '${key}' as potential listing data:`,data[key]),Array.isArray(data[key])){listings=data[key];break}listings=[data[key]];break}return console.log("📋 Extracted listings:",listings),console.log("📋 Listings array length:",listings.length),(!listings||0===listings.length)&&data.count>0?(console.warn("⚠️ API reports",data.count,"listings but we couldn't extract them!"),console.warn("⚠️ Available properties:",Object.keys(data)),console.warn("🚨 Last resort: treating entire response as single listing"),[data]):listings})(place.address,apiKey);if(console.log("✅ Got listings response:",listings),console.log("📝 Listings count:",(null==listings?void 0:listings.length)||0),!listings||0===listings.length)return console.log("⚠️ No listings found"),setError("No property listings found for this address."),setPropertyListings([]),void setAllListings([]);console.log("📋 All listings found:",listings),setAllListings(listings);const recentListings=listings.filter(isRecentListing);console.log("📋 Recent listings (last 3 months):",recentListings),setPropertyListings(showOnlyRecent?recentListings:listings)}catch(err){console.error("💥 Error in handleAddressSelect:",err),setError(err instanceof Error?err.message:"Failed to fetch property listing. Please try again."),setPropertyListings([]),setAllListings([])}finally{setIsLoading(!1)}}else setError("API key is required to search for property listings.")},placeholder:"Enter the property address...",className:"w-full"}),isLoading&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"text-center py-8",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"mt-2 text-gray-600",children:"Searching for property listing..."})]}),allListings.length>0&&!isLoading&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(()=>{const recentListings=allListings.filter(isRecentListing),hasRecentListings=recentListings.length>0;return allListings.length>0&&0===recentListings.length?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"font-medium text-blue-900",children:"No Recent Listings Found"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-sm text-blue-700 mb-3",children:"No listings were found from the last 3 months. All available listings are older than 3 months."}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("button",{onClick:()=>setShowOnlyRecent(!1),className:"text-sm bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:["Show All Listings (",allListings.length,")"]})]}):showOnlyRecent&&hasRecentListings?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"font-medium text-blue-900",children:"Recent Listings"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{className:"text-sm text-blue-700 mb-3",children:["Showing ",recentListings.length," listing",1!==recentListings.length?"s":""," from the last 3 months.",allListings.length>recentListings.length&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",{children:[" ",allListings.length-recentListings.length," older listing",allListings.length-recentListings.length!==1?"s":""," ","available."]})]}),allListings.length>recentListings.length&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("button",{onClick:()=>setShowOnlyRecent(!1),className:"text-sm bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:["Show All Listings (",allListings.length,")"]})]}):showOnlyRecent?null:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"font-medium text-blue-900",children:"All Listings"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{className:"text-sm text-blue-700 mb-3",children:["Showing all ",allListings.length," listing",1!==allListings.length?"s":""," (including older listings).",hasRecentListings&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",{children:[" ",recentListings.length," from the last 3 months."]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("button",{onClick:()=>setShowOnlyRecent(!0),className:"text-sm bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:["Show Only Recent Listings (",recentListings.length,")"]})]})})()}),propertyListings.length>0&&!isLoading&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h3",{className:"text-lg font-semibold mb-2",children:1===propertyListings.length?"Property Listing Found":`Multiple Listings Found (${propertyListings.length})`}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:1===propertyListings.length?"Click to select this property listing:":"Please select the correct property listing:"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"space-y-2",children:propertyListings.map(((listing,index)=>{var _listing_details,_listing_details1,_listing_details2,_listing_details3,_listing_details4,_listing_details5,_listing_details6,_listing_details7,_listing_details8;const isSelected=(null==selectedListing?void 0:selectedListing.id)===listing.id;return console.log(`Listing ${index} (${listing.id}): isSelected = ${isSelected}, selectedListing.id = ${null==selectedListing?void 0:selectedListing.id}`),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"border border-gray-200 rounded-lg p-3 cursor-pointer transition-all duration-200 bg-white "+(isSelected?"ring-2 ring-green-200":"hover:border-green-400"),onClick:()=>(listing=>{setSelectedListing(listing),null==onListingSelected||onListingSelected(listing),setError(null),setTimeout((()=>{const selectedPropertySection=document.querySelector("#selected-property-section");selectedPropertySection&&selectedPropertySection.scrollIntoView({behavior:"smooth",block:"start"})}),100)})(listing),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"flex items-start justify-between",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h4",{className:"font-medium text-gray-900 text-sm leading-tight",children:formatAddress(listing.address)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center gap-2 ml-3",children:[listing.status&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full "+("A"===listing.status?"bg-green-100 text-green-700":"U"===listing.status?"bg-gray-100 text-gray-700":"bg-blue-100 text-blue-700"),children:"A"===listing.status?"Available":"U"===listing.status?"Sold":listing.status}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"w-3 h-3 rounded-full border-2 transition-all "+((null==selectedListing?void 0:selectedListing.id)===listing.id?"border-green-500 bg-green-500":"border-gray-300"),children:(null==selectedListing?void 0:selectedListing.id)===listing.id&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"w-1 h-1 bg-white rounded-full mx-auto mt-0.5"})})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center gap-4",children:[listing.listPrice&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"font-semibold text-gray-900",children:formatPrice(listing.listPrice)}),listing.soldPrice&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",{className:"font-semibold text-green-600",children:["Sold: ",formatPrice(listing.soldPrice)]})]}),listing.type&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-xs text-gray-500 capitalize",children:listing.type})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center gap-3",children:[((null===(_listing_details=listing.details)||void 0===_listing_details?void 0:_listing_details.numBedrooms)||listing.beds)&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",{children:[(null===(_listing_details1=listing.details)||void 0===_listing_details1?void 0:_listing_details1.numBedrooms)||listing.beds," ","bed"]}),((null===(_listing_details2=listing.details)||void 0===_listing_details2?void 0:_listing_details2.numBathrooms)||listing.baths)&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",{children:[(null===(_listing_details3=listing.details)||void 0===_listing_details3?void 0:_listing_details3.numBathrooms)||listing.baths," ","bath"]}),((null===(_listing_details4=listing.details)||void 0===_listing_details4?void 0:_listing_details4.sqft)||listing.sqft)&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",{children:[((null===(_listing_details5=listing.details)||void 0===_listing_details5?void 0:_listing_details5.sqft)||listing.sqft).toLocaleString()," ","sqft"]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"text-right",children:(listing.listDate||listing.soldDate)&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-gray-500",children:listing.listDate?"Listed: ":"Sold: "}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"font-medium",children:(dateString=listing.listDate||listing.soldDate,new Date(dateString).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}))})]})})]}),((null===(_listing_details6=listing.details)||void 0===_listing_details6?void 0:_listing_details6.propertyType)||listing.propertyType||listing.mlsNumber)&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[((null===(_listing_details7=listing.details)||void 0===_listing_details7?void 0:_listing_details7.propertyType)||listing.propertyType)&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{children:(null===(_listing_details8=listing.details)||void 0===_listing_details8?void 0:_listing_details8.propertyType)||listing.propertyType}),listing.mlsNumber&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",{children:["MLS# ",listing.mlsNumber]})]})]})]})})},listing.id||index);var dateString}))})]}),selectedListing&&showDetails&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6 bg-white shadow-sm",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Selected Property"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-sm text-gray-500",children:formatAddress(selectedListing.address)})]}),selectedListing.status&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"px-3 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:selectedListing.status})]}),selectedImage&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",onClick:()=>setSelectedImage(null),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"relative max-w-4xl max-h-full",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("img",{src:selectedImage,alt:"Property photo large view",className:"max-w-full max-h-full object-contain rounded-lg"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{onClick:()=>setSelectedImage(null),className:"absolute top-4 right-4 bg-white bg-opacity-90 hover:bg-opacity-100 rounded-full p-2 transition-all",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg",{className:"w-6 h-6 text-gray-800",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"absolute bottom-4 left-4 bg-black bg-opacity-60 text-white px-3 py-1 rounded text-sm",children:"Click anywhere to close"})]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-6",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("details",{className:"group",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("summary",{className:"cursor-pointer text-sm font-medium text-gray-700 hover:text-gray-900",children:["🔍 Complete Property Information (Click to expand) -"," ",validFieldCount," fields"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(selectedListing).map((([key,value])=>{if(null==value)return null;let displayValue;if("object"==typeof value)if("address"===key)displayValue=formatAddress(value);else if(Array.isArray(value))if(console.log("🔍 Array detected:",key,"Length:",value.length,"First item type:",typeof value[0]),"bathrooms"===key.toLowerCase()||key.toLowerCase().includes("bathroom")&&"numbathrooms"!==key.toLowerCase()&&"numbathroomsplus"!==key.toLowerCase()&&"numbathroomshalf"!==key.toLowerCase()||key.toLowerCase().includes("bath")&&"numbathrooms"!==key.toLowerCase()&&"numbathroomsplus"!==key.toLowerCase()&&"numbathroomshalf"!==key.toLowerCase()){console.log("🛁 TOP-LEVEL Bathroom array detected:",key,"Length:",value.length,"First item:",value[0]);displayValue=value.map(((bathObj,index)=>{if(console.log(`🛁 TOP-LEVEL Processing bathroom ${index+1}:`,bathObj,"Type:",typeof bathObj),"object"==typeof bathObj&&null!==bathObj){const bath=bathObj,parts=[];if(console.log(`🛁 TOP-LEVEL Bathroom ${index+1} properties:`,Object.keys(bath)),(bath.type||bath.bathroom_type||bath.bathroomType)&&parts.push(bath.type||bath.bathroom_type||bath.bathroomType),(bath.location||bath.floor||bath.room||bath.area)&&parts.push(`(${bath.location||bath.floor||bath.room||bath.area})`),(bath.size||bath.dimensions||bath.sqft)&&parts.push(bath.size||bath.dimensions||bath.sqft),bath.features||bath.amenities||bath.fixtures){const featureList=bath.features||bath.amenities||bath.fixtures;Array.isArray(featureList)?parts.push(`Features: ${featureList.join(", ")}`):featureList&&parts.push(`Features: ${featureList}`)}if(bath.description&&parts.push(bath.description),0===parts.length){const result=Object.entries(bath).filter((([,v])=>null!=v&&""!==v)).map((([k,v])=>`${k.replace(/([A-Z])/g," $1").replace(/^./,(str=>str.toUpperCase()))}: ${v}`)).join(", ")||`Bathroom ${index+1}`;return console.log(`🛁 TOP-LEVEL Bathroom ${index+1} final result (fallback):`,result),result}const result=parts.join(" ");return console.log(`🛁 TOP-LEVEL Bathroom ${index+1} final result:`,result),result}const result=String(bathObj);return console.log(`🛁 TOP-LEVEL Bathroom ${index+1} final result (not object):`,result),result})).join(" | "),console.log("🛁 TOP-LEVEL Final formatted bathroom value:",displayValue)}else if(value.every((item=>"string"==typeof item&&item.match(/^IMG-[A-Z0-9]+_\d+\.jpg$/i))))displayValue="images";else if(value.length>0&&"object"==typeof value[0]&&null!==value[0]){console.log("🔧 Handling array of objects:",key,value);displayValue=value.map(((obj,index)=>{if("object"==typeof obj&&null!==obj){return Object.entries(obj).filter((([,v])=>null!=v)).map((([k,v])=>`${k.replace(/([A-Z])/g," $1").replace(/^./,(str=>str.toUpperCase()))}: ${v}`)).join(", ")||`Item ${index+1}`}return String(obj)})).join(" | ")}else displayValue=value.join(", ");else if(["map","details","lot","rooms","brokerage","taxes","timestamps","estimate","office","nearby","openHouse","open_house","openhouse"].includes(key)&&null!==value)displayValue=null;else if("object"==typeof value&&null!==value&&key.toLowerCase().includes("history")){const historyObj=value,historyParts=[];Object.entries(historyObj).forEach((([histKey,histValue])=>{if("object"==typeof histValue&&null!==histValue){const nestedHistObj=histValue,parts=[];nestedHistObj.date&&parts.push(`Date: ${formatTimestamp(nestedHistObj.date)}`),(nestedHistObj.value||nestedHistObj.estimate)&&parts.push(`Value: ${formatPrice(nestedHistObj.value||nestedHistObj.estimate)}`),nestedHistObj.confidence&&parts.push(`Confidence: ${nestedHistObj.confidence}%`),nestedHistObj.source&&parts.push(`Source: ${nestedHistObj.source}`),nestedHistObj.change&&parts.push(`Change: ${nestedHistObj.change}`),parts.length>0?historyParts.push(`${histKey.toUpperCase()}: ${parts.join(", ")}`):historyParts.push(`${histKey}: ${JSON.stringify(histValue)}`)}else historyParts.push(`${histKey}: ${histValue}`)})),displayValue=historyParts.length>0?historyParts.join(" | "):JSON.stringify(value,null,2)}else displayValue=JSON.stringify(value,null,2);else displayValue="number"==typeof value&&(key.includes("price")||key.includes("Price")||key.includes("cost")||key.includes("Cost")||key.includes("value")||key.includes("Value"))?formatPrice(value):"number"==typeof value&&key.includes("sqft")?value.toLocaleString()+" sqft":"boolean"==typeof value?value?"Yes":"No":"string"!=typeof value||!key.toLowerCase().includes("date")&&!key.toLowerCase().includes("time")&&"listdate"!==key.toLowerCase()&&"list date"!==key.toLowerCase()||!value.includes("T")&&!value.includes("-")&&isNaN(Date.parse(value))?String(value):formatTimestamp(value);const displayKey=key.replace(/([A-Z])/g," $1").replace(/^./,(str=>str.toUpperCase()));return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"border-l-2 border-blue-200 pl-3",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:displayKey}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"text-sm font-medium text-gray-900 mt-1 break-words",children:["map","details","lot","rooms","brokerage","taxes","timestamps","estimate","office","nearby","openHouse","open_house","openhouse"].includes(key)&&"object"==typeof value&&null!==value?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"space-y-1",children:Object.entries(value).map((([subKey,subValue])=>{if("details"===key&&console.log("🔍 DETAILS Processing subKey:",subKey,"Type:",typeof subValue,"Is Array:",Array.isArray(subValue)),null==subValue)return null;const formattedSubKey=subKey.replace(/([A-Z])/g," $1").replace(/^./,(str=>str.toUpperCase()));let formattedSubValue;if("object"==typeof subValue&&null!==subValue)if(Array.isArray(subValue))formattedSubValue=subValue.join(", ");else{const nestedObj=subValue;formattedSubValue=nestedObj.count||nestedObj.number?nestedObj.count||nestedObj.number:nestedObj.dimensions?nestedObj.dimensions:nestedObj.value?nestedObj.value:Object.entries(nestedObj).filter((([,v])=>null!=v)).map((([k,v])=>`${k}: ${v}`)).join(", ")}else formattedSubValue="number"==typeof subValue&&(subKey.includes("price")||subKey.includes("Price")||subKey.includes("cost")||subKey.includes("Cost")||subKey.includes("value")||subKey.includes("Value"))?formatPrice(subValue):"number"==typeof subValue&&subKey.includes("sqft")?subValue.toLocaleString()+" sqft":"boolean"==typeof subValue?subValue?"Yes":"No":"timestamps"===key||subKey.toLowerCase().includes("date")||subKey.toLowerCase().includes("time")||subKey.toLowerCase().includes("created")||subKey.toLowerCase().includes("updated")||subKey.toLowerCase().includes("modified")||subKey.toLowerCase().includes("stamp")||subKey.toLowerCase().includes("list")||"updated on"===subKey.toLowerCase()||"updatedon"===subKey.toLowerCase()||"listdate"===subKey.toLowerCase()?formatTimestamp(subValue):"office"===key&&(subKey.toLowerCase().includes("phone")||subKey.toLowerCase().includes("tel")||subKey.toLowerCase().includes("number"))?String(subValue).replace(/(\d{3})(\d{3})(\d{4})/,"($1) $2-$3"):String(subValue);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex justify-between items-start py-0.5 border-b border-gray-100 last:border-b-0",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",{className:"text-xs text-gray-600 font-medium min-w-0 mr-2",children:[formattedSubKey,":"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-xs text-gray-900 text-right break-words",children:formattedSubValue})]},subKey)}))}):"object"!=typeof value||Array.isArray(value)||"address"===key?"images"===displayValue&&Array.isArray(value)?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-2 mt-2",children:value.map(((imageFilename,index)=>{const fullUrl=`https://cdn.repliers.io/${imageFilename}?class=small`;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"relative aspect-square bg-gray-100 rounded overflow-hidden cursor-pointer hover:shadow-md transition-shadow group",onClick:()=>setSelectedImage(fullUrl.replace(/class=\w+/,"class=large").replace(RegExp("(?<!\\?)class=large"),"?class=large")),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("img",{src:fullUrl,alt:`Photo ${index+1}`,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200",loading:"lazy"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-200 flex items-center justify-center",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity bg-white bg-opacity-90 rounded-full p-1",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg",{className:"w-3 h-3 text-gray-800",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})})]},index)}))}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{children:displayValue}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("pre",{className:"text-xs bg-gray-50 p-2 rounded overflow-auto max-h-32",children:displayValue})})]},key)}))})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("details",{className:"group",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("summary",{className:"cursor-pointer text-sm font-medium text-gray-700 hover:text-gray-900",children:"🔍 Raw JSON Data (Click to expand)"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"mt-2 p-4 bg-gray-50 rounded-lg",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("pre",{className:"text-xs text-gray-600 overflow-auto max-h-96 whitespace-pre-wrap",children:JSON.stringify(selectedListing,null,2)})})]})})]})]}),error&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-red-800",children:error})})]})})}ListingByAddress.__docgenInfo={description:"ListingByAddress Component\n\n@description A component that allows users to search for property listings by address using Google Places API\n@param props - The component props\n@returns JSX.Element",methods:[],displayName:"ListingByAddress",props:{className:{required:!1,tsType:{name:"string"},description:""},onListingSelected:{required:!1,tsType:{name:"signature",type:"function",raw:"(listing: PropertyListing | null) => void",signature:{arguments:[{type:{name:"union",raw:"PropertyListing | null",elements:[{name:"PropertyListing"},{name:"null"}]},name:"listing"}],return:{name:"void"}}},description:""},showDetails:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}}}}},"./src/components/ui/button.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{z:()=>Button});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@radix-ui/react-slot/dist/index.mjs"),class_variance_authority__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/class-variance-authority/dist/index.mjs"),_lib_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/lib/utils.ts");const buttonVariants=(0,class_variance_authority__WEBPACK_IMPORTED_MODULE_2__.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Button=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,variant,size,asChild=!1,...props},ref)=>{const Comp=asChild?_radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_3__.g7:"button";return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Comp,{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_4__.cn)(buttonVariants({variant,size,className})),ref,...props})}));Button.displayName="Button",Button.__docgenInfo={description:"",methods:[],displayName:"Button",props:{asChild:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}},composes:["VariantProps"]}},"./src/components/ui/input.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{I:()=>Input});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_lib_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/lib/utils.ts");const Input=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,type,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{type,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",className),ref,...props})));Input.displayName="Input",Input.__docgenInfo={description:"",methods:[],displayName:"Input"}},"./src/components/unified-address-search/unified-address-search.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{i:()=>UnifiedAddressSearch});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),console=__webpack_require__("./node_modules/console-browserify/index.js");const GOOGLE_PLACES_API_KEY="AIzaSyBqlRCVfRWu5PagapW3CsV1VVba9fIdknA";function UnifiedAddressSearch({onPlaceSelect,placeholder="Enter an address...",className,disabled=!1,displayAddressComponents=!1}){const inputRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),autocompleteRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),[isGoogleLoaded,setIsGoogleLoaded]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),[loadingError,setLoadingError]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null),[savedAddress,setSavedAddress]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);return(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{(async()=>{var _window_google_maps_places,_window_google_maps,_window_google;if(null===(_window_google=window.google)||void 0===_window_google||null===(_window_google_maps=_window_google.maps)||void 0===_window_google_maps||null===(_window_google_maps_places=_window_google_maps.places)||void 0===_window_google_maps_places?void 0:_window_google_maps_places.Autocomplete)setIsGoogleLoaded(!0);else try{const script=document.createElement("script");script.src=`https://maps.googleapis.com/maps/api/js?key=${GOOGLE_PLACES_API_KEY}&libraries=places&loading=async&v=weekly`,script.async=!0,script.defer=!0;const loadPromise=new Promise(((resolve,reject)=>{script.onload=()=>{const checkGoogleMaps=()=>{var _window_google_maps_places,_window_google_maps,_window_google;(null===(_window_google=window.google)||void 0===_window_google||null===(_window_google_maps=_window_google.maps)||void 0===_window_google_maps||null===(_window_google_maps_places=_window_google_maps.places)||void 0===_window_google_maps_places?void 0:_window_google_maps_places.Autocomplete)?resolve():setTimeout(checkGoogleMaps,100)};checkGoogleMaps()},script.onerror=error=>{console.error("Script loading failed:",error),reject(new Error("Failed to load Google Maps API script"))}}));document.head.appendChild(script),await loadPromise,setIsGoogleLoaded(!0),setLoadingError(null)}catch(error){console.error("Error loading Google Maps API:",error),setIsGoogleLoaded(!1),setLoadingError(error instanceof Error?error.message:"Failed to load Google Maps API")}})()}),[]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{var _window_google_maps_places,_window_google_maps,_window_google;if(isGoogleLoaded&&inputRef.current&&!autocompleteRef.current){if(!(null===(_window_google=window.google)||void 0===_window_google||null===(_window_google_maps=_window_google.maps)||void 0===_window_google_maps||null===(_window_google_maps_places=_window_google_maps.places)||void 0===_window_google_maps_places?void 0:_window_google_maps_places.Autocomplete))return console.error("Google Maps Autocomplete not available even though isGoogleLoaded is true"),void setIsGoogleLoaded(!1);try{const autocomplete=new window.google.maps.places.Autocomplete(inputRef.current,{types:["address"],fields:["address_components","formatted_address","place_id","geometry"]});autocompleteRef.current=autocomplete;const handlePlaceChanged=()=>{const place=autocomplete.getPlace();if(!place.address_components)return;const addressComponents={city:"",streetNumber:"",streetName:"",streetSuffix:"",state:"",postalCode:"",country:""};place.address_components.forEach((component=>{const types=component.types,value=component.long_name;if(types.includes("street_number"))addressComponents.streetNumber=value;else if(types.includes("route")){const parts=value.split(" ");if(parts.length>1){const lastPart=parts[parts.length-1].toLowerCase();["street","st","avenue","ave","road","rd","boulevard","blvd","lane","ln","drive","dr","court","ct","circle","cir","way","place","pl","terrace","ter","trail","trl","parkway","pkwy","square","sq","highway","hwy"].includes(lastPart)?(addressComponents.streetSuffix=parts.pop()||"",addressComponents.streetName=parts.join(" ")):addressComponents.streetName=value}else addressComponents.streetName=value}else types.includes("locality")?addressComponents.city=value:types.includes("administrative_area_level_1")?addressComponents.state=value:types.includes("postal_code")?addressComponents.postalCode=value:types.includes("country")&&(addressComponents.country=value)}));const placeDetails={address:addressComponents,formattedAddress:place.formatted_address||"",placeId:place.place_id||"",geometry:place.geometry?{lat:place.geometry.location.lat(),lng:place.geometry.location.lng()}:void 0};setSavedAddress(placeDetails),onPlaceSelect(placeDetails)};return autocomplete.addListener("place_changed",handlePlaceChanged),()=>{autocompleteRef.current&&(window.google.maps.event.clearInstanceListeners(autocompleteRef.current),autocompleteRef.current=null)}}catch(error){console.error("Error initializing autocomplete:",error)}}}),[isGoogleLoaded,onPlaceSelect]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label",{htmlFor:"address-search",className:"text-sm font-medium",children:"Search Address"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"min-w-[400px] w-auto",children:isGoogleLoaded?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{ref:inputRef,id:"address-search",type:"text",placeholder,disabled,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-4 00 focus:border-blue-500"}):loadingError?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"text-red-500 text-sm p-2 border border-red-300 rounded",children:["Error: ",loadingError]}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"text-muted-foreground px-3 py-2 border border-gray-300 rounded-md bg-gray-50",children:"Loading Google Maps..."})})]}),displayAddressComponents&&savedAddress&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"mt-4 p-4 border rounded-lg bg-gray-50",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h3",{className:"text-sm font-medium mb-2",children:"Address Components"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("dl",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("dt",{className:"font-medium text-gray-600",children:"Street Number:"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("dd",{children:savedAddress.address.streetNumber}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("dt",{className:"font-medium text-gray-600",children:"Street Name:"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("dd",{children:savedAddress.address.streetName}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("dt",{className:"font-medium text-gray-600",children:"Street Suffix:"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("dd",{children:savedAddress.address.streetSuffix}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("dt",{className:"font-medium text-gray-600",children:"City:"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("dd",{children:savedAddress.address.city}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("dt",{className:"font-medium text-gray-600",children:"State:"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("dd",{children:savedAddress.address.state}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("dt",{className:"font-medium text-gray-600",children:"Postal Code:"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("dd",{children:savedAddress.address.postalCode}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("dt",{className:"font-medium text-gray-600",children:"Country:"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("dd",{children:savedAddress.address.country}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("dt",{className:"font-medium text-gray-600",children:"Formatted Address:"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("dd",{className:"col-span-2",children:savedAddress.formattedAddress})]})]})]})})}UnifiedAddressSearch.__docgenInfo={description:"UnifiedAddressSearch Component\n\n@description Address autocomplete component using Google Places API\n@param props - The component props\n@returns JSX.Element",methods:[],displayName:"UnifiedAddressSearch",props:{onPlaceSelect:{required:!0,tsType:{name:"signature",type:"function",raw:"(place: PlaceDetails) => void",signature:{arguments:[{type:{name:"PlaceDetails"},name:"place"}],return:{name:"void"}}},description:""},placeholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"Enter an address..."',computed:!1}},className:{required:!1,tsType:{name:"string"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},displayAddressComponents:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}}},"./src/lib/utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{cn:()=>cn});var clsx__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),tailwind_merge__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/tailwind-merge/dist/bundle-mjs.mjs");function cn(...inputs){return(0,tailwind_merge__WEBPACK_IMPORTED_MODULE_0__.m6)((0,clsx__WEBPACK_IMPORTED_MODULE_1__.W)(inputs))}}}]);