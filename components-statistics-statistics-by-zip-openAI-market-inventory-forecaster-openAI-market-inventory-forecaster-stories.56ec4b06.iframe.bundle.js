"use strict";(self.webpackChunkpocs=self.webpackChunkpocs||[]).push([[543],{"./src/components/statistics/statistics-by-zip/openAI-market-inventory-forecaster/openAI-market-inventory-forecaster.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{WorkingDemo:()=>WorkingDemo,__namedExportsOrder:()=>__namedExportsOrder,default:()=>openAI_market_inventory_forecaster_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),input=__webpack_require__("./src/components/ui/input.tsx"),ui_button=__webpack_require__("./src/components/ui/button.tsx"),api_input=__webpack_require__("./src/components/api-input/api-input.tsx"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");const OpenAIInventoryForecast=({zipCode,riskLevel,location,averagePrice,priceChange,currentInventory,daysOnMarket,inventoryForecast,sixMonthAverage,sixMonthChange,yearOverYearAverage,yearOverYearChange})=>(0,jsx_runtime.jsxs)("div",{className:"max-w-4xl mx-auto p-6 bg-white rounded-2xl shadow border border-gray-200",children:[(0,jsx_runtime.jsxs)("div",{className:"flex justify-between items-start flex-wrap gap-4",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,jsx_runtime.jsx)("span",{className:"text-sm bg-blue-100 text-blue-700 font-semibold px-3 py-1 rounded-full",children:zipCode}),(0,jsx_runtime.jsx)("span",{className:"text-sm bg-yellow-100 text-yellow-700 font-semibold px-3 py-1 rounded-full",children:riskLevel})]}),(0,jsx_runtime.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:location}),(0,jsx_runtime.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("p",{className:"text-gray-500",children:"Last 30 Days Average Price"}),(0,jsx_runtime.jsxs)("p",{className:"text-xl font-semibold text-gray-900",children:["$",averagePrice.toLocaleString()]}),(0,jsx_runtime.jsxs)("p",{className:`text-sm ${priceChange>=0?"text-green-600":"text-red-600"} mt-1`,children:[priceChange>=0?"↑":"↓"," ",Math.abs(priceChange),"%"," ",priceChange>=0?"up":"down"," vs previous month"]})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("p",{className:"text-gray-500",children:"6-Month Average Price"}),(0,jsx_runtime.jsxs)("p",{className:"text-xl font-semibold text-gray-900",children:["$",sixMonthAverage.toLocaleString()]}),(0,jsx_runtime.jsxs)("p",{className:`text-sm ${sixMonthChange>=0?"text-green-600":"text-red-600"} mt-1`,children:[sixMonthChange>=0?"↑":"↓"," ",Math.abs(sixMonthChange),"%"," ",sixMonthChange>=0?"up":"down"," vs previous 6 months"]})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("p",{className:"text-gray-500",children:"Year Over Year"}),(0,jsx_runtime.jsxs)("p",{className:"text-xl font-semibold text-gray-900",children:["$",yearOverYearAverage.toLocaleString()]}),(0,jsx_runtime.jsxs)("p",{className:`text-sm ${yearOverYearChange>=0?"text-green-600":"text-red-600"} mt-1`,children:[yearOverYearChange>=0?"↑":"↓"," ",Math.abs(yearOverYearChange),"%"," ",yearOverYearChange>=0?"up":"down"," vs last year"]})]})]})]}),(0,jsx_runtime.jsxs)("div",{className:"text-right",children:[(0,jsx_runtime.jsx)("p",{className:"text-gray-500",children:"Current Inventory"}),(0,jsx_runtime.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[currentInventory," homes"]})]})]}),(0,jsx_runtime.jsx)("hr",{className:"my-6 border-gray-200"}),(0,jsx_runtime.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,jsx_runtime.jsx)("h3",{className:"font-semibold text-gray-800",children:"3-Month Inventory Forecast"})}),(0,jsx_runtime.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:inventoryForecast.map(((forecast,index)=>(0,jsx_runtime.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 text-center",children:[(0,jsx_runtime.jsx)("p",{className:"text-sm text-gray-500",children:forecast.month}),(0,jsx_runtime.jsx)("p",{className:"text-lg font-semibold text-gray-800",children:forecast.value})]},index)))})]}),data_display=OpenAIInventoryForecast;OpenAIInventoryForecast.__docgenInfo={description:"",methods:[],displayName:"OpenAIInventoryForecast",props:{zipCode:{required:!0,tsType:{name:"string"},description:""},riskLevel:{required:!0,tsType:{name:"string"},description:""},location:{required:!0,tsType:{name:"string"},description:""},averagePrice:{required:!0,tsType:{name:"number"},description:""},priceChange:{required:!0,tsType:{name:"number"},description:""},currentInventory:{required:!0,tsType:{name:"number"},description:""},daysOnMarket:{required:!0,tsType:{name:"number"},description:""},inventoryForecast:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\n  month: string;\n  value: number;\n}",signature:{properties:[{key:"month",value:{name:"string",required:!0}},{key:"value",value:{name:"number",required:!0}}]}}],raw:"{\n  month: string;\n  value: number;\n}[]"},description:""},sixMonthAverage:{required:!0,tsType:{name:"number"},description:""},sixMonthChange:{required:!0,tsType:{name:"number"},description:""},yearOverYearAverage:{required:!0,tsType:{name:"number"},description:""},yearOverYearChange:{required:!0,tsType:{name:"number"},description:""}}};var eye_off=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/eye-off.js"),eye=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/eye.js"),console=__webpack_require__("./node_modules/console-browserify/index.js");function AIInventoryForecast(){const[apiKey,setApiKey]=(0,react.useState)(""),[openaiApiKey,setOpenaiApiKey]=(0,react.useState)(""),[showOpenaiApiKey,setShowOpenaiApiKey]=(0,react.useState)(!1),[zipCode,setZipCode]=(0,react.useState)("94112"),[isLoading,setIsLoading]=(0,react.useState)(!1),[loadingStep,setLoadingStep]=(0,react.useState)("idle"),[error,setError]=(0,react.useState)(null),[response,setResponse]=(0,react.useState)(null),[processedData,setProcessedData]=(0,react.useState)(null);return(0,jsx_runtime.jsxs)("div",{className:"space-y-8",children:[(0,jsx_runtime.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),setIsLoading(!0),setError(null),setProcessedData(null),setLoadingStep("fetching-repliers");try{const repliersHeaders={"REPLIERS-API-KEY":apiKey,"Content-Type":"application/json",Accept:"application/json","User-Agent":"PostmanRuntime/7.43.4","Cache-Control":"no-cache",Connection:"keep-alive"},repliersResponse=await fetch(`https://dev.repliers.io/listings?listings=false&statistics=cnt-available,avg-soldPrice,med-daysOnMarket,cnt-new,cnt-closed,grp-mth&type=sale&status=U&minSoldDate=2023-05-20&status=A&zip=${zipCode}`,{method:"GET",headers:repliersHeaders});if(!repliersResponse.ok){const errorText=await repliersResponse.text();throw new Error(`Repliers API error! status: ${repliersResponse.status}, message: ${errorText}`)}const repliersData=await repliersResponse.json();setResponse(repliersData),console.log("Repliers Response:",repliersData),setLoadingStep("analyzing-data");const priceMetrics=function calculatePriceMetrics(repliersData){const monthlyPrices=repliersData.statistics.soldPrice.mth,monthsToUse=Object.keys(monthlyPrices).sort().slice(0,-1),previousMonth=monthsToUse[monthsToUse.length-1],twoMonthsAgo=monthsToUse[monthsToUse.length-2],averagePrice=monthlyPrices[previousMonth].avg,previousPrice=monthlyPrices[previousMonth].avg,twoMonthsAgoPrice=monthlyPrices[twoMonthsAgo].avg,priceChange=Number(((previousPrice-twoMonthsAgoPrice)/twoMonthsAgoPrice*100).toFixed(2)),last6Months=monthsToUse.slice(-6),previous6Months=monthsToUse.slice(-12,-6),sixMonthAverage=last6Months.reduce(((sum,month)=>sum+monthlyPrices[month].avg),0)/6,previousSixMonthAverage=previous6Months.reduce(((sum,month)=>sum+monthlyPrices[month].avg),0)/6,sixMonthChange=Number(((sixMonthAverage-previousSixMonthAverage)/previousSixMonthAverage*100).toFixed(2)),last12Months=monthsToUse.slice(-12),previous12Months=monthsToUse.slice(-24,-12),yearOverYearAverage=last12Months.reduce(((sum,month)=>sum+monthlyPrices[month].avg),0)/12,previousYearOverYearAverage=previous12Months.reduce(((sum,month)=>sum+monthlyPrices[month].avg),0)/12;return{averagePrice,priceChange,sixMonthAverage,sixMonthChange,yearOverYearAverage,yearOverYearChange:Number(((yearOverYearAverage-previousYearOverYearAverage)/previousYearOverYearAverage*100).toFixed(2))}}(repliersData),openaiResponse=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${openaiApiKey}`},body:JSON.stringify({model:"gpt-4",messages:[{role:"system",content:"You are a helpful assistant that analyzes real estate data and returns structured insights in JSON format. Your analysis should be based on the provided Repliers data. IMPORTANT: Return ONLY the JSON object without any additional text, explanations, or markdown formatting. Use the exact field names and data types as specified."},{role:"user",content:`Analyze the following real estate data from Repliers and return ONLY a JSON object with the specified fields. The Repliers data contains these key metrics:\n- cnt-available: Number of listings available at the end of each month\n- cnt-closed: Number of listings sold in each month\n- cnt-new: Number of new listings added in each month\n- avg-soldPrice: Average sold price for each month\n- med-daysOnMarket: Median time to sell\n\nTarget Zip Code: ${zipCode}\n\nRepliers Data: ${JSON.stringify(repliersData,null,2)}\n\nReturn a JSON object with these exact fields and types:\n{\n  "zipCode": "string - use the provided zip code: ${zipCode}",\n  "riskLevel": "string - calculate based on trends in cnt-closed and avg-soldPrice",\n  "location": "string - city and state based on zip code ${zipCode}",\n  "currentInventory": "number - use the most recent cnt-available",\n  "daysOnMarket": "number - use the most recent med-daysOnMarket",\n  "inventoryForecast": [\n    {"month": "string - next month abbreviation", "value": "number - project based on cnt-new and cnt-closed trends"},\n    {"month": "string - month after next abbreviation", "value": "number - project based on cnt-new and cnt-closed trends"},\n    {"month": "string - third month abbreviation", "value": "number - project based on cnt-new and cnt-closed trends"}\n  ]\n}\n\nIMPORTANT:\n1. Return ONLY the JSON object with actual values\n2. Use the exact field names and types as shown above\n3. Calculate riskLevel based on trends in sales and prices\n4. For inventoryForecast, use trends in cnt-new and cnt-closed to project future inventory\n5. Use the provided zip code ${zipCode} for the zipCode and location fields\n6. No explanations, no markdown, no additional text`}],temperature:.2})});if(!openaiResponse.ok){const errorText=await openaiResponse.text();throw console.error("OpenAI Error Response:",errorText),new Error(`OpenAI API error! status: ${openaiResponse.status}, message: ${errorText}`)}const openaiData=await openaiResponse.json();console.log("OpenAI Response:",openaiData);const{choices}=openaiData;console.log("OpenAI Choices:",choices),console.log("Raw content from OpenAI:",choices[0].message.content);try{const cleanedContent=choices[0].message.content.replace(/```json\n?|\n?```/g,"").trim();console.log("Cleaned content:",cleanedContent);const parsedProps=JSON.parse(cleanedContent);console.log("Parsed Props:",parsedProps);const processedData={...parsedProps,...priceMetrics};if(!(processedData.zipCode&&processedData.riskLevel&&processedData.location&&Array.isArray(processedData.inventoryForecast)&&3===processedData.inventoryForecast.length))throw console.error("Invalid data structure:",processedData),new Error("Invalid data structure returned from OpenAI");setProcessedData(processedData),setLoadingStep("complete")}catch(parseError){throw console.error("JSON Parse Error:",parseError),console.error("Failed to parse content:",choices[0].message.content),new Error(`Failed to parse OpenAI response: ${parseError instanceof Error?parseError.message:"Unknown error"}`)}}catch(err){setError(err instanceof Error?err.message:"An error occurred"),console.error("Error:",err),setLoadingStep("idle")}finally{setIsLoading(!1)}},className:"flex flex-col gap-4",children:[(0,jsx_runtime.jsx)(api_input.T,{onApiKeyChange:setApiKey}),(0,jsx_runtime.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,jsx_runtime.jsx)("label",{className:"text-sm font-medium",children:"OpenAI API Key"}),(0,jsx_runtime.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,jsx_runtime.jsx)(input.I,{type:showOpenaiApiKey?"text":"password",placeholder:"OpenAI API Key",className:"max-w-[300px]",value:openaiApiKey,onChange:e=>setOpenaiApiKey(e.target.value),required:!0}),(0,jsx_runtime.jsx)(ui_button.z,{type:"button",variant:"ghost",size:"icon",onClick:()=>setShowOpenaiApiKey(!showOpenaiApiKey),className:"h-10 w-10",children:showOpenaiApiKey?(0,jsx_runtime.jsx)(eye_off.Z,{className:"h-4 w-4"}):(0,jsx_runtime.jsx)(eye.Z,{className:"h-4 w-4"})})]})]}),(0,jsx_runtime.jsxs)("div",{className:"flex gap-2",children:[(0,jsx_runtime.jsx)(input.I,{type:"text",placeholder:"95130",className:"max-w-[200px]",value:zipCode,onChange:e=>setZipCode(e.target.value),required:!0}),(0,jsx_runtime.jsx)(ui_button.z,{type:"submit",disabled:isLoading,children:isLoading?"Loading...":"Get Data"})]}),error&&(0,jsx_runtime.jsx)("div",{className:"text-red-500 text-sm",children:error})]}),"idle"!==loadingStep&&(0,jsx_runtime.jsx)("div",{className:"text-sm font-medium "+("complete"===loadingStep?"text-green-600":"text-blue-600"),children:(step=>{switch(step){case"fetching-repliers":return"Fetching real estate data from Repliers...";case"analyzing-data":return"Analyzing market data with AI...";case"complete":return"Analysis complete!";default:return""}})(loadingStep)}),(0,jsx_runtime.jsx)(data_display,{...processedData||{zipCode:"Enter Zip Code",riskLevel:"N/A",location:"Location will appear here",averagePrice:0,priceChange:0,sixMonthAverage:0,sixMonthChange:0,yearOverYearAverage:0,yearOverYearChange:0,currentInventory:0,daysOnMarket:0,inventoryForecast:[{month:"Month 1",value:0},{month:"Month 2",value:0},{month:"Month 3",value:0}]}})]})}AIInventoryForecast.__docgenInfo={description:"",methods:[],displayName:"AIInventoryForecast"};const openAI_market_inventory_forecaster_stories={title:"PoCs/Statistics/Statistics by Zip/AI Inventory Forecast",component:AIInventoryForecast,parameters:{layout:"centered",docs:{description:{component:'## 👤 User Story\n\nAs a real estate professional, I want to search an area by zip code and analyze the projected inventory for the next three months.\n\nThis component helps real estate professionals:\n- Quickly assess market conditions in any area\n- Make data-driven decisions about inventory management\n- Plan for future market changes\n- Identify potential investment opportunities\n\nThis component provides real-time real estate market analysis for any given zip code using Repliers API data and OpenAI\'s analysis capabilities.\n\n## 🎥 Video Demo\n\nWatch a demo of this component in action: [View Demo Video](https://www.loom.com/share/503d120372d2445786922c0a4f89cc3f?sid=e0ca72d9-0b25-46e9-9366-ac1ae3e87919)\n\n## 🚀 Quick Start\n\n1. Install dependencies:\n```bash\nnpm install openai lucide-react\n```\n\n2. Set up UI Components:\n   - If you have your own component library, you can use your existing components\n   - If not, copy our UI components:\n     - Basic UI components (buttons, inputs, etc.): [View UI Components](https://github.com/Repliers-io/pocs/tree/main/src/components/ui)\n     - Data display component: [View Data Display Component](https://github.com/Repliers-io/pocs/blob/main/src/components/statistics/statistics-by-zip/inventory-forecast/data-display.tsx)\n\n3. Copy the component files:\n   - `openAI-market-inventory-forecaster.tsx`\n   - `data-display.tsx` (if not using your own UI)\n   - Required UI components (either from your library or ours)\n\n4. Add to your project:\n\n```tsx\nimport { AIInventoryForecast } from "./components/openAI-market-inventory-forecaster";\n\nfunction App() {\n  return (\n    <div className="container mx-auto p-4">\n      <AIInventoryForecast />\n    </div>\n  );\n}\n```\n\n## 🔑 Required API Keys\n\n### 1. Repliers API Key\n- Sign up at [Repliers Developer Portal](https://dev.repliers.io)\n- Get your API key from the dashboard\n- The component will prompt for this key\n\n### 2. OpenAI API Key\n- Sign up at [OpenAI Platform](https://platform.openai.com)\n- Create an API key in the dashboard\n- The component will prompt for this key\n\n## 📦 Component Structure\n\nThe component consists of three main parts:\n\n1. API Key Inputs - Handles authentication for both Repliers and OpenAI APIs\n2. Zip Code Input - Allows users to enter their target location\n3. Data Display - Shows the analysis results and forecasts\n\n## 💡 Key Features\n\n1. **Real-time Market Analysis**\n   - Current inventory levels\n   - Price trends\n   - Days on market\n   - Risk assessment\n\n2. **AI-Powered Forecasting**\n   - 3-month inventory projections\n   - Market trend analysis\n   - Risk level assessment\n\n3. **Interactive UI**\n   - Secure API key input\n   - Real-time data updates\n   - Loading states\n   - Error handling\n\n## 📊 Data Structure\n\nThe component processes and displays data in this format:\n\n```ts\ninterface ProcessedData {\n  zipCode: string;\n  riskLevel: string;\n  location: string;\n  averagePrice: number;\n  priceChange: number;\n  sixMonthAverage: number;\n  sixMonthChange: number;\n  yearOverYearAverage: number;\n  yearOverYearChange: number;\n  currentInventory: number;\n  daysOnMarket: number;\n  inventoryForecast: {\n    month: string;\n    value: number;\n  }[];\n}\n```\n\n## 🔧 Implementation Steps\n\n1. **Setup API Integration**\n```ts\n// Configure API endpoints\nconst REPLIERS_API_URL = \'https://dev.repliers.io/listings\';\nconst OPENAI_API_URL = \'https://api.openai.com/v1/chat/completions\';\n```\n\n2. **Add State Management**\n```ts\nconst [apiKey, setApiKey] = useState("");\nconst [openaiApiKey, setOpenaiApiKey] = useState("");\nconst [zipCode, setZipCode] = useState("");\nconst [processedData, setProcessedData] = useState<ProcessedData | null>(null);\n```\n\n3. **Implement Data Fetching**\n```ts\nconst fetchRepliersData = async (zipCode: string) => {\n  const response = await fetch(\n    `${REPLIERS_API_URL}?zip=${zipCode}&statistics=cnt-available,avg-soldPrice,med-daysOnMarket`,\n    {\n      headers: {\n        "REPLIERS-API-KEY": apiKey,\n        "Content-Type": "application/json"\n      }\n    }\n  );\n  return response.json();\n};\n```\n\n4. **Add AI Analysis**\n```ts\nconst analyzeWithAI = async (data: any) => {\n  const response = await fetch(OPENAI_API_URL, {\n    method: "POST",\n    headers: {\n      "Authorization": `Bearer ${openaiApiKey}`,\n      "Content-Type": "application/json"\n    },\n    body: JSON.stringify({\n      model: "gpt-4",\n      messages: [\n        {\n          role: "system",\n          content: "Analyze real estate data and return structured insights"\n        },\n        {\n          role: "user",\n          content: JSON.stringify(data)\n        }\n      ]\n    })\n  });\n  return response.json();\n};\n```\n\n## 🎨 Styling\n\nThe component uses Tailwind CSS for styling. Make sure to include these dependencies:\n\n```bash\nnpm install tailwindcss @tailwindcss/forms\n```\n\n## 🛠️ Dependencies\n\nRequired packages:\n- React\n- TypeScript\n- Tailwind CSS\n- Lucide React (for icons)\n- Repliers API Client\n- OpenAI API Client\n\n## 🔍 Error Handling\n\nThe component includes comprehensive error handling for:\n- Invalid API keys\n- Network errors\n- Invalid zip codes\n- API rate limiting\n- Data processing errors\n\n## 📝 Full Component Code\n\nFor the complete implementation of this component, including all the code and functionality, visit:\n[View Full Component Code](https://github.com/Repliers-io/pocs/blob/main/src/components/statistics/statistics-by-zip/inventory-forecast/openAI-market-inventory-forecaster.tsx)'}}},tags:["autodocs"]},WorkingDemo={args:{}},__namedExportsOrder=["WorkingDemo"];WorkingDemo.parameters={...WorkingDemo.parameters,docs:{...WorkingDemo.parameters?.docs,source:{originalSource:"{\n  args: {}\n}",...WorkingDemo.parameters?.docs?.source}}}},"./src/components/api-input/api-input.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{T:()=>ApiInput});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),_components_ui_input__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/ui/input.tsx"),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_components_ui_button__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/ui/button.tsx"),_barrel_optimize_names_Eye_EyeOff_lucide_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/eye-off.js"),_barrel_optimize_names_Eye_EyeOff_lucide_react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/eye.js"),_lib_api_keys_context__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/lib/api-keys-context.tsx"),console=__webpack_require__("./node_modules/console-browserify/index.js");function ApiInput({onApiKeyChange,className,isEstimates}){const{repliersApiKey,setRepliersApiKey}=(0,_lib_api_keys_context__WEBPACK_IMPORTED_MODULE_4__.nB)(),[showApiKey,setShowApiKey]=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(!1),[isValidating,setIsValidating]=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(!1),[validationError,setValidationError]=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);(0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)((()=>{onApiKeyChange(repliersApiKey)}),[repliersApiKey,onApiKeyChange]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:`flex flex-col gap-2 ${className}`,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label",{htmlFor:"api-key",className:"text-sm font-medium",children:"Repliers API Key"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_input__WEBPACK_IMPORTED_MODULE_1__.I,{id:"api-key",type:showApiKey?"text":"password",placeholder:"Enter your API key...",className:"max-w-[300px]",value:repliersApiKey,onChange:e=>{const newValue=e.target.value;setRepliersApiKey(newValue),onApiKeyChange(newValue),validationError&&setValidationError(null);const timeoutId=setTimeout((()=>{(async key=>{if(key){setIsValidating(!0),setValidationError(null);try{const endpoint=isEstimates?"https://api.repliers.io/estimates":"https://api.repliers.io/listings?area=toronto",response=await fetch(endpoint,{method:"HEAD",headers:{"REPLIERS-API-KEY":key,Accept:"application/json"}});401===response.status?setValidationError("Invalid API key. Please check your key and try again."):403===response.status?setValidationError(isEstimates?"Your API key doesn't have access to the estimates feature. Please upgrade your plan or contact Repliers support to request a trial.":"Your API key doesn't have access to the listings feature. Please upgrade your plan or contact Repliers support to request a trial."):response.ok||setValidationError("Failed to validate API key. Please try again.")}catch(error){console.error("API Error:",error),setValidationError("Failed to validate API key. Please try again.")}finally{setIsValidating(!1)}}})(newValue)}),500);return()=>clearTimeout(timeoutId)},required:!0}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_button__WEBPACK_IMPORTED_MODULE_3__.z,{type:"button",variant:"ghost",size:"icon",onClick:()=>setShowApiKey(!showApiKey),className:"h-10 w-10",children:showApiKey?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_Eye_EyeOff_lucide_react__WEBPACK_IMPORTED_MODULE_5__.Z,{className:"h-4 w-4"}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_Eye_EyeOff_lucide_react__WEBPACK_IMPORTED_MODULE_6__.Z,{className:"h-4 w-4"})})]}),isValidating&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-sm text-gray-500",children:"Validating API key..."}),validationError&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-sm text-red-500",children:validationError}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{className:"text-sm text-gray-500",children:["Don't have a Repliers API key?"," ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("a",{href:"https://repliers.com/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline",children:"Get one here"})]})]})}ApiInput.__docgenInfo={description:"",methods:[],displayName:"ApiInput",props:{onApiKeyChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(apiKey: string) => void",signature:{arguments:[{type:{name:"string"},name:"apiKey"}],return:{name:"void"}}},description:""},className:{required:!1,tsType:{name:"string"},description:""},isEstimates:{required:!1,tsType:{name:"boolean"},description:""}}}},"./src/components/ui/button.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{z:()=>Button});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@radix-ui/react-slot/dist/index.mjs"),class_variance_authority__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/class-variance-authority/dist/index.mjs"),_lib_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/lib/utils.ts");const buttonVariants=(0,class_variance_authority__WEBPACK_IMPORTED_MODULE_2__.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Button=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,variant,size,asChild=!1,...props},ref)=>{const Comp=asChild?_radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_3__.g7:"button";return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Comp,{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_4__.cn)(buttonVariants({variant,size,className})),ref,...props})}));Button.displayName="Button",Button.__docgenInfo={description:"",methods:[],displayName:"Button",props:{asChild:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}},composes:["VariantProps"]}},"./src/components/ui/input.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{I:()=>Input});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_lib_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/lib/utils.ts");const Input=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,type,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{type,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",className),ref,...props})));Input.displayName="Input",Input.__docgenInfo={description:"",methods:[],displayName:"Input"}},"./src/lib/utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{cn:()=>cn});var clsx__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),tailwind_merge__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/tailwind-merge/dist/bundle-mjs.mjs");function cn(...inputs){return(0,tailwind_merge__WEBPACK_IMPORTED_MODULE_0__.m6)((0,clsx__WEBPACK_IMPORTED_MODULE_1__.W)(inputs))}}}]);