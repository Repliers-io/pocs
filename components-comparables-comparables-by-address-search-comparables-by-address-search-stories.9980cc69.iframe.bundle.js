"use strict";(self.webpackChunkpocs=self.webpackChunkpocs||[]).push([[223],{"./src/components/comparables/comparables-by-address-search/comparables-by-address-search.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>comparables_by_address_search_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),ui_button=__webpack_require__("./src/components/ui/button.tsx"),input=__webpack_require__("./src/components/ui/input.tsx"),listing_by_address=__webpack_require__("./src/components/listings/listing-by-address/listing-by-address.tsx"),console=__webpack_require__("./node_modules/console-browserify/index.js");function ComparablesByAddressSearch({className,onComparablesFound,searchRadius=2}){const[selectedListing,setSelectedListing]=(0,react.useState)(null),[comparableData,setComparableData]=(0,react.useState)(null),[comparables,setComparables]=(0,react.useState)([]),[originalListings,setOriginalListings]=(0,react.useState)([]),[isLoadingComparables,setIsLoadingComparables]=(0,react.useState)(!1),[error,setError]=(0,react.useState)(null),[editableData,setEditableData]=(0,react.useState)({radius:searchRadius}),[propertyTypes,setPropertyTypes]=(0,react.useState)([]),[isLoadingPropertyTypes,setIsLoadingPropertyTypes]=(0,react.useState)(!1),[hasSearched,setHasSearched]=(0,react.useState)(!1);react.useEffect((()=>{const handleApiKeyChange=()=>{0===propertyTypes.length&&(async()=>{var _apiInput_value;const apiInput=document.querySelector('input[placeholder*="API"]'),apiKey=null==apiInput||null===(_apiInput_value=apiInput.value)||void 0===_apiInput_value?void 0:_apiInput_value.trim();if(apiKey){setIsLoadingPropertyTypes(!0);try{const response=await fetch("https://api.repliers.io/listings?aggregates=details.propertyType",{headers:{"REPLIERS-API-KEY":apiKey}});if(response.ok){var _data_aggregates_details,_data_aggregates;const data=await response.json();if(console.log("📊 Property types aggregates response:",data),null===(_data_aggregates=data.aggregates)||void 0===_data_aggregates||null===(_data_aggregates_details=_data_aggregates.details)||void 0===_data_aggregates_details?void 0:_data_aggregates_details.propertyType){const propertyTypeData=data.aggregates.details.propertyType,sortedTypes=Object.entries(propertyTypeData).sort((([,a],[,b])=>b-a)).map((([type])=>type));setPropertyTypes(sortedTypes),console.log("🏠 Property types loaded:",sortedTypes)}}else console.warn("❌ Failed to fetch property types aggregates")}catch(error){console.warn("❌ Error fetching property types:",error)}finally{setIsLoadingPropertyTypes(!1)}}})()};handleApiKeyChange();const apiInput=document.querySelector('input[placeholder*="API"]');if(apiInput)return apiInput.addEventListener("blur",handleApiKeyChange),()=>apiInput.removeEventListener("blur",handleApiKeyChange)}),[propertyTypes.length]);const formatPrice=price=>`$${price.toLocaleString()}`,formatAddress=address=>{if("string"==typeof address)return address;if("object"==typeof address&&null!==address){const parts=[];return address.streetNumber&&parts.push(address.streetNumber),address.streetName&&parts.push(address.streetName),address.streetSuffix&&parts.push(address.streetSuffix),address.city&&parts.push(address.city),address.state&&parts.push(address.state),(address.zip||address.postalCode)&&parts.push(address.zip||address.postalCode),parts.length>0?parts.join(" "):"Address not available"}return"Address not available"};return(0,jsx_runtime.jsx)("div",{className,children:(0,jsx_runtime.jsxs)("form",{onSubmit:async e=>{var _apiInput_value;if(e.preventDefault(),!selectedListing||!editableData)return void setError("Please select a property listing first.");const apiInput=document.querySelector('input[placeholder*="API"]'),apiKey=null==apiInput||null===(_apiInput_value=apiInput.value)||void 0===_apiInput_value?void 0:_apiInput_value.trim();if(apiKey){setIsLoadingComparables(!0),setError(null),setHasSearched(!0);try{const searchParams=new URLSearchParams;editableData.status&&editableData.status.trim()&&searchParams.append("status",editableData.status),editableData.lastStatus&&editableData.lastStatus.trim()&&"A"!==editableData.status&&searchParams.append("lastStatus",editableData.lastStatus),editableData.type&&editableData.type.trim()&&searchParams.append("type",editableData.type),editableData.propertyType&&editableData.propertyType.trim()&&searchParams.append("propertyType",editableData.propertyType),void 0===editableData.minBeds||null===editableData.minBeds||isNaN(editableData.minBeds)||searchParams.append("minBeds",editableData.minBeds.toString()),void 0===editableData.maxBeds||null===editableData.maxBeds||isNaN(editableData.maxBeds)||searchParams.append("maxBeds",editableData.maxBeds.toString()),void 0===editableData.minBaths||null===editableData.minBaths||isNaN(editableData.minBaths)||searchParams.append("minBaths",editableData.minBaths.toString()),void 0===editableData.maxBaths||null===editableData.maxBaths||isNaN(editableData.maxBaths)||searchParams.append("maxBaths",editableData.maxBaths.toString()),void 0===editableData.minSqft||null===editableData.minSqft||isNaN(editableData.minSqft)||searchParams.append("minSqft",editableData.minSqft.toString()),void 0===editableData.maxSqft||null===editableData.maxSqft||isNaN(editableData.maxSqft)||searchParams.append("maxSqft",editableData.maxSqft.toString()),editableData.city&&editableData.city.trim()&&searchParams.append("city",editableData.city),void 0===editableData.lat||null===editableData.lat||isNaN(editableData.lat)||searchParams.append("lat",editableData.lat.toString()),void 0===editableData.long||null===editableData.long||isNaN(editableData.long)||searchParams.append("long",editableData.long.toString()),void 0===editableData.radius||null===editableData.radius||isNaN(editableData.radius)||searchParams.append("radius",editableData.radius.toString()),void 0===editableData.maxTaxes||null===editableData.maxTaxes||isNaN(editableData.maxTaxes)||searchParams.append("maxTaxes",editableData.maxTaxes.toString()),void 0!==editableData.minPrice&&null!==editableData.minPrice&&!isNaN(editableData.minPrice)&&editableData.minPrice>0&&searchParams.append("minPrice",editableData.minPrice.toString()),void 0===editableData.maxPrice||null===editableData.maxPrice||isNaN(editableData.maxPrice)||searchParams.append("maxPrice",editableData.maxPrice.toString());const url=`https://api.repliers.io/listings?${searchParams.toString()}`;console.log("🔍 Making comparables API request to:",url),console.log("📊 Search parameters:",Object.fromEntries(searchParams));const response=await fetch(url,{headers:{"REPLIERS-API-KEY":apiKey}});if(console.log("📡 Comparables response status:",response.status,response.statusText),!response.ok){const errorText=await response.text();throw console.error("❌ Comparables API Error:",errorText),new Error(`API request failed: ${response.status} ${response.statusText} - ${errorText}`)}const data=await response.json();console.log("📦 Comparables API Response:",data),console.log("📦 Response keys:",Object.keys(data)),console.log("📦 Response data type:",typeof data),data.data&&Array.isArray(data.data)&&(console.log("📦 Found data.data array with",data.data.length,"items"),data.data.length>0&&console.log("📦 First item in data.data:",JSON.stringify(data.data[0],null,2)));let comparableListings=[];if(data.data&&Array.isArray(data.data))comparableListings=data.data;else if(data.results&&Array.isArray(data.results))comparableListings=data.results;else if(data.listings&&Array.isArray(data.listings))comparableListings=data.listings;else if(data.items&&Array.isArray(data.items))comparableListings=data.items;else if(data.properties&&Array.isArray(data.properties))comparableListings=data.properties;else if(Array.isArray(data))comparableListings=data;else if(data.count>0)for(const key of Object.keys(data))if("object"==typeof data[key]&&null!==data[key]&&!["apiVersion","page","numPages","pageSize","count"].includes(key)){if(Array.isArray(data[key])){comparableListings=data[key];break}comparableListings=[data[key]];break}console.log("📋 Extracted comparable listings:",comparableListings),console.log("📋 Comparable listings count:",comparableListings.length),comparableListings.length>0&&console.log("🔍 First listing structure:",JSON.stringify(comparableListings[0],null,2));const formattedComparables=comparableListings.map(((listing,index)=>{var _listing_details,_listing_financials,_listing_details1,_listing_financials1,_listing_details2,_listing_details3,_listing_details4,_listing_details5,_listing_details6,_listing_details7,_listing_details8,_listing_details9,_listing_details10,_listing_details11;const listDate=listing.listDate||listing.soldDate||listing.closingDate;let imageUrl,daysOnMarket=null;if(listDate)try{const listedDate=new Date(listDate),timeDiff=(new Date).getTime()-listedDate.getTime();daysOnMarket=Math.floor(timeDiff/864e5),daysOnMarket<0&&(daysOnMarket=0)}catch(error){console.warn("Error calculating days on market:",error),daysOnMarket=listing.daysOnMarket||listing.dom||listing.daysonmarket||null}else daysOnMarket=listing.daysOnMarket||listing.dom||listing.daysonmarket||null;console.log(`🖼️ Debugging images for listing ${index}:`,{id:listing.mlsNumber||listing.id||listing.mls,imageFields:{images:listing.images,photos:listing.photos,media:listing.media,pictures:listing.pictures,attachments:listing.attachments,imageUrl:listing.imageUrl,image:listing.image,primaryPhoto:listing.primaryPhoto,photoUrl:listing.photoUrl,thumbnailUrl:listing.thumbnailUrl,mainImage:listing.mainImage,featuredImage:listing.featuredImage}});const imageSources=[listing.images,listing.photos,listing.media,listing.pictures,listing.attachments];for(const imageArray of imageSources)if(imageArray&&Array.isArray(imageArray)&&imageArray.length>0){const firstImage=imageArray[0];if(console.log("🖼️ Found image array with first image:",firstImage),"string"==typeof firstImage){imageUrl=firstImage.startsWith("http")?firstImage:`https://cdn.repliers.io/${firstImage}?class=small`,console.log("🖼️ Using string image URL:",imageUrl);break}if(firstImage&&"object"==typeof firstImage){const extractedUrl=firstImage.url||firstImage.src||firstImage.href||firstImage.link||firstImage.mediaUrl||firstImage.fullSizeUrl||firstImage.largePhotoUrl||firstImage.photoUrl;if(extractedUrl&&(imageUrl=extractedUrl.startsWith("http")?extractedUrl:`https://cdn.repliers.io/${extractedUrl}?class=small`),console.log("🖼️ Extracted from object:",{object:firstImage,extractedUrl,finalUrl:imageUrl}),imageUrl)break}}if(!imageUrl){const directProperties={imageUrl:listing.imageUrl,image:listing.image,primaryPhoto:listing.primaryPhoto,photoUrl:listing.photoUrl,thumbnailUrl:listing.thumbnailUrl,mainImage:listing.mainImage,featuredImage:listing.featuredImage};console.log("🖼️ Checking direct properties:",directProperties);const directImageUrl=listing.imageUrl||listing.image||listing.primaryPhoto||listing.photoUrl||listing.thumbnailUrl||listing.mainImage||listing.featuredImage;directImageUrl&&(imageUrl=directImageUrl.startsWith("http")?directImageUrl:`https://cdn.repliers.io/${directImageUrl}?class=small`,console.log("🖼️ Found direct property image:",imageUrl))}let propertyTaxes;if(console.log(`🖼️ Final imageUrl for listing ${index}:`,imageUrl),console.log(`💰 Debugging property taxes for listing ${index}:`,{id:listing.mlsNumber||listing.id,taxes:listing.taxes,propertyTaxes:listing.propertyTaxes,annualTaxes:listing.annualTaxes,yearlyTaxes:listing.yearlyTaxes,detailsTaxes:null===(_listing_details=listing.details)||void 0===_listing_details?void 0:_listing_details.taxes,financialsTaxes:null===(_listing_financials=listing.financials)||void 0===_listing_financials?void 0:_listing_financials.taxes,allTaxFields:{"listing.taxes":listing.taxes,"listing.propertyTaxes":listing.propertyTaxes,"listing.annualTaxes":listing.annualTaxes,"listing.yearlyTaxes":listing.yearlyTaxes,"listing.details.taxes":null===(_listing_details1=listing.details)||void 0===_listing_details1?void 0:_listing_details1.taxes,"listing.financials.taxes":null===(_listing_financials1=listing.financials)||void 0===_listing_financials1?void 0:_listing_financials1.taxes,"listing.details.propertyTaxes":null===(_listing_details2=listing.details)||void 0===_listing_details2?void 0:_listing_details2.propertyTaxes,"listing.details.annualTaxes":null===(_listing_details3=listing.details)||void 0===_listing_details3?void 0:_listing_details3.annualTaxes,"listing.taxInfo":listing.taxInfo,"listing.propertyTax":listing.propertyTax,"listing.tax":listing.tax,"listing.assessment":listing.assessment,"listing.assessments":listing.assessments}}),listing.taxes?propertyTaxes=listing.taxes.annual||listing.taxes.yearly||listing.taxes.total||listing.taxes.amount||listing.taxes.annualAmount||listing.taxes:listing.propertyTaxes?propertyTaxes=listing.propertyTaxes:listing.annualTaxes?propertyTaxes=listing.annualTaxes:listing.yearlyTaxes?propertyTaxes=listing.yearlyTaxes:listing.details&&listing.details.taxes?propertyTaxes=listing.details.taxes.annual||listing.details.taxes.yearly||listing.details.taxes.total||listing.details.taxes.amount||listing.details.taxes.annualAmount||listing.details.taxes:listing.financials&&listing.financials.taxes?propertyTaxes=listing.financials.taxes:(null===(_listing_details4=listing.details)||void 0===_listing_details4?void 0:_listing_details4.propertyTaxes)?propertyTaxes=listing.details.propertyTaxes:(null===(_listing_details5=listing.details)||void 0===_listing_details5?void 0:_listing_details5.annualTaxes)?propertyTaxes=listing.details.annualTaxes:listing.taxInfo?propertyTaxes=listing.taxInfo.annual||listing.taxInfo.amount||listing.taxInfo:listing.propertyTax?propertyTaxes=listing.propertyTax:listing.tax?propertyTaxes=listing.tax:listing.assessment?propertyTaxes=listing.assessment.taxes||listing.assessment.propertyTax||listing.assessment:listing.assessments&&Array.isArray(listing.assessments)&&listing.assessments.length>0&&(propertyTaxes=listing.assessments[0].taxes||listing.assessments[0].propertyTax),propertyTaxes&&"number"!=typeof propertyTaxes){const parsed=parseFloat(propertyTaxes);propertyTaxes=isNaN(parsed)?void 0:parsed}return console.log(`💰 Final property taxes for listing ${index}:`,propertyTaxes),{id:listing.mlsNumber||listing.id||listing.mls||`comparable-${index}`,address:formatAddress(listing.address),price:listing.listPrice||listing.price||listing.soldPrice||0,beds:(null===(_listing_details6=listing.details)||void 0===_listing_details6?void 0:_listing_details6.numBedrooms)||listing.beds||0,baths:(null===(_listing_details7=listing.details)||void 0===_listing_details7?void 0:_listing_details7.numBathrooms)||listing.baths||0,sqft:(null===(_listing_details8=listing.details)||void 0===_listing_details8?void 0:_listing_details8.sqft)||listing.sqft||0,pricePerSqft:listing.listPrice&&(null===(_listing_details9=listing.details)||void 0===_listing_details9?void 0:_listing_details9.sqft)?Math.round(listing.listPrice/listing.details.sqft):0,yearBuilt:(null===(_listing_details10=listing.details)||void 0===_listing_details10?void 0:_listing_details10.yearBuilt)||listing.yearBuilt||null,daysOnMarket,distance:0,lastSoldDate:listing.soldDate||listing.listDate||listing.closingDate||(new Date).toISOString(),propertyType:(null===(_listing_details11=listing.details)||void 0===_listing_details11?void 0:_listing_details11.propertyType)||listing.propertyType||"Unknown",imageUrl,propertyTaxes}}));setComparables(formattedComparables),setOriginalListings(comparableListings),null==onComparablesFound||onComparablesFound(formattedComparables),0===formattedComparables.length?setError("No comparable properties found with the current search criteria. Try adjusting your filters."):setTimeout((()=>{const resultsSection=document.querySelector("#comparable-results");resultsSection&&resultsSection.scrollIntoView({behavior:"smooth",block:"start"})}),100)}catch(err){console.error("💥 Error in handleFindComparables:",err),setError(err instanceof Error?err.message:"Failed to fetch comparable properties. Please try again.")}finally{setIsLoadingComparables(!1)}}else setError("API key is required to search for comparable properties.")},className:"space-y-6",children:[(0,jsx_runtime.jsx)(listing_by_address.C,{onListingSelected:listing=>{if(setSelectedListing(listing),listing){const extractedData=(listing=>{var _listing_details,_listing_details1,_listing_map,_listing_map1,_listing_map2,_listing_map3,_listing_details2,_listing_details3,_listing_details4,_listing_details5;const comparableData={};if((null===(_listing_details=listing.details)||void 0===_listing_details?void 0:_listing_details.numBedrooms)&&(comparableData.numBedrooms=listing.details.numBedrooms),(null===(_listing_details1=listing.details)||void 0===_listing_details1?void 0:_listing_details1.numBathrooms)&&(comparableData.numBathrooms=listing.details.numBathrooms),(null===(_listing_map=listing.map)||void 0===_listing_map?void 0:_listing_map.lat)?comparableData.lat=listing.map.lat:(null===(_listing_map1=listing.map)||void 0===_listing_map1?void 0:_listing_map1.latitude)&&(comparableData.lat=listing.map.latitude),(null===(_listing_map2=listing.map)||void 0===_listing_map2?void 0:_listing_map2.long)?comparableData.long=listing.map.long:(null===(_listing_map3=listing.map)||void 0===_listing_map3?void 0:_listing_map3.longitude)&&(comparableData.long=listing.map.longitude),(null===(_listing_details2=listing.details)||void 0===_listing_details2?void 0:_listing_details2.propertyType)&&(comparableData.propertyType=listing.details.propertyType),(null===(_listing_details3=listing.details)||void 0===_listing_details3?void 0:_listing_details3.sqft)&&(comparableData.sqft=listing.details.sqft),"object"==typeof listing.address&&null!==listing.address&&"city"in listing.address)comparableData.city=listing.address.city;else if("string"==typeof listing.address){const addressParts=listing.address.split(",");addressParts.length>=2&&(comparableData.city=addressParts[addressParts.length-2].trim())}let extractedType=listing.type||listing.listingType||listing.transactionType||(null===(_listing_details4=listing.details)||void 0===_listing_details4?void 0:_listing_details4.type)||(null===(_listing_details5=listing.details)||void 0===_listing_details5?void 0:_listing_details5.listingType)||"sale";return comparableData.type=extractedType.toLowerCase(),comparableData})(listing);let propertyTaxes;if(listing.taxes?propertyTaxes=listing.taxes.annualAmount||listing.taxes.annual||listing.taxes.yearly||listing.taxes.total||listing.taxes.amount||listing.taxes:listing.propertyTaxes?propertyTaxes=listing.propertyTaxes:listing.annualTaxes?propertyTaxes=listing.annualTaxes:listing.yearlyTaxes?propertyTaxes=listing.yearlyTaxes:listing.details&&listing.details.taxes?propertyTaxes=listing.details.taxes.annualAmount||listing.details.taxes.annual||listing.details.taxes.yearly||listing.details.taxes.total||listing.details.taxes.amount||listing.details.taxes:listing.financials&&listing.financials.taxes&&(propertyTaxes=listing.financials.taxes),propertyTaxes&&"number"!=typeof propertyTaxes){const parsed=parseFloat(propertyTaxes);propertyTaxes=isNaN(parsed)?void 0:parsed}const referencePrice=listing.soldPrice||listing.listPrice;setComparableData(extractedData);const newEditableData={...extractedData,radius:searchRadius,status:"A",lastStatus:void 0,type:extractedData.type,minBeds:extractedData.numBedrooms,maxBeds:extractedData.numBedrooms,minBaths:extractedData.numBathrooms,maxBaths:extractedData.numBathrooms,minSqft:extractedData.sqft?extractedData.sqft-100:void 0,maxSqft:extractedData.sqft?extractedData.sqft+100:void 0,maxTaxes:propertyTaxes?100*Math.ceil(propertyTaxes/100):void 0,minPrice:referencePrice?"lease"===extractedData.type?Math.max(1e3,100*Math.floor(.8*referencePrice/100)):Math.max(5e4,1e4*Math.floor(.8*referencePrice/1e4)):"lease"===extractedData.type?1e3:5e4,maxPrice:referencePrice?"lease"===extractedData.type?100*Math.ceil(referencePrice/100):1e4*Math.ceil(referencePrice/1e4):void 0};console.log("🔄 About to set editable data:",newEditableData),console.log("🔍 Key values being set:",{type:newEditableData.type,minPrice:newEditableData.minPrice,maxPrice:newEditableData.maxPrice,maxTaxes:newEditableData.maxTaxes,extractedType:extractedData.type,referencePrice,isLease:"lease"===extractedData.type}),setEditableData(newEditableData),console.log("🏠 Listing selected:",listing),console.log("📊 Comparable data extracted:",extractedData),console.log("💰 Reference price:",referencePrice),console.log("🏷️ Property taxes:",propertyTaxes),console.log("📝 Final editable data being set:",{...extractedData,type:extractedData.type,minPrice:referencePrice?"lease"===extractedData.type?Math.max(1e3,100*Math.floor(.8*referencePrice/100)):Math.max(5e4,1e4*Math.floor(.8*referencePrice/1e4)):"lease"===extractedData.type?1e3:5e4,maxPrice:referencePrice?"lease"===extractedData.type?100*Math.ceil(referencePrice/100):1e4*Math.ceil(referencePrice/1e4):void 0,maxTaxes:propertyTaxes?100*Math.ceil(propertyTaxes/100):void 0})}else setComparableData(null),setEditableData({radius:searchRadius});setComparables([]),setError(null),setHasSearched(!1)},showDetails:!1,className:"mb-6"}),selectedListing&&comparableData&&(0,jsx_runtime.jsxs)("div",{id:"selected-property-section",className:"border border-gray-200 rounded-lg p-4 bg-white shadow-sm",children:[(0,jsx_runtime.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Selected Property for Comparable Search"}),(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Property Details"}),(0,jsx_runtime.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("span",{className:"text-gray-600",children:"Address: "}),(0,jsx_runtime.jsx)("span",{className:"font-medium",children:formatAddress(selectedListing.address)})]}),selectedListing.listPrice&&(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("span",{className:"text-gray-600",children:"List Price: "}),(0,jsx_runtime.jsxs)("span",{className:"font-medium",children:["$",selectedListing.listPrice.toLocaleString()]})]}),selectedListing.soldPrice&&(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("span",{className:"text-gray-600",children:"Sold Price: "}),(0,jsx_runtime.jsxs)("span",{className:"font-bold text-md text-green-600",children:["$",selectedListing.soldPrice.toLocaleString()]})]}),selectedListing&&(()=>{let propertyTaxes;if(selectedListing.taxes?propertyTaxes=selectedListing.taxes.annualAmount||selectedListing.taxes.annual||selectedListing.taxes.yearly||selectedListing.taxes.total||selectedListing.taxes.amount||selectedListing.taxes:selectedListing.propertyTaxes?propertyTaxes=selectedListing.propertyTaxes:selectedListing.annualTaxes?propertyTaxes=selectedListing.annualTaxes:selectedListing.yearlyTaxes?propertyTaxes=selectedListing.yearlyTaxes:selectedListing.details&&selectedListing.details.taxes?propertyTaxes=selectedListing.details.taxes.annualAmount||selectedListing.details.taxes.annual||selectedListing.details.taxes.yearly||selectedListing.details.taxes.total||selectedListing.details.taxes.amount||selectedListing.details.taxes:selectedListing.financials&&selectedListing.financials.taxes&&(propertyTaxes=selectedListing.financials.taxes),propertyTaxes&&"number"!=typeof propertyTaxes){const parsed=parseFloat(propertyTaxes);propertyTaxes=isNaN(parsed)?void 0:parsed}return propertyTaxes?(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsxs)("span",{className:"text-gray-600",children:["Property Taxes:"," "]}),(0,jsx_runtime.jsxs)("span",{className:"font-medium",children:["$",propertyTaxes.toLocaleString(),"/year"]})]}):null})(),comparableData.numBedrooms&&(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("span",{className:"text-gray-600",children:"Bedrooms: "}),(0,jsx_runtime.jsx)("span",{className:"font-medium",children:comparableData.numBedrooms})]}),comparableData.numBathrooms&&(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("span",{className:"text-gray-600",children:"Bathrooms: "}),(0,jsx_runtime.jsx)("span",{className:"font-medium",children:comparableData.numBathrooms})]}),comparableData.sqft&&(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("span",{className:"text-gray-600",children:"Square Footage: "}),(0,jsx_runtime.jsx)("span",{className:"font-medium",children:comparableData.sqft.toLocaleString()})]}),comparableData.propertyType&&(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("span",{className:"text-gray-600",children:"Property Type: "}),(0,jsx_runtime.jsx)("span",{className:"font-medium",children:comparableData.propertyType})]}),comparableData.city&&(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("span",{className:"text-gray-600",children:"City: "}),(0,jsx_runtime.jsx)("span",{className:"font-medium",children:comparableData.city})]}),comparableData.type&&(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("span",{className:"text-gray-600",children:"Listing Type: "}),(0,jsx_runtime.jsx)("span",{className:"font-medium capitalize",children:comparableData.type})]}),comparableData.lat&&(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("span",{className:"text-gray-600",children:"Latitude: "}),(0,jsx_runtime.jsx)("span",{className:"font-medium",children:comparableData.lat.toFixed(6)})]}),comparableData.long&&(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("span",{className:"text-gray-600",children:"Longitude: "}),(0,jsx_runtime.jsx)("span",{className:"font-medium",children:comparableData.long.toFixed(6)})]})]})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Search Parameters"}),(0,jsx_runtime.jsxs)("div",{className:"space-y-4 text-sm",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h5",{className:"text-xs font-semibold text-gray-800 uppercase tracking-wide mb-2 border-b border-gray-200 pb-1",children:"Price/Financial Filters"}),(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("label",{className:"block text-gray-600 mb-1",children:"Min Price:"}),(0,jsx_runtime.jsxs)("div",{className:"relative",children:[(0,jsx_runtime.jsx)("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-sm",children:"$"}),(0,jsx_runtime.jsx)("input",{type:"number",value:editableData.minPrice||"",onChange:e=>setEditableData({...editableData,minPrice:e.target.value?Number(e.target.value):void 0}),className:"h-8 text-sm border border-gray-300 rounded-md pl-6 pr-2 w-full",min:"0",max:"1000000000",step:"100",placeholder:"500"})]})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("label",{className:"block text-gray-600 mb-1",children:"Max Price:"}),(0,jsx_runtime.jsxs)("div",{className:"relative",children:[(0,jsx_runtime.jsx)("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-sm",children:"$"}),(0,jsx_runtime.jsx)("input",{type:"number",value:editableData.maxPrice||"",onChange:e=>setEditableData({...editableData,maxPrice:e.target.value?Number(e.target.value):void 0}),className:"h-8 text-sm border border-gray-300 rounded-md pl-6 pr-2 w-full",min:"0",max:"1000000000",step:"100",placeholder:"1000000"})]})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("label",{className:"block text-gray-600 mb-1",children:"Max Property Taxes/year:"}),(0,jsx_runtime.jsxs)("div",{className:"relative",children:[(0,jsx_runtime.jsx)("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-sm",children:"$"}),(0,jsx_runtime.jsx)("input",{type:"number",value:editableData.maxTaxes||"",onChange:e=>setEditableData({...editableData,maxTaxes:e.target.value?Number(e.target.value):void 0}),className:"h-8 text-sm border border-gray-300 rounded-md pl-6 pr-2 w-full",min:"1000",max:"50000",step:"100",placeholder:"9000"})]})]})]})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h5",{className:"text-xs font-semibold text-gray-800 uppercase tracking-wide mb-2 border-b border-gray-200 pb-1",children:"Status/Type Filters"}),(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("label",{className:"block text-gray-600 mb-1",children:"Status:"}),(0,jsx_runtime.jsxs)("select",{value:editableData.status||"A",onChange:e=>{const newStatus=e.target.value||void 0;setEditableData({...editableData,status:newStatus,lastStatus:"A"===newStatus?void 0:editableData.lastStatus})},className:"h-8 text-sm border border-gray-300 rounded-md px-2 w-full",children:[(0,jsx_runtime.jsx)("option",{value:"A",children:"A - Available"}),(0,jsx_runtime.jsx)("option",{value:"U",children:"U - Unavailable (Sold/Leased)"})]})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("label",{className:"block text-gray-600 mb-1",children:"Last Status:"}),(0,jsx_runtime.jsxs)("select",{value:editableData.lastStatus||"",onChange:e=>setEditableData({...editableData,lastStatus:e.target.value||void 0}),disabled:"A"===editableData.status,className:"h-8 text-sm border border-gray-300 rounded-md px-2 w-full "+("A"===editableData.status?"bg-gray-100 text-gray-400 cursor-not-allowed":""),children:[(0,jsx_runtime.jsx)("option",{value:"",children:"Select Last Status"}),(0,jsx_runtime.jsx)("option",{value:"Sld",children:"Sld - Sold"}),(0,jsx_runtime.jsx)("option",{value:"Lsd",children:"Lsd - Leased"})]})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("label",{className:"block text-gray-600 mb-1",children:"Listing Type:"}),(0,jsx_runtime.jsxs)("select",{value:editableData.type||"sale",onChange:e=>setEditableData({...editableData,type:e.target.value||void 0}),className:"h-8 text-sm border border-gray-300 rounded-md px-2 w-full",children:[(0,jsx_runtime.jsx)("option",{value:"sale",children:"Sale"}),(0,jsx_runtime.jsx)("option",{value:"lease",children:"Lease"})]})]})]})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h5",{className:"text-xs font-semibold text-gray-800 uppercase tracking-wide mb-2 border-b border-gray-200 pb-1",children:"Property Characteristics"}),(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("label",{className:"block text-gray-600 mb-1",children:"Property Type:"}),(0,jsx_runtime.jsxs)("select",{value:editableData.propertyType||"",onChange:e=>setEditableData({...editableData,propertyType:e.target.value||void 0}),disabled:isLoadingPropertyTypes,className:"h-8 text-sm border border-gray-300 rounded-md px-2 w-full "+(isLoadingPropertyTypes?"bg-gray-100 text-gray-400":""),children:[(0,jsx_runtime.jsx)("option",{value:"",children:isLoadingPropertyTypes?"Loading...":"Select Property Type"}),propertyTypes.map((type=>(0,jsx_runtime.jsx)("option",{value:type,children:type},type)))]})]}),(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("label",{className:"block text-gray-600 mb-1",children:"Min Beds:"}),(0,jsx_runtime.jsx)(input.I,{type:"number",value:editableData.minBeds||"",onChange:e=>setEditableData({...editableData,minBeds:e.target.value?Number(e.target.value):void 0}),className:"h-8 text-sm",min:"0",max:"20"})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("label",{className:"block text-gray-600 mb-1",children:"Max Beds:"}),(0,jsx_runtime.jsx)(input.I,{type:"number",value:editableData.maxBeds||"",onChange:e=>setEditableData({...editableData,maxBeds:e.target.value?Number(e.target.value):void 0}),className:"h-8 text-sm",min:"0",max:"20"})]})]}),(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("label",{className:"block text-gray-600 mb-1",children:"Min Baths:"}),(0,jsx_runtime.jsx)(input.I,{type:"number",value:editableData.minBaths||"",onChange:e=>setEditableData({...editableData,minBaths:e.target.value?Number(e.target.value):void 0}),className:"h-8 text-sm",min:"0",max:"20",step:"0.5"})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("label",{className:"block text-gray-600 mb-1",children:"Max Baths:"}),(0,jsx_runtime.jsx)(input.I,{type:"number",value:editableData.maxBaths||"",onChange:e=>setEditableData({...editableData,maxBaths:e.target.value?Number(e.target.value):void 0}),className:"h-8 text-sm",min:"0",max:"20",step:"0.5"})]})]}),(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("label",{className:"block text-gray-600 mb-1",children:"Min Sqft:"}),(0,jsx_runtime.jsx)(input.I,{type:"number",value:editableData.minSqft||"",onChange:e=>setEditableData({...editableData,minSqft:e.target.value?Number(e.target.value):void 0}),className:"h-8 text-sm",min:"0",max:"50000"})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("label",{className:"block text-gray-600 mb-1",children:"Max Sqft:"}),(0,jsx_runtime.jsx)(input.I,{type:"number",value:editableData.maxSqft||"",onChange:e=>setEditableData({...editableData,maxSqft:e.target.value?Number(e.target.value):void 0}),className:"h-8 text-sm",min:"0",max:"50000"})]})]})]})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h5",{className:"text-xs font-semibold text-gray-800 uppercase tracking-wide mb-2 border-b border-gray-200 pb-1",children:"Location Parameters"}),(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("label",{className:"block text-gray-600 mb-1",children:"City:"}),(0,jsx_runtime.jsx)(input.I,{type:"text",value:editableData.city||"",onChange:e=>setEditableData({...editableData,city:e.target.value||void 0}),className:"h-8 text-sm"})]}),(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("label",{className:"block text-gray-600 mb-1",children:"Latitude:"}),(0,jsx_runtime.jsx)(input.I,{type:"number",value:void 0!==editableData.lat?editableData.lat.toFixed(6):"",onChange:e=>setEditableData({...editableData,lat:e.target.value?Number(e.target.value):void 0}),className:"h-8 text-sm",step:"0.000001",min:"-90",max:"90"})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("label",{className:"block text-gray-600 mb-1",children:"Longitude:"}),(0,jsx_runtime.jsx)(input.I,{type:"number",value:void 0!==editableData.long?editableData.long.toFixed(6):"",onChange:e=>setEditableData({...editableData,long:e.target.value?Number(e.target.value):void 0}),className:"h-8 text-sm",step:"0.000001",min:"-180",max:"180"})]})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("label",{className:"block text-gray-600 mb-1",children:"Search Radius (km):"}),(0,jsx_runtime.jsx)(input.I,{type:"number",value:editableData.radius||"",onChange:e=>setEditableData({...editableData,radius:e.target.value?Number(e.target.value):void 0}),className:"h-8 text-sm",min:"1",max:"100",step:"1"})]})]})]})]})]})]})]}),selectedListing&&editableData&&(0,jsx_runtime.jsx)("div",{className:"flex justify-center",children:(0,jsx_runtime.jsx)(ui_button.z,{type:"submit",disabled:isLoadingComparables,className:"px-8 py-2",children:isLoadingComparables?"Searching...":"Find Comparables"})}),error&&(0,jsx_runtime.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,jsx_runtime.jsx)("p",{className:"text-red-800",children:error})}),isLoadingComparables&&(0,jsx_runtime.jsxs)("div",{className:"text-center py-8",children:[(0,jsx_runtime.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,jsx_runtime.jsx)("p",{className:"mt-2 text-gray-600",children:"Searching for comparable properties..."})]}),comparables.length>0&&!isLoadingComparables&&(0,jsx_runtime.jsxs)("div",{id:"comparable-results",className:"space-y-4",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between",children:[(0,jsx_runtime.jsxs)("h3",{className:"text-xl font-semibold",children:["Comparable Properties (",comparables.length,")"]}),(0,jsx_runtime.jsxs)("p",{className:"text-sm text-gray-600",children:["Within ",editableData.radius||searchRadius," km"]})]}),(0,jsx_runtime.jsx)("p",{className:"text-sm text-blue-600 bg-blue-50 p-2 rounded-lg border border-blue-200",children:"💡 Click on any property card to view detailed information in a new tab"}),(0,jsx_runtime.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:comparables.map((property=>{return console.log(`🏠 Property ${property.id} UI render - propertyTaxes:`,property.propertyTaxes,"Should show:",!!property.propertyTaxes),(0,jsx_runtime.jsxs)("div",{className:"bg-white border border-gray-200 rounded p-3 hover:shadow-md transition-all duration-200 hover:border-blue-300 cursor-pointer relative group",onClick:()=>(property=>{const originalListing=originalListings.find((listing=>(listing.mlsNumber||listing.id||`comparable-${originalListings.indexOf(listing)}`)===property.id));if(!originalListing)return void console.error("Could not find original listing data for property:",property.id);const detailWindow=window.open("","_blank");if(!detailWindow)return void alert("Please allow popups to view detailed property information");const htmlContent=`\n      <!DOCTYPE html>\n      <html lang="en">\n      <head>\n        <meta charset="UTF-8">\n        <meta name="viewport" content="width=device-width, initial-scale=1.0">\n        <title>Property Details - ${formatAddress(originalListing.address)}</title>\n        <script src="https://unpkg.com/react@18/umd/react.development.js"><\/script>\n        <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"><\/script>\n        <script src="https://unpkg.com/@babel/standalone/babel.min.js"><\/script>\n        <script src="https://cdn.tailwindcss.com"><\/script>\n      </head>\n      <body class="bg-gray-50 p-4">\n        <div id="root"></div>\n        <script type="text/babel">\n          const { useState } = React;\n          \n          // This is a simplified version of PropertyDetailsDisplay for the new tab\n          function PropertyDetailsDisplay({ listing }) {\n            const [selectedImage, setSelectedImage] = useState(null);\n\n            const formatPrice = (price) => {\n              return '$' + price.toLocaleString();\n            };\n\n            const formatAddress = (address) => {\n              if (typeof address === "string") return address;\n              if (typeof address === "object" && address !== null) {\n                const parts = [];\n                if (address.streetNumber) parts.push(address.streetNumber);\n                if (address.streetName) parts.push(address.streetName);\n                if (address.streetSuffix) parts.push(address.streetSuffix);\n                if (address.city) parts.push(address.city);\n                if (address.state) parts.push(address.state);\n                if (address.zip || address.postalCode) parts.push(address.zip || address.postalCode);\n                return parts.length > 0 ? parts.join(" ") : "Address not available";\n              }\n              return "Address not available";\n            };\n\n            const validFieldCount = Object.entries(listing).filter(\n              ([, value]) => value !== null && value !== undefined\n            ).length;\n\n            return React.createElement('div', { className: 'max-w-6xl mx-auto' },\n              React.createElement('div', { \n                className: 'border border-gray-200 rounded-lg p-6 bg-white shadow-sm' \n              },\n                React.createElement('div', { \n                  className: 'flex items-start justify-between mb-4' \n                },\n                  React.createElement('div', {},\n                    React.createElement('h3', { \n                      className: 'text-lg font-semibold text-gray-900 mb-1' \n                    }, 'Property Details'),\n                    React.createElement('p', { \n                      className: 'text-sm text-gray-500' \n                    }, formatAddress(listing.address))\n                  ),\n                  listing.status && React.createElement('span', { \n                    className: 'px-3 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full' \n                  }, listing.status === "A" ? "Available" : listing.status === "U" ? "Sold" : listing.status)\n                ),\n                React.createElement('div', { className: 'space-y-6' },\n                  React.createElement('details', { className: 'group', open: true },\n                    React.createElement('summary', { \n                      className: 'cursor-pointer text-sm font-medium text-gray-700 hover:text-gray-900' \n                    }, \`🔍 Complete Property Information (Click to expand) - \${validFieldCount} fields\`),\n                    React.createElement('div', { \n                      className: 'mt-4 grid grid-cols-1 md:grid-cols-2 gap-4' \n                    },\n                      Object.entries(listing).map(([key, value]) => {\n                        if (value === null || value === undefined) return null;\n                        \n                        let displayValue;\n                        if (typeof value === "object") {\n                          if (key === "address") {\n                            displayValue = formatAddress(value);\n                          } else if (Array.isArray(value)) {\n                            displayValue = value.join(", ");\n                          } else {\n                            displayValue = JSON.stringify(value, null, 2);\n                          }\n                        } else if (typeof value === "number" && (key.includes("price") || key.includes("Price"))) {\n                          displayValue = formatPrice(value);\n                        } else if (typeof value === "number" && key.includes("sqft")) {\n                          displayValue = value.toLocaleString() + " sqft";\n                        } else if (typeof value === "boolean") {\n                          displayValue = value ? "Yes" : "No";\n                        } else {\n                          displayValue = String(value);\n                        }\n                        \n                        const displayKey = key.replace(/([A-Z])/g, " $1").replace(/^./, str => str.toUpperCase());\n                        \n                        return React.createElement('div', { \n                          key: key, \n                          className: 'border-l-2 border-blue-200 pl-3' \n                        },\n                          React.createElement('div', { \n                            className: 'text-xs font-medium text-gray-500 uppercase tracking-wide' \n                          }, displayKey),\n                          React.createElement('div', { \n                            className: 'text-sm font-medium text-gray-900 mt-1 break-words' \n                          },\n                            typeof value === "object" && !Array.isArray(value) && key !== "address" \n                              ? React.createElement('pre', { \n                                  className: 'text-xs bg-gray-50 p-2 rounded overflow-auto max-h-32' \n                                }, displayValue)\n                              : React.createElement('span', {}, displayValue)\n                          )\n                        );\n                      }).filter(Boolean)\n                    )\n                  )\n                )\n              )\n            );\n          }\n\n          const listing = ${JSON.stringify(originalListing)};\n          const root = ReactDOM.createRoot(document.getElementById('root'));\n          root.render(React.createElement(PropertyDetailsDisplay, { listing: listing }));\n        <\/script>\n      </body>\n      </html>\n    `;detailWindow.document.write(htmlContent),detailWindow.document.close()})(property),title:"Click to view detailed property information in a new tab",children:[(0,jsx_runtime.jsx)("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:(0,jsx_runtime.jsx)("div",{className:"bg-blue-600 text-white p-1 rounded-full",children:(0,jsx_runtime.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,jsx_runtime.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})})}),(0,jsx_runtime.jsxs)("div",{className:"flex gap-3",children:[(0,jsx_runtime.jsx)("div",{className:"w-2/5 flex-shrink-0",children:(0,jsx_runtime.jsx)("div",{className:"w-full aspect-square rounded overflow-hidden bg-gray-100 flex items-center justify-center",children:property.imageUrl?(0,jsx_runtime.jsx)("img",{src:property.imageUrl,alt:"Property",className:"w-full h-full object-cover",onLoad:()=>{console.log(`✅ Image loaded successfully for property ${property.id}:`,property.imageUrl)},onError:e=>{console.log(`❌ Image failed to load for property ${property.id}:`,property.imageUrl);const target=e.target;target.style.display="none";const parent=target.parentElement;parent&&(parent.innerHTML='\n                                  <svg className="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />\n                                  </svg>\n                                ')}}):(0,jsx_runtime.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,jsx_runtime.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})})}),(0,jsx_runtime.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,jsx_runtime.jsxs)("div",{className:"mb-2",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,jsx_runtime.jsx)("p",{className:"text-lg font-bold text-green-600",children:formatPrice(property.price)}),(0,jsx_runtime.jsx)("span",{className:"px-1.5 py-0.5 text-xs font-medium bg-blue-100 text-blue-800 rounded",children:property.propertyType})]}),(0,jsx_runtime.jsx)("h4",{className:"text-sm font-semibold text-gray-900 leading-tight break-words",children:formatAddress(property.address)})]}),(0,jsx_runtime.jsxs)("div",{className:"space-y-0.5 text-xs",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)("span",{className:"text-gray-600 min-w-fit",children:"Beds/Baths:"}),(0,jsx_runtime.jsxs)("span",{className:"font-medium text-gray-900",children:[property.beds," bed, ",property.baths," bath"]})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)("span",{className:"text-gray-600 min-w-fit",children:"Square Feet:"}),(0,jsx_runtime.jsx)("span",{className:"font-medium text-gray-900",children:property.sqft?property.sqft.toLocaleString():"N/A"})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)("span",{className:"text-gray-600 min-w-fit",children:"Listed Date:"}),(0,jsx_runtime.jsx)("span",{className:"font-medium text-gray-900",children:(dateString=property.lastSoldDate,new Date(dateString).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}))})]}),property.propertyTaxes?(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)("span",{className:"text-gray-600 min-w-fit",children:"Property Taxes:"}),(0,jsx_runtime.jsxs)("span",{className:"font-medium text-gray-900",children:[formatPrice(property.propertyTaxes),"/yr"]})]}):(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)("span",{className:"text-gray-600 min-w-fit",children:"Property Taxes:"}),(0,jsx_runtime.jsx)("span",{className:"font-medium text-gray-500",children:"Not available"})]})]})]})]})]},property.id);var dateString}))})]}),0===comparables.length&&!isLoadingComparables&&selectedListing&&hasSearched&&null===error&&(0,jsx_runtime.jsx)("div",{className:"text-center py-8",children:(0,jsx_runtime.jsxs)("p",{className:"text-gray-600",children:["No comparable properties found within"," ",editableData.radius||searchRadius," km. Try increasing the search radius."]})})]})})}ComparablesByAddressSearch.__docgenInfo={description:"ComparablesByAddressSearch Component\n\n@description A component that allows users to search for comparable properties by address using Google Places API\n@param props - The component props\n@returns JSX.Element",methods:[],displayName:"ComparablesByAddressSearch",props:{className:{required:!1,tsType:{name:"string"},description:""},onComparablesFound:{required:!1,tsType:{name:"signature",type:"function",raw:"(comparables: ComparableProperty[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"ComparableProperty"}],raw:"ComparableProperty[]"},name:"comparables"}],return:{name:"void"}}},description:""},searchRadius:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"2.0",computed:!1}}}};const comparables_by_address_search_stories={title:"POCS/Comparables/ComparablesByAddressSearch",component:ComparablesByAddressSearch,parameters:{layout:"padded",docs:{description:{component:"A comprehensive component for searching comparable properties by address using Google Places API integration."}}},tags:["autodocs"],argTypes:{className:{control:"text",description:"Additional CSS classes to apply to the component"},onComparablesFound:{action:"comparables-found",description:"Callback function called when comparable properties are found"},searchRadius:{control:{type:"number",min:.1,max:5,step:.1},description:"Search radius in miles"}}},Default={args:{searchRadius:2},decorators:[Story=>(0,jsx_runtime.jsx)("div",{className:"max-w-4xl mx-auto p-6",children:(0,jsx_runtime.jsx)(Story,{})})],parameters:{docs:{description:{story:"The default configuration with standard search parameters. Users can search for an address and find comparable properties within 2 km."}}}},__namedExportsOrder=["Default"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:'{\n  args: {\n    searchRadius: 2.0\n  },\n  decorators: [Story => <div className="max-w-4xl mx-auto p-6">\n        <Story />\n      </div>],\n  parameters: {\n    docs: {\n      description: {\n        story: "The default configuration with standard search parameters. Users can search for an address and find comparable properties within 2 km."\n      }\n    }\n  }\n}',...Default.parameters?.docs?.source}}}}}]);