import{j as t}from"./jsx-runtime-xF634gn_.js";import{r as l}from"./index-C-7etoUd.js";import{m as _e}from"./mapbox-gl-vCdO7wfF.js";import{B as Kt,C as Zt}from"./car-CJRJwKAe.js";import{B as Gt}from"./bath-D_6pRDEi.js";import{X as $t}from"./x-C6fJ-1bL.js";import{C as we}from"./chevron-down-BzbnjZNy.js";const Xt=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),Jt=e=>{if(!e)return"N/A";const n=e.numBedrooms,u=e.numBedroomsPlus;return n&&u&&u>0?`${n} + ${u}`:(n==null?void 0:n.toString())||"N/A"},Vt=e=>{if(!e)return"N/A";const n=e.numBathrooms,u=e.numBathroomsPlus;return n&&u&&u>0?`${n} + ${u}`:(n==null?void 0:n.toString())||"N/A"},Qt=e=>{var n;return e&&((n=e.numGarageSpaces)==null?void 0:n.toString())||"N/A"},er=(e,n)=>n==="New"||n==="Pc"||n==="Ext"?e==="Sale"?"For Sale":e==="Lease"?"For Lease":e||null:n?{Sus:"Suspended",Exp:"Expired",Sld:"Sold",Ter:"Terminated",Dft:"Deal Fell Through",Lsd:"Leased",Sc:"Sold Conditionally",Sce:"Sold Conditionally (Escape Clause)",Lc:"Leased Conditionally",Cs:"Coming Soon"}[n]||n:null,tr=e=>{if(!e)return"Address not available";const u=[e.streetNumber,e.streetDirection,e.streetName,e.streetSuffix].filter(Boolean).join(" "),m=[e.city,e.state].filter(Boolean).join(", ");return[u,m].filter(Boolean).join(", ")},Rt=({type:e,lastStatus:n,size:u="sm"})=>{const m=er(e,n);if(!m)return null;let x="bg-green-100 text-green-600";switch(m){case"For Sale":x="bg-green-100 text-green-600";break;case"For Lease":x="bg-purple-100 text-purple-600";break;case"Sold":x="bg-blue-100 text-blue-600";break;case"Leased":x="bg-purple-100 text-purple-600";break;case"Sold Conditionally":case"Sold Conditionally (Escape Clause)":case"Leased Conditionally":x="bg-amber-100 text-amber-600";break;case"Coming Soon":x="bg-indigo-100 text-indigo-600";break;case"Suspended":x="bg-orange-100 text-orange-600";break;case"Expired":x="bg-gray-100 text-gray-500";break;case"Terminated":case"Deal Fell Through":x="bg-red-100 text-red-600";break;default:x="bg-gray-100 text-gray-500"}const c=u==="xs"?"text-xs":"text-sm";return t.jsx("span",{className:`${c} px-2 py-1 rounded-md font-medium ${x}`,children:m})};Rt.__docgenInfo={description:"",methods:[],displayName:"StatusTag",props:{type:{required:!1,tsType:{name:"string"},description:""},lastStatus:{required:!1,tsType:{name:"string"},description:""},size:{required:!1,tsType:{name:"union",raw:'"xs" | "sm"',elements:[{name:"literal",value:'"xs"'},{name:"literal",value:'"sm"'}]},description:"",defaultValue:{value:'"sm"',computed:!1}}}};function Ve({listing:e,onClick:n}){var u,m;return t.jsx("div",{className:"p-4 cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:n,children:t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"bg-gray-100 rounded-md overflow-hidden flex-shrink-0 h-20 aspect-[4/3]",children:(u=e.images)!=null&&u[0]?t.jsx("img",{src:`https://cdn.repliers.io/${e.images[0]}?class=small`,alt:"Property",className:"object-cover w-full h-full"}):t.jsx("div",{className:"flex items-center justify-center h-full text-gray-400 text-sm",children:"No Image"})}),t.jsxs("div",{className:"flex-grow min-w-0",children:[t.jsxs("div",{className:"flex justify-between items-start mb-2",children:[t.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[t.jsx("h4",{className:"font-semibold text-gray-800 truncate text-base",children:e.listPrice?Xt(e.listPrice):"Price N/A"}),t.jsx("span",{className:"text-gray-400 text-sm",children:"|"}),t.jsx("span",{className:"text-gray-600 truncate text-sm",children:e.mlsNumber})]}),t.jsx("div",{className:"flex-shrink-0 ml-2",children:t.jsx(Rt,{type:e.type,lastStatus:e.lastStatus,size:"sm"})})]}),t.jsx("p",{className:"text-gray-600 leading-relaxed text-sm mb-2",children:tr(e.address)}),t.jsxs("div",{className:"flex items-center text-gray-500 space-x-3 flex-wrap text-sm",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(Kt,{className:"w-4 h-4"}),Jt(e.details)]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(Gt,{className:"w-4 h-4"}),Vt(e.details)]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(Zt,{className:"w-4 h-4"}),Qt(e.details)]}),((m=e.details)==null?void 0:m.propertyType)&&t.jsxs("span",{className:"text-gray-400",children:["| ",e.details.propertyType]})]})]})]})})}Ve.__docgenInfo={description:"",methods:[],displayName:"ListingPreview",props:{listing:{required:!0,tsType:{name:"ListingResult"},description:""},onClick:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};function Ft({open:e,onClose:n,listing:u,position:m,mapContainer:x}){const c=l.useRef(null),[f,A]=l.useState({x:0,y:0}),[b,N]=l.useState("bottom"),[d,k]=l.useState(!1);if(l.useEffect(()=>{k(!1)},[e]),l.useEffect(()=>{if(!e||!c.current||!x)return;const v=c.current.getBoundingClientRect(),w=m.x,h=m.y,y=450,C=v.height||200,R=16,I=window.innerWidth,M=window.innerHeight;let o=w-y/2,p=h-C-16,L="bottom";o<R?o=R:o+y>I-R&&(o=I-y-R),p<R&&(p=h+32,L="top"),p+C>M-R&&(w>I/2?(o=w-y-16,p=h-C/2,L="right"):(o=w+16,p=h-C/2,L="left"),p<R&&(p=R),p+C>M-R&&(p=M-C-R)),A({x:o,y:p}),N(L),k(!0)},[e,m,x]),l.useEffect(()=>{const g=v=>{c.current&&!c.current.contains(v.target)&&n()};return e&&document.addEventListener("mousedown",g),()=>{document.removeEventListener("mousedown",g)}},[e,n]),!e||!u)return null;const z=()=>{const g="absolute w-3 h-3 bg-white transform rotate-45 border";switch(b){case"bottom":return`${g} -bottom-1.5 left-1/2 -translate-x-1/2 border-r border-b border-gray-200`;case"top":return`${g} -top-1.5 left-1/2 -translate-x-1/2 border-l border-t border-gray-200`;case"left":return`${g} -left-1.5 top-1/2 -translate-y-1/2 border-l border-b border-gray-200`;case"right":return`${g} -right-1.5 top-1/2 -translate-y-1/2 border-r border-t border-gray-200`;default:return`${g} -bottom-1.5 left-1/2 -translate-x-1/2 border-r border-b border-gray-200`}};return t.jsx("div",{ref:c,className:"fixed w-[450px]",style:{zIndex:9999,left:`${f.x}px`,top:`${f.y}px`,visibility:d?"visible":"hidden",opacity:d?1:0,transition:"opacity 150ms ease-in-out"},children:t.jsxs("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden relative",children:[t.jsx("div",{className:z()}),t.jsx("button",{onClick:n,className:"absolute top-2 right-2 z-10 p-1 rounded-full bg-white hover:bg-gray-100 transition-colors shadow-sm border border-gray-200","aria-label":"Close",children:t.jsx($t,{size:16,className:"text-gray-600"})}),t.jsx(Ve,{listing:u,onClick:()=>{}})]})})}Ft.__docgenInfo={description:"",methods:[],displayName:"PropertyTooltip",props:{open:{required:!0,tsType:{name:"boolean"},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},listing:{required:!0,tsType:{name:"union",raw:"ListingResult | null",elements:[{name:"ListingResult"},{name:"null"}]},description:""},position:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  x: number;
  y: number;
}`,signature:{properties:[{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]}},description:""},mapContainer:{required:!0,tsType:{name:"union",raw:"HTMLElement | null",elements:[{name:"HTMLElement"},{name:"null"}]},description:""}}};function zt({open:e,onClose:n,properties:u,position:m,mapContainer:x}){const c=l.useRef(null),[f,A]=l.useState({x:0,y:0}),[b,N]=l.useState("bottom"),[d,k]=l.useState(!1);if(l.useEffect(()=>{if(!e){k(!1);return}},[e]),l.useEffect(()=>{if(!e||!x)return;const g=m.x,v=m.y,w=480,h=Math.min(u.length*120+80,400),y=16,C=window.innerWidth,R=window.innerHeight;let I=g-w/2,M=v-h-16,o="bottom";I<y?I=y:I+w>C-y&&(I=C-w-y),M<y&&(M=v+32,o="top"),M+h>R-y&&(g>C/2?(I=g-w-16,M=v-h/2,o="right"):(I=g+16,M=v-h/2,o="left"),M<y&&(M=y),M+h>R-y&&(M=R-h-y)),A({x:I,y:M}),N(o),k(!0)},[e,m,x,u.length]),l.useEffect(()=>{const g=v=>{c.current&&!c.current.contains(v.target)&&n()};return e&&document.addEventListener("mousedown",g),()=>{document.removeEventListener("mousedown",g)}},[e,n]),!e||u.length===0)return null;const z=()=>{const g="absolute w-3 h-3 bg-white transform rotate-45 border";switch(b){case"bottom":return`${g} -bottom-1.5 left-1/2 -translate-x-1/2 border-r border-b border-gray-200`;case"top":return`${g} -top-1.5 left-1/2 -translate-x-1/2 border-l border-t border-gray-200`;case"left":return`${g} -left-1.5 top-1/2 -translate-y-1/2 border-l border-b border-gray-200`;case"right":return`${g} -right-1.5 top-1/2 -translate-y-1/2 border-r border-t border-gray-200`;default:return`${g} -bottom-1.5 left-1/2 -translate-x-1/2 border-r border-b border-gray-200`}};return t.jsx("div",{ref:c,className:"fixed w-[480px]",style:{zIndex:9999,left:`${f.x}px`,top:`${f.y}px`,visibility:d?"visible":"hidden",opacity:d?1:0,transition:"opacity 150ms ease-in-out"},children:t.jsxs("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden relative",children:[t.jsx("div",{className:z()}),t.jsxs("div",{className:"px-4 py-3 border-b border-gray-100 bg-gray-50 relative",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:u.length===1?"1 Property":`${u.length} Properties`}),t.jsx("button",{onClick:n,className:"absolute top-2 right-2 p-1 rounded-full bg-white hover:bg-gray-100 transition-colors shadow-sm border border-gray-200","aria-label":"Close",children:t.jsx($t,{size:16,className:"text-gray-600"})})]}),t.jsx("div",{className:"max-h-[400px] overflow-y-auto",children:u.map((g,v)=>t.jsx("div",{className:"border-b border-gray-100 last:border-b-0",children:t.jsx(Ve,{listing:g,onClick:()=>{}})},`${g.mlsNumber}-${v}`))})]})})}zt.__docgenInfo={description:"",methods:[],displayName:"ClusterTooltip",props:{open:{required:!0,tsType:{name:"boolean"},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},properties:{required:!0,tsType:{name:"Array",elements:[{name:"ListingResult"}],raw:"ListingResult[]"},description:""},position:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  x: number;
  y: number;
}`,signature:{properties:[{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]}},description:""},mapContainer:{required:!0,tsType:{name:"union",raw:"HTMLElement | null",elements:[{name:"HTMLElement"},{name:"null"}]},description:""}}};function Bt({filters:e,onFiltersChange:n,apiKey:u}){const[m,x]=l.useState([]),[c,f]=l.useState(!0),[A,b]=l.useState(!1);l.useEffect(()=>{(async()=>{var v,w;try{const h=new URL("https://api.repliers.io/listings");h.searchParams.set("aggregates","details.propertyType"),h.searchParams.set("listings","false"),h.searchParams.set("status","A");const y=await fetch(h.toString(),{headers:{"REPLIERS-API-KEY":u,"Content-Type":"application/json"}});if(!y.ok)throw new Error(`Failed to fetch property types: ${y.status}`);const R=((w=(v=(await y.json()).aggregates)==null?void 0:v.details)==null?void 0:w.propertyType)||{},I=Object.entries(R).sort(([,M],[,o])=>o-M).map(([M])=>M);x(I)}catch{}finally{f(!1)}})()},[u]);const N=g=>{const w=e.propertyTypes.includes(g)?e.propertyTypes.filter(h=>h!==g):[...e.propertyTypes,g];n({...e,propertyTypes:w})},d=()=>{const g=e.propertyTypes.length===m.length;n({...e,propertyTypes:g?[]:[...m]})};if(c)return t.jsx("div",{style:{position:"relative",marginBottom:"12px"},children:t.jsx("div",{style:{padding:"8px 12px",fontSize:"12px",color:"#6b7280",fontStyle:"italic"},children:"Loading property types..."})});const k=e.propertyTypes.length===0||e.propertyTypes.length===m.length,z=e.propertyTypes.length>0&&e.propertyTypes.length<m.length;return t.jsxs("div",{style:{position:"relative",marginBottom:"12px"},children:[t.jsxs("button",{onClick:()=>b(!A),style:{width:"100%",padding:"8px 12px",backgroundColor:"white",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",textAlign:"left"},children:[t.jsx("span",{children:k?"All property types":z?`${e.propertyTypes.length} selected`:"Select property types"}),t.jsx(we,{size:16,style:{transform:A?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"}})]}),A&&t.jsxs("div",{style:{position:"absolute",top:"100%",left:0,right:0,backgroundColor:"white",border:"1px solid #d1d5db",borderRadius:"6px",marginTop:"4px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1002,maxHeight:"300px",overflowY:"auto"},children:[t.jsxs("div",{onClick:d,style:{padding:"8px 12px",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",backgroundColor:k?"#f3f4f6":"white",borderBottom:"1px solid #f3f4f6"},onMouseEnter:g=>{k||(g.currentTarget.style.backgroundColor="#f9fafb")},onMouseLeave:g=>{k||(g.currentTarget.style.backgroundColor="white")},children:[t.jsx("div",{style:{width:"16px",height:"16px",border:"2px solid #d1d5db",borderRadius:"3px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:k?"#10b981":"white",borderColor:k?"#10b981":"#d1d5db"},children:k&&t.jsx("svg",{width:"10",height:"8",viewBox:"0 0 10 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{d:"M8.5 1L3.5 6L1.5 4",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),"All property types"]}),m.map(g=>{const v=e.propertyTypes.includes(g);return t.jsxs("div",{onClick:()=>N(g),style:{padding:"8px 12px",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",backgroundColor:v?"#f3f4f6":"white"},onMouseEnter:w=>{v||(w.currentTarget.style.backgroundColor="#f9fafb")},onMouseLeave:w=>{v||(w.currentTarget.style.backgroundColor="white")},children:[t.jsx("div",{style:{width:"16px",height:"16px",border:"2px solid #d1d5db",borderRadius:"3px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:v?"#10b981":"white",borderColor:v?"#10b981":"#d1d5db"},children:v&&t.jsx("svg",{width:"10",height:"8",viewBox:"0 0 10 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{d:"M8.5 1L3.5 6L1.5 4",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),g]},g)})]})]})}Bt.__docgenInfo={description:"",methods:[],displayName:"PropertyTypeFilter",props:{filters:{required:!0,tsType:{name:"MapFilters"},description:""},onFiltersChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(filters: MapFilters) => void",signature:{arguments:[{type:{name:"MapFilters"},name:"filters"}],return:{name:"void"}}},description:""},apiKey:{required:!0,tsType:{name:"string"},description:""}}};function Ot({isOpen:e,initialMin:n,initialMax:u,onApply:m,onCancel:x,priceBreakpoints:c=[0,5e5,1e6,2e6,4e6,1/0]}){const[f,A]=l.useState(n),[b,N]=l.useState(u),[d,k]=l.useState(null),z=l.useRef(null);l.useEffect(()=>{A(n),N(u)},[e,n,u]);const g=l.useCallback(o=>{if(o===null||o===1/0)return"Max";if(o===0)return"$0";if(o>=1e6){const p=o/1e6;return p>=10?`$${Math.round(p)}M`:`$${Math.round(p*10)/10}M`}if(o>=1e3){const p=o/1e3;return`$${Math.round(p)}K`}return`$${Math.round(o)}`},[]),v=l.useCallback(o=>{if(o===null||o===1/0)return 100;const p=c[c.length-2];if(o>=p)return 100;if(o<=0)return 0;for(let L=0;L<c.length-1;L++){const q=c[L],B=c[L+1];if(o>=q&&o<=B){const H=100/(c.length-1),J=L*H,V=B===1/0?0:(o-q)/(B-q);return J+V*H}}return 0},[c]),w=l.useCallback(o=>{if(o>=100)return null;if(o<=0)return 0;const p=100/(c.length-1),L=Math.floor(o/p),q=o%p/p;if(L>=c.length-2)return null;const B=c[L],H=c[L+1];return H===1/0?null:Math.round(B+q*(H-B))},[c]),h=l.useCallback(o=>p=>{p.preventDefault(),k(o)},[]),y=l.useCallback(o=>{if(!d||!z.current)return;const p=z.current.getBoundingClientRect(),L=Math.max(0,Math.min(100,(o.clientX-p.left)/p.width*100)),q=w(L);if(d==="min"){const B=b===null?1/0:b,H=q===null?B:Math.min(q,B);A(H===1/0?0:H)}else if(d==="max"){const B=q===null?null:Math.max(q,f);N(B)}},[d,f,b,w]),C=l.useCallback(()=>{k(null)},[]);l.useEffect(()=>{if(d)return document.addEventListener("mousemove",y),document.addEventListener("mouseup",C),()=>{document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",C)}},[d,y,C]);const R=l.useCallback(o=>p=>{if(p.key==="ArrowLeft"||p.key==="ArrowRight"){p.preventDefault();const L=p.key==="ArrowLeft"?-1:1,B=v(o==="min"?f:b),H=Math.max(0,Math.min(100,B+L*2)),J=w(H);if(o==="min"){const V=b===null?1/0:b,pe=J===null?V:Math.min(J,V);A(pe===1/0?0:pe)}else{const V=J===null?null:Math.max(J||0,f);N(V)}}},[f,b,v,w]);if(l.useEffect(()=>{const o=p=>{p.key==="Escape"&&e&&x()};if(e)return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[e,x]),!e)return null;const I=v(f),M=v(b);return t.jsxs("div",{style:{position:"absolute",top:"100%",left:0,width:"400px",backgroundColor:"white",border:"1px solid #d1d5db",borderRadius:"6px",marginTop:"4px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1002,padding:"20px"},children:[t.jsxs("div",{style:{textAlign:"center",fontSize:"16px",fontWeight:"600",color:"#374151",marginBottom:"20px"},children:[g(f)," - ",g(b)]}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsxs("div",{ref:z,style:{position:"relative",height:"8px",backgroundColor:"#e5e7eb",borderRadius:"4px",marginBottom:"16px"},children:[t.jsx("div",{style:{position:"absolute",top:0,left:`${I}%`,width:`${M-I}%`,height:"100%",backgroundColor:"#3b82f6",borderRadius:"4px"}}),t.jsx("div",{style:{position:"absolute",left:`${I}%`,top:"50%",transform:"translate(-50%, -50%)",width:"20px",height:"20px",backgroundColor:"white",border:"2px solid #3b82f6",borderRadius:"50%",cursor:d==="min"?"grabbing":"grab",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},onMouseDown:h("min"),onKeyDown:R("min"),tabIndex:0,role:"slider","aria-label":"Minimum price","aria-valuemin":0,"aria-valuemax":b===null?c[c.length-2]:b,"aria-valuenow":f,"aria-valuetext":g(f)}),t.jsx("div",{style:{position:"absolute",left:`${M}%`,top:"50%",transform:"translate(-50%, -50%)",width:"20px",height:"20px",backgroundColor:"white",border:"2px solid #3b82f6",borderRadius:"50%",cursor:d==="max"?"grabbing":"grab",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},onMouseDown:h("max"),onKeyDown:R("max"),tabIndex:0,role:"slider","aria-label":"Maximum price","aria-valuemin":f,"aria-valuemax":c[c.length-2],"aria-valuenow":b===null?c[c.length-2]:b,"aria-valuetext":g(b)})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"12px",color:"#6b7280"},children:[c.slice(0,-1).map((o,p)=>t.jsx("span",{children:g(o)},p)),t.jsx("span",{children:"Max"})]})]}),t.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[t.jsx("button",{onClick:x,style:{padding:"8px 16px",fontSize:"14px",fontWeight:"500",color:"#374151",backgroundColor:"white",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer"},children:"Cancel"}),t.jsx("button",{onClick:()=>m(f,b),style:{padding:"8px 16px",fontSize:"14px",fontWeight:"500",color:"white",backgroundColor:"#3b82f6",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Apply"})]})]})}Ot.__docgenInfo={description:"",methods:[],displayName:"PriceRangeFilter",props:{isOpen:{required:!0,tsType:{name:"boolean"},description:""},initialMin:{required:!0,tsType:{name:"number"},description:""},initialMax:{required:!0,tsType:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]},description:""},onApply:{required:!0,tsType:{name:"signature",type:"function",raw:"(min: number, max: number | null) => void",signature:{arguments:[{type:{name:"number"},name:"min"},{type:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]},name:"max"}],return:{name:"void"}}},description:""},onCancel:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},priceBreakpoints:{required:!1,tsType:{name:"Array",elements:[{name:"number"}],raw:"number[]"},description:"",defaultValue:{value:"[0, 500000, 1000000, 2000000, 4000000, Infinity]",computed:!1}}}};function qt({isOpen:e,initialMin:n,initialMax:u,onApply:m,onCancel:x,sqftBreakpoints:c=[0,1e3,2e3,3e3,5e3,1/0]}){const[f,A]=l.useState(n),[b,N]=l.useState(u),[d,k]=l.useState(null),z=l.useRef(null);l.useEffect(()=>{A(n),N(u)},[e,n,u]);const g=l.useCallback(o=>{if(o===null||o===1/0)return"Max";if(o===0)return"0";if(o>=1e3){const p=o/1e3;return`${Math.round(p*10)/10}K`}return`${Math.round(o)}`},[]),v=l.useCallback(o=>{if(o===null||o===1/0)return 100;const p=c[c.length-2];if(o>=p)return 100;if(o<=0)return 0;for(let L=0;L<c.length-1;L++){const q=c[L],B=c[L+1];if(o>=q&&o<=B){const H=100/(c.length-1),J=L*H,V=B===1/0?0:(o-q)/(B-q);return J+V*H}}return 0},[c]),w=l.useCallback(o=>{if(o>=100)return null;if(o<=0)return 0;const p=100/(c.length-1),L=Math.floor(o/p),q=o%p/p;if(L>=c.length-2)return null;const B=c[L],H=c[L+1];return H===1/0?null:Math.round(B+q*(H-B))},[c]),h=l.useCallback(o=>p=>{p.preventDefault(),k(o)},[]),y=l.useCallback(o=>{if(!d||!z.current)return;const p=z.current.getBoundingClientRect(),L=Math.max(0,Math.min(100,(o.clientX-p.left)/p.width*100)),q=w(L);if(d==="min"){const B=b===null?1/0:b,H=q===null?B:Math.min(q,B);A(H===1/0?0:H)}else if(d==="max"){const B=q===null?null:Math.max(q,f);N(B)}},[d,f,b,w]),C=l.useCallback(()=>{k(null)},[]);l.useEffect(()=>{if(d)return document.addEventListener("mousemove",y),document.addEventListener("mouseup",C),()=>{document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",C)}},[d,y,C]);const R=l.useCallback(o=>p=>{if(p.key==="ArrowLeft"||p.key==="ArrowRight"){p.preventDefault();const L=p.key==="ArrowLeft"?-1:1,B=v(o==="min"?f:b),H=Math.max(0,Math.min(100,B+L*2)),J=w(H);if(o==="min"){const V=b===null?1/0:b,pe=J===null?V:Math.min(J,V);A(pe===1/0?0:pe)}else{const V=J===null?null:Math.max(J||0,f);N(V)}}},[f,b,v,w]);if(l.useEffect(()=>{const o=p=>{p.key==="Escape"&&e&&x()};if(e)return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[e,x]),!e)return null;const I=v(f),M=v(b);return t.jsxs("div",{style:{marginTop:"16px",padding:"16px",backgroundColor:"#f9fafb",borderRadius:"6px",border:"1px solid #e5e7eb"},children:[t.jsxs("div",{style:{textAlign:"center",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"16px"},children:[g(f)," - ",g(b)," sq ft"]}),t.jsxs("div",{style:{marginBottom:"16px"},children:[t.jsxs("div",{ref:z,style:{position:"relative",height:"6px",backgroundColor:"#e5e7eb",borderRadius:"3px",marginBottom:"12px"},children:[t.jsx("div",{style:{position:"absolute",top:0,left:`${I}%`,width:`${M-I}%`,height:"100%",backgroundColor:"#3b82f6",borderRadius:"3px"}}),t.jsx("div",{style:{position:"absolute",left:`${I}%`,top:"50%",transform:"translate(-50%, -50%)",width:"18px",height:"18px",backgroundColor:"white",border:"2px solid #3b82f6",borderRadius:"50%",cursor:d==="min"?"grabbing":"grab",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},onMouseDown:h("min"),onKeyDown:R("min"),tabIndex:0,role:"slider","aria-label":"Minimum square footage","aria-valuemin":0,"aria-valuemax":b===null?c[c.length-2]:b,"aria-valuenow":f,"aria-valuetext":g(f)}),t.jsx("div",{style:{position:"absolute",left:`${M}%`,top:"50%",transform:"translate(-50%, -50%)",width:"18px",height:"18px",backgroundColor:"white",border:"2px solid #3b82f6",borderRadius:"50%",cursor:d==="max"?"grabbing":"grab",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},onMouseDown:h("max"),onKeyDown:R("max"),tabIndex:0,role:"slider","aria-label":"Maximum square footage","aria-valuemin":f,"aria-valuemax":c[c.length-2],"aria-valuenow":b===null?c[c.length-2]:b,"aria-valuetext":g(b)})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"11px",color:"#6b7280"},children:[c.slice(0,-1).map((o,p)=>t.jsx("span",{children:g(o)},p)),t.jsx("span",{children:"Max"})]})]}),t.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[t.jsx("button",{onClick:x,style:{padding:"6px 12px",fontSize:"13px",fontWeight:"500",color:"#374151",backgroundColor:"white",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer"},children:"Cancel"}),t.jsx("button",{onClick:()=>m(f,b),style:{padding:"6px 12px",fontSize:"13px",fontWeight:"500",color:"white",backgroundColor:"#3b82f6",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Apply"})]})]})}qt.__docgenInfo={description:"",methods:[],displayName:"SquareFootageFilter",props:{isOpen:{required:!0,tsType:{name:"boolean"},description:""},initialMin:{required:!0,tsType:{name:"number"},description:""},initialMax:{required:!0,tsType:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]},description:""},onApply:{required:!0,tsType:{name:"signature",type:"function",raw:"(min: number, max: number | null) => void",signature:{arguments:[{type:{name:"number"},name:"min"},{type:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]},name:"max"}],return:{name:"void"}}},description:""},onCancel:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},sqftBreakpoints:{required:!1,tsType:{name:"Array",elements:[{name:"number"}],raw:"number[]"},description:"",defaultValue:{value:"[0, 1000, 2000, 3000, 5000, Infinity]",computed:!1}}}};function Yt({filters:e,onFiltersChange:n,apiKey:u}){const[m,x]=l.useState(!1),[c,f]=l.useState(!1),[A,b]=l.useState(!1),[N,d]=l.useState(!1),[k,z]=l.useState(!1),[g,v]=l.useState(!1),[w,h]=l.useState(!1),y=l.useRef(null),C=l.useRef(null),R=l.useRef(null),I=l.useRef(null),M=l.useRef(null),o=[{value:"sale",label:"For Sale"},{value:"lease",label:"For Lease"}],p=r=>{n({...e,listingType:r}),x(!1)},L=(r,a)=>{n({...e,minPrice:r||void 0,maxPrice:a||void 0}),f(!1)},q=()=>{f(!1)},B=(r,a)=>{n({...e,minSqft:r||void 0,maxSqft:a||void 0}),h(!1)},H=()=>{h(!1)},J=()=>{const r=e.minPrice&&e.minPrice>0,a=e.maxPrice&&e.maxPrice!==null;if(!r&&!a)return"Price";const i=T=>{if(T>=1e6){const E=T/1e6;return`$${E>=10?Math.round(E):Math.round(E*10)/10}M`}return T>=1e3?`$${Math.round(T/1e3)}K`:`$${T}`},F=r?i(e.minPrice):"$0",S=a?i(e.maxPrice):"Max";return`${F} - ${S}`},V=o.find(r=>r.value===e.listingType),pe=[{value:"1",label:"Last 24 hours"},{value:"3",label:"Last 3 days"},{value:"7",label:"Last 7 days"},{value:"30",label:"Last 30 days"},{value:"90",label:"Last 90 days"},{value:"all",label:"Listing date - All"},{value:"15+",label:"More than 15 days"},{value:"30+",label:"More than 30 days"},{value:"60+",label:"More than 60 days"},{value:"90+",label:"More than 90 days"}],Ze=()=>{if(e.activeListingDays===void 0)return"Off";if(e.activeListingDays==="all")return"All";const r=pe.find(a=>a.value===e.activeListingDays);return r?r.label.replace("Last ","").replace("More than ",">"):"All"},Ie=()=>e.activeListingDays!==void 0,Ae=r=>{n({...e,activeListingDays:r}),b(!1)},ye=()=>{n({...e,activeListingDays:void 0})},P=[{value:"1",label:"Last 24 hours"},{value:"3",label:"Last 3 days"},{value:"7",label:"Last 7 days"},{value:"30",label:"Last 30 days"},{value:"90",label:"Last 90 days"},{value:"180",label:"Last 180 days"},{value:"360",label:"Last 360 days"},{value:"2025",label:"Year 2025"},{value:"2024",label:"Year 2024"},{value:"2023",label:"Year 2023"},{value:"2022",label:"Year 2022"},{value:"2021",label:"Year 2021"},{value:"2020",label:"Year 2020"},{value:"2019",label:"Year 2019"},{value:"2018",label:"Year 2018"},{value:"2017",label:"Year 2017"},{value:"2016",label:"Year 2016"},{value:"2015",label:"Year 2015"},{value:"2014",label:"Year 2014"},{value:"2013",label:"Year 2013"},{value:"2012",label:"Year 2012"},{value:"2011",label:"Year 2011"},{value:"2010",label:"Year 2010"},{value:"2009",label:"Year 2009"},{value:"2008",label:"Year 2008"},{value:"2007",label:"Year 2007"}],Ge=()=>{if(!e.soldListingDays)return"Off";const r=P.find(a=>a.value===e.soldListingDays);return r?r.label.replace("Last ","").replace("Year ",""):"Off"},Fe=()=>!!e.soldListingDays,Pe=r=>{n({...e,soldListingDays:r}),d(!1)},De=()=>{n({...e,soldListingDays:void 0})},Ne=[{value:"1",label:"Last 24 hours"},{value:"3",label:"Last 3 days"},{value:"7",label:"Last 7 days"},{value:"30",label:"Last 30 days"},{value:"90",label:"Last 90 days"},{value:"180",label:"Last 180 days"},{value:"360",label:"Last 360 days"},{value:"2025",label:"Year 2025"},{value:"2024",label:"Year 2024"},{value:"2023",label:"Year 2023"},{value:"2022",label:"Year 2022"},{value:"2021",label:"Year 2021"},{value:"2020",label:"Year 2020"},{value:"2019",label:"Year 2019"},{value:"2018",label:"Year 2018"},{value:"2017",label:"Year 2017"},{value:"2016",label:"Year 2016"},{value:"2015",label:"Year 2015"},{value:"2014",label:"Year 2014"},{value:"2013",label:"Year 2013"},{value:"2012",label:"Year 2012"},{value:"2011",label:"Year 2011"},{value:"2010",label:"Year 2010"},{value:"2009",label:"Year 2009"},{value:"2008",label:"Year 2008"},{value:"2007",label:"Year 2007"}],Ce=()=>{if(!e.unavailableListingDays)return"Off";const r=Ne.find(a=>a.value===e.unavailableListingDays);return r?r.label.replace("Last ","").replace("Year ",""):"Off"},Te=()=>!!e.unavailableListingDays,$e=r=>{n({...e,unavailableListingDays:r}),z(!1)},Me=()=>{n({...e,unavailableListingDays:void 0})};l.useEffect(()=>{const r=a=>{y.current&&!y.current.contains(a.target)&&f(!1)};if(c)return document.addEventListener("mousedown",r),()=>document.removeEventListener("mousedown",r)},[c]),l.useEffect(()=>{const r=a=>{C.current&&!C.current.contains(a.target)&&b(!1)};if(A)return document.addEventListener("mousedown",r),()=>document.removeEventListener("mousedown",r)},[A]),l.useEffect(()=>{const r=a=>{R.current&&!R.current.contains(a.target)&&d(!1)};if(N)return document.addEventListener("mousedown",r),()=>document.removeEventListener("mousedown",r)},[N]),l.useEffect(()=>{const r=a=>{I.current&&!I.current.contains(a.target)&&z(!1)};if(k)return document.addEventListener("mousedown",r),()=>document.removeEventListener("mousedown",r)},[k]),l.useEffect(()=>{const r=a=>{M.current&&!M.current.contains(a.target)&&v(!1)};if(g)return document.addEventListener("mousedown",r),()=>document.removeEventListener("mousedown",r)},[g]);const ze=()=>{n({listingType:"sale",propertyTypes:[],minPrice:void 0,maxPrice:null,bedrooms:void 0,bathrooms:void 0,garageSpaces:void 0,minSqft:void 0,maxSqft:null,openHouse:void 0,maxMaintenanceFee:null,activeListingDays:"all",soldListingDays:void 0,unavailableListingDays:void 0})};return t.jsxs("div",{style:{position:"absolute",top:"16px",left:"16px",backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)",padding:"12px",fontSize:"14px",fontWeight:"500",color:"#374151",zIndex:1e3,minWidth:"200px"},children:[t.jsxs("div",{style:{marginBottom:"8px",fontSize:"12px",fontWeight:"600",color:"#6b7280",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("span",{children:"FILTERS"}),t.jsx("button",{onClick:ze,style:{padding:"2px 8px",fontSize:"11px",fontWeight:"500",color:"#6b7280",backgroundColor:"transparent",border:"1px solid #d1d5db",borderRadius:"4px",cursor:"pointer"},children:"Clear"})]}),t.jsxs("div",{style:{position:"relative",marginBottom:"12px"},children:[t.jsxs("button",{onClick:()=>x(!m),style:{width:"100%",padding:"8px 12px",backgroundColor:e.listingType==="sale"?"#d1fae5":"#f3e8ff",border:e.listingType==="sale"?"1px solid #86efac":"1px solid #d8b4fe",borderRadius:"6px",fontSize:"14px",fontWeight:"500",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",color:"#1f2937"},children:[t.jsx("span",{children:V==null?void 0:V.label}),t.jsx(we,{size:16,style:{transform:m?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"}})]}),m&&t.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,backgroundColor:"white",border:"1px solid #d1d5db",borderRadius:"6px",marginTop:"4px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1001},children:o.map(r=>t.jsx("button",{onClick:()=>p(r.value),style:{width:"100%",padding:"8px 12px",backgroundColor:e.listingType===r.value?"#f3f4f6":"white",border:"none",fontSize:"14px",cursor:"pointer",textAlign:"left",borderRadius:r===o[0]?"6px 6px 0 0":r===o[o.length-1]?"0 0 6px 6px":"0"},onMouseEnter:a=>{e.listingType!==r.value&&(a.currentTarget.style.backgroundColor="#f9fafb")},onMouseLeave:a=>{e.listingType!==r.value&&(a.currentTarget.style.backgroundColor="white")},children:r.label},r.value))})]}),t.jsx(Bt,{filters:e,onFiltersChange:n,apiKey:u}),t.jsxs("div",{ref:y,style:{position:"relative",marginBottom:"12px"},children:[t.jsxs("button",{onClick:()=>f(!c),style:{width:"100%",padding:"8px 12px",backgroundColor:e.minPrice||e.maxPrice?"#f3f4f6":"white",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",textAlign:"left",color:e.minPrice||e.maxPrice?"#1f2937":"#374151",fontWeight:e.minPrice||e.maxPrice?"500":"400"},children:[t.jsx("span",{children:J()}),t.jsx(we,{size:16,style:{transform:c?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"}})]}),c&&t.jsx(Ot,{isOpen:c,initialMin:e.minPrice||0,initialMax:e.maxPrice||null,onApply:L,onCancel:q})]}),t.jsxs("div",{ref:C,style:{position:"relative",marginBottom:"12px"},children:[t.jsxs("div",{style:{width:"100%",padding:"0",backgroundColor:"white",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",display:"flex",overflow:"hidden"},children:[t.jsx("div",{onClick:r=>{r.stopPropagation(),ye()},style:{width:"48px",backgroundColor:Ie()?"#10b981":"#e5e7eb",flexShrink:0,cursor:Ie()?"pointer":"default"}}),t.jsxs("button",{onClick:()=>b(!A),style:{flex:1,padding:"8px 12px",display:"flex",justifyContent:"space-between",alignItems:"center",textAlign:"left",color:"#1f2937",fontWeight:"500",cursor:"pointer",backgroundColor:"transparent",border:"none"},children:[t.jsxs("span",{children:["Active: ",Ze()]}),t.jsx(we,{size:16,style:{transform:A?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"}})]})]}),A&&t.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,backgroundColor:"white",border:"1px solid #d1d5db",borderRadius:"6px",marginTop:"4px",padding:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1001},children:pe.map(r=>t.jsxs("label",{style:{display:"flex",alignItems:"center",padding:"8px",cursor:"pointer",borderRadius:"4px",transition:"background-color 0.2s"},onMouseEnter:a=>{a.currentTarget.style.backgroundColor="#f9fafb"},onMouseLeave:a=>{a.currentTarget.style.backgroundColor="transparent"},children:[t.jsx("input",{type:"radio",name:"activeListingFilter",checked:e.activeListingDays===r.value||!e.activeListingDays&&r.value==="all",onChange:()=>Ae(r.value),style:{marginRight:"8px",width:"16px",height:"16px",cursor:"pointer"}}),t.jsx("span",{style:{fontSize:"14px",color:"#374151"},children:r.label})]},r.value))})]}),t.jsxs("div",{ref:R,style:{position:"relative",marginBottom:"12px"},children:[t.jsxs("div",{style:{width:"100%",padding:"0",backgroundColor:"white",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",display:"flex",overflow:"hidden"},children:[t.jsx("div",{onClick:r=>{r.stopPropagation(),De()},style:{width:"48px",backgroundColor:Fe()?"#8b7fa8":"#e5e7eb",flexShrink:0,cursor:Fe()?"pointer":"default"}}),t.jsxs("button",{onClick:()=>d(!N),style:{flex:1,padding:"8px 12px",display:"flex",justifyContent:"space-between",alignItems:"center",textAlign:"left",color:"#1f2937",fontWeight:"500",cursor:"pointer",backgroundColor:"transparent",border:"none"},children:[t.jsxs("span",{children:["Sold: ",Ge()]}),t.jsx(we,{size:16,style:{transform:N?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"}})]})]}),N&&t.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,backgroundColor:"white",border:"1px solid #d1d5db",borderRadius:"6px",marginTop:"4px",padding:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1001,maxHeight:"400px",overflowY:"auto"},children:P.map(r=>t.jsxs("label",{style:{display:"flex",alignItems:"center",padding:"8px",cursor:"pointer",borderRadius:"4px",transition:"background-color 0.2s"},onMouseEnter:a=>{a.currentTarget.style.backgroundColor="#f9fafb"},onMouseLeave:a=>{a.currentTarget.style.backgroundColor="transparent"},children:[t.jsx("input",{type:"radio",name:"soldListingFilter",checked:e.soldListingDays===r.value,onChange:()=>Pe(r.value),style:{marginRight:"8px",width:"16px",height:"16px",cursor:"pointer"}}),t.jsx("span",{style:{fontSize:"14px",color:"#374151"},children:r.label})]},r.value))})]}),t.jsxs("div",{ref:I,style:{position:"relative",marginBottom:"12px"},children:[t.jsxs("div",{style:{width:"100%",padding:"0",backgroundColor:"white",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",display:"flex",overflow:"hidden"},children:[t.jsx("div",{onClick:r=>{r.stopPropagation(),Me()},style:{width:"48px",backgroundColor:Te()?"#f59e0b":"#e5e7eb",flexShrink:0,cursor:Te()?"pointer":"default"}}),t.jsxs("button",{onClick:()=>z(!k),style:{flex:1,padding:"8px 12px",display:"flex",justifyContent:"space-between",alignItems:"center",textAlign:"left",color:"#1f2937",fontWeight:"500",cursor:"pointer",backgroundColor:"transparent",border:"none"},children:[t.jsxs("span",{children:["De-listed: ",Ce()]}),t.jsx(we,{size:16,style:{transform:k?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"}})]})]}),k&&t.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,backgroundColor:"white",border:"1px solid #d1d5db",borderRadius:"6px",marginTop:"4px",padding:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1001,maxHeight:"400px",overflowY:"auto"},children:Ne.map(r=>t.jsxs("label",{style:{display:"flex",alignItems:"center",padding:"8px",cursor:"pointer",borderRadius:"4px",transition:"background-color 0.2s"},onMouseEnter:a=>{a.currentTarget.style.backgroundColor="#f9fafb"},onMouseLeave:a=>{a.currentTarget.style.backgroundColor="transparent"},children:[t.jsx("input",{type:"radio",name:"unavailableListingFilter",checked:e.unavailableListingDays===r.value,onChange:()=>$e(r.value),style:{marginRight:"8px",width:"16px",height:"16px",cursor:"pointer"}}),t.jsx("span",{style:{fontSize:"14px",color:"#374151"},children:r.label})]},r.value))})]}),t.jsxs("div",{ref:M,style:{position:"relative",marginBottom:"12px"},children:[t.jsxs("button",{onClick:()=>v(!g),style:{width:"100%",padding:"8px 12px",backgroundColor:e.bedrooms!=="all"||e.bathrooms!=="all"||e.garageSpaces!=="all"||e.minSqft||e.maxSqft||e.openHouse&&e.openHouse!=="all"||e.maxMaintenanceFee?"#f3f4f6":"white",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",textAlign:"left",color:"#374151",fontWeight:e.bedrooms!=="all"||e.bathrooms!=="all"||e.garageSpaces!=="all"||e.minSqft||e.maxSqft||e.openHouse&&e.openHouse!=="all"||e.maxMaintenanceFee?"500":"400"},children:[t.jsx("span",{children:"More Filters"}),t.jsx(we,{size:16,style:{transform:g?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"}})]}),g&&t.jsxs("div",{style:{position:"absolute",top:"100%",left:0,width:"400px",backgroundColor:"white",border:"1px solid #d1d5db",borderRadius:"6px",marginTop:"4px",padding:"20px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1001},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"12px",fontWeight:"600",color:"#6b7280",marginBottom:"8px"},children:"BEDROOMS"}),t.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:["all","0","1","2","3","4","5+"].map(r=>t.jsx("button",{onClick:()=>n({...e,bedrooms:r}),style:{padding:"8px 16px",backgroundColor:e.bedrooms===r?"#3b82f6":"white",color:e.bedrooms===r?"white":"#374151",border:`1px solid ${e.bedrooms===r?"#3b82f6":"#d1d5db"}`,borderRadius:"6px",fontSize:"14px",fontWeight:e.bedrooms===r?"600":"400",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:a=>{e.bedrooms!==r&&(a.currentTarget.style.backgroundColor="#f3f4f6")},onMouseLeave:a=>{e.bedrooms!==r&&(a.currentTarget.style.backgroundColor="white")},children:r==="all"?"All":r},r))})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"12px",fontWeight:"600",color:"#6b7280",marginBottom:"8px"},children:"BATHROOMS"}),t.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:["all","1+","2+","3+","4+","5+"].map(r=>t.jsx("button",{onClick:()=>n({...e,bathrooms:r}),style:{padding:"8px 16px",backgroundColor:e.bathrooms===r?"#3b82f6":"white",color:e.bathrooms===r?"white":"#374151",border:`1px solid ${e.bathrooms===r?"#3b82f6":"#d1d5db"}`,borderRadius:"6px",fontSize:"14px",fontWeight:e.bathrooms===r?"600":"400",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:a=>{e.bathrooms!==r&&(a.currentTarget.style.backgroundColor="#f3f4f6")},onMouseLeave:a=>{e.bathrooms!==r&&(a.currentTarget.style.backgroundColor="white")},children:r==="all"?"All":r},r))})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"12px",fontWeight:"600",color:"#6b7280",marginBottom:"8px"},children:"GARAGE / PARKING"}),t.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:["all","1+","2+","3+","4+","5+"].map(r=>t.jsx("button",{onClick:()=>n({...e,garageSpaces:r}),style:{padding:"8px 16px",backgroundColor:e.garageSpaces===r?"#3b82f6":"white",color:e.garageSpaces===r?"white":"#374151",border:`1px solid ${e.garageSpaces===r?"#3b82f6":"#d1d5db"}`,borderRadius:"6px",fontSize:"14px",fontWeight:e.garageSpaces===r?"600":"400",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:a=>{e.garageSpaces!==r&&(a.currentTarget.style.backgroundColor="#f3f4f6")},onMouseLeave:a=>{e.garageSpaces!==r&&(a.currentTarget.style.backgroundColor="white")},children:r==="all"?"All":r},r))})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"12px",fontWeight:"600",color:"#6b7280",marginBottom:"8px"},children:"SQUARE FOOTAGE"}),t.jsx(qt,{isOpen:!0,initialMin:e.minSqft||0,initialMax:e.maxSqft||null,onApply:B,onCancel:H})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"12px",fontWeight:"600",color:"#6b7280",marginBottom:"8px"},children:"OPEN HOUSE"}),t.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[{value:"all",label:"All"},{value:"today",label:"Today"},{value:"thisWeekend",label:"This Weekend"},{value:"thisWeek",label:"This Week"},{value:"anytime",label:"Anytime"}].map(({value:r,label:a})=>t.jsx("button",{onClick:()=>n({...e,openHouse:r}),style:{padding:"8px 16px",backgroundColor:e.openHouse===r?"#3b82f6":"white",color:e.openHouse===r?"white":"#374151",border:`1px solid ${e.openHouse===r?"#3b82f6":"#d1d5db"}`,borderRadius:"6px",fontSize:"14px",fontWeight:e.openHouse===r?"600":"400",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:i=>{e.openHouse!==r&&(i.currentTarget.style.backgroundColor="#f3f4f6")},onMouseLeave:i=>{e.openHouse!==r&&(i.currentTarget.style.backgroundColor="white")},children:a},r))})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:"12px",fontWeight:"600",color:"#6b7280",marginBottom:"8px"},children:"MAX MAINTENANCE FEE"}),t.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[t.jsx("input",{type:"number",placeholder:"Enter max fee",value:e.maxMaintenanceFee||"",onChange:r=>{const a=r.target.value?parseInt(r.target.value):void 0;n({...e,maxMaintenanceFee:a||null})},onKeyDown:r=>{if(r.key==="Enter"){const a=r.currentTarget.value?parseInt(r.currentTarget.value):void 0;n({...e,maxMaintenanceFee:a||null})}},style:{flex:1,padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",color:"#374151"}}),t.jsx("button",{onClick:()=>{n({...e})},style:{padding:"8px 16px",fontSize:"14px",fontWeight:"500",color:"white",backgroundColor:"#3b82f6",border:"none",borderRadius:"6px",cursor:"pointer",whiteSpace:"nowrap"},children:"Apply"})]})]})]})]})]})}Yt.__docgenInfo={description:"",methods:[],displayName:"FilterPanel",props:{filters:{required:!0,tsType:{name:"MapFilters"},description:""},onFiltersChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(filters: MapFilters) => void",signature:{arguments:[{type:{name:"MapFilters"},name:"filters"}],return:{name:"void"}}},description:""},apiKey:{required:!0,tsType:{name:"string"},description:""}}};const rr=(e,n)=>{const u=(m,x)=>m>=100?`${Math.round(m)}${x}`:m>=10?`${Math.round(m*10)/10}${x}`:`${Math.round(m*100)/100}${x}`;if(n==="Lease"){if(e>=1e3){const m=e/1e3;return u(m,"K")}return Math.round(e).toString()}else{if(e>=999500){const m=e/1e6;return u(m,"M")}else if(e>=1e3){const m=e/1e3;return u(m,"K")}return Math.round(e).toString()}},sr=(e,n,u)=>e==="U"&&(n==="Sld"||n==="Sc")?"#8b7fa8":e==="U"?"#f59e0b":u==="Lease"?"#a855f7":"#22c55e",nr=(e,n,u,m)=>{const x=rr(e,n),c=sr(u,m,n),f=document.createElement("div");return f.style.cssText=`
    background-color: ${c};
    color: white;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 11px;
    font-weight: 600;
    font-family: -apple-system, BlinkMacSystemFont, sans-serif;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    white-space: nowrap;
    pointer-events: auto;
    cursor: pointer;
  `,f.textContent=x,f},Qe=e=>{var n,u,m,x,c,f,A,b;return(n=e.coordinates)!=null&&n.lat&&((u=e.coordinates)!=null&&u.lng)?{lat:e.coordinates.lat,lng:e.coordinates.lng}:e.latitude&&e.longitude?{lat:e.latitude,lng:e.longitude}:(m=e.map)!=null&&m.latitude&&((x=e.map)!=null&&x.longitude)?{lat:e.map.latitude,lng:e.map.longitude}:(c=e.location)!=null&&c.latitude&&((f=e.location)!=null&&f.longitude)?{lat:e.location.latitude,lng:e.location.longitude}:(A=e.center)!=null&&A.lat&&((b=e.center)!=null&&b.lng)?{lat:e.center.lat,lng:e.center.lng}:null},et=e=>{if(e.length===0)return null;let n=e[0].lat,u=e[0].lat,m=e[0].lng,x=e[0].lng;return e.forEach(c=>{n=Math.max(n,c.lat),u=Math.min(u,c.lat),m=Math.max(m,c.lng),x=Math.min(x,c.lng)}),{north:n,south:u,east:m,west:x}},tt=(e,n)=>{const{north:u,south:m,east:x,west:c}=n,f=20,A=(u-m)/f,b=(x-c)/f,N=Array(f).fill(0).map(()=>Array(f).fill(0));e.forEach(v=>{const w=Math.floor((v.lat-m)/A),h=Math.floor((v.lng-c)/b),y=Math.max(0,Math.min(f-1,w)),C=Math.max(0,Math.min(f-1,h));N[y][C]++});let d=0,k=0,z=0;for(let v=0;v<f;v++)for(let w=0;w<f;w++)N[v][w]>d&&(d=N[v][w],k=m+(v+.5)*A,z=c+(w+.5)*b);return d>0?[z,k]:[(x+c)/2,(u+m)/2]},or=e=>{try{const n=localStorage.getItem(`mapListings-autoCenter-${e}`);if(n){const u=JSON.parse(n);if(Date.now()-u.timestamp<1440*60*1e3)return{center:u.center}}}catch{}return null},He=(e,n)=>{try{const u={...n,timestamp:Date.now()};localStorage.setItem(`mapListings-autoCenter-${e}`,JSON.stringify(u))}catch{}},ar=async(e,n="average")=>{var u,m,x,c,f,A,b,N;try{const k=await fetch("https://api.repliers.io/listings",{method:"POST",headers:{"REPLIERS-API-KEY":e,"Content-Type":"application/json"},body:JSON.stringify({queries:[{cluster:!0,clusterPrecision:8,clusterLimit:50,status:"A"},{cluster:!1,listings:!0,pageSize:500,status:"A"}]})});if(k.status===400)return gt(e,n);if(!k.ok)throw new Error(`Bundled auto-center API Error: ${k.status} ${k.statusText}`);const z=await k.json(),g=z[0]||{},v=z[1]||{},w=((m=(u=g.aggregates)==null?void 0:u.map)==null?void 0:m.clusters)||g.clusters||[],h=v.listings||v.results||[];if(n==="city"&&w.length>0){let M=null,o=0;if(w.forEach(p=>{const L=p.count||0;L>o&&(o=L,M=p)}),M){const p=[((x=M.location)==null?void 0:x.longitude)||((c=M.coordinates)==null?void 0:c.lng)||M.longitude||((f=M.center)==null?void 0:f.lng),((A=M.location)==null?void 0:A.latitude)||((b=M.coordinates)==null?void 0:b.lat)||M.latitude||((N=M.center)==null?void 0:N.lat)];if(p[0]&&p[1]){const q={center:[p[0],p[1]]};return He(`${e}-${n}`,q),q}}}if(h.length===0)return null;const y=[];if(h.forEach(M=>{const o=Qe(M);o&&y.push(o)}),y.length===0)return null;const C=et(y);if(!C)return null;const I={center:tt(y,C)};return He(`${e}-${n}`,I),I}catch{return gt(e,n)}},gt=async(e,n="average")=>{var u,m,x,c,f,A,b,N;try{let d=[],k=[];if(n==="city")try{const h=new URL("https://api.repliers.io/listings");h.searchParams.set("cluster","true"),h.searchParams.set("clusterPrecision","8"),h.searchParams.set("clusterLimit","50"),h.searchParams.set("status","A");const y=await fetch(h.toString(),{headers:{"REPLIERS-API-KEY":e,"Content-Type":"application/json"}});if(y.ok){const C=await y.json();d=((m=(u=C.aggregates)==null?void 0:u.map)==null?void 0:m.clusters)||C.clusters||[]}}catch{}try{const h=new URL("https://api.repliers.io/listings");h.searchParams.set("pageSize","500"),h.searchParams.set("status","A");const y=await fetch(h.toString(),{headers:{"REPLIERS-API-KEY":e,"Content-Type":"application/json"}});if(y.ok){const C=await y.json();k=C.listings||C.results||[]}}catch{}if(n==="city"&&d.length>0){let h=null,y=0;if(d.forEach(C=>{const R=C.count||0;R>y&&(y=R,h=C)}),h){const C=[((x=h.location)==null?void 0:x.longitude)||((c=h.coordinates)==null?void 0:c.lng)||h.longitude||((f=h.center)==null?void 0:f.lng),((A=h.location)==null?void 0:A.latitude)||((b=h.coordinates)==null?void 0:b.lat)||h.latitude||((N=h.center)==null?void 0:N.lat)];if(C[0]&&C[1]){const I={center:[C[0],C[1]]};return He(`${e}-${n}`,I),I}}}if(k.length===0)return null;const z=[];if(k.forEach(h=>{const y=Qe(h);y&&z.push(y)}),z.length===0)return null;const g=et(z);if(!g)return null;const w={center:tt(z,g)};return He(`${e}-${n}`,w),w}catch{return null}};function Wt({apiKey:e,mapboxToken:n,initialCenter:u,initialZoom:m,height:x="100%",width:c="100%",mapStyle:f="mapbox://styles/mapbox/streets-v12",centerCalculation:A="average",showPropertyCount:b=!0}){const N=l.useRef(null),d=l.useRef(null),[k,z]=l.useState(null),[g,v]=l.useState(0),[w,h]=l.useState(u||null),[y,C]=l.useState(m||null),R=l.useRef(null),I=l.useRef(null),[M,o]=l.useState(!1),[p,L]=l.useState(null),[q,B]=l.useState({x:0,y:0}),[H,J]=l.useState(!1),[V,pe]=l.useState([]),[Ze,Ie]=l.useState({x:0,y:0}),Ae=l.useRef([]),ye=l.useRef(null),[P,Ge]=l.useState({listingType:"sale",propertyTypes:[],bedrooms:"all",bathrooms:"all",garageSpaces:"all",openHouse:"all"}),Fe=l.useCallback(a=>{Ge(a)},[]),Pe=l.useCallback(()=>{Ae.current.forEach(a=>a.remove()),Ae.current=[]},[]),De=l.useCallback(a=>{d.current&&(Pe(),a.forEach(i=>{if("isProperty"in i.properties&&i.properties.isProperty&&i.properties.listPrice){const{listPrice:F,status:S,lastStatus:T}=i.properties,E=i.properties.type||"Sale",[D,G]=i.geometry.coordinates;if(isNaN(D)||isNaN(G)||D===null||G===null)return;const $=typeof F=="string"?parseFloat(F):F;if(isNaN($))return;const Y=nr($,E,S,T),oe=new _e.Marker({element:Y,anchor:"bottom",offset:[0,-5]}).setLngLat([D,G]).addTo(d.current);Y.addEventListener("click",async he=>{var Q;const U=he.clientX,ae=he.clientY;if(B({x:U,y:ae}),i.properties.address&&i.properties.images){const re={mlsNumber:i.properties.mlsNumber||"N/A",listPrice:$,address:i.properties.address,details:i.properties.details,images:i.properties.images,type:i.properties.type,lastStatus:i.properties.lastStatus,status:i.properties.status};L(re),o(!0);return}try{const re=await fetch(`https://api.repliers.io/listings?mlsNumber=${i.properties.mlsNumber}&fields=address.*,details.*,images,type,lastStatus,status,class`,{headers:{"REPLIERS-API-KEY":e,"Content-Type":"application/json"}});if(!re.ok)throw new Error(`Failed to fetch property details: ${re.status}`);const ee=(Q=(await re.json()).listings)==null?void 0:Q[0];if(ee){const le={mlsNumber:i.properties.mlsNumber||"N/A",listPrice:$,address:ee.address,details:ee.details,images:ee.images,type:ee.type||i.properties.type,lastStatus:ee.lastStatus,status:ee.status};L(le),o(!0)}else{const le={mlsNumber:i.properties.mlsNumber||"N/A",listPrice:$,address:i.properties.address,details:i.properties.details,images:i.properties.images,type:i.properties.type,lastStatus:i.properties.lastStatus,status:i.properties.status};L(le),o(!0)}}catch{const me={mlsNumber:i.properties.mlsNumber||"N/A",listPrice:$,address:i.properties.address,details:i.properties.details,images:i.properties.images,type:i.properties.type,lastStatus:i.properties.lastStatus,status:i.properties.status};L(me),o(!0)}}),Ae.current.push(oe)}}))},[Pe,e]);l.useEffect(()=>{(async()=>{if(w&&y)return;const i=or(`${e}-${A}`);if(i){h(i.center),C(m||10);return}const F=await ar(e,A);F?(h(F.center),C(m||10)):(h([-98.5795,39.8283]),C(m||10))})()},[e,w,y,A,m]);const Ne=l.useCallback(a=>a<=6?5:a<=8?8:a<=10?12:a<=12?16:a<=14?20:a<=17?25:29,[]),Ce=l.useCallback(a=>{const i=a.getSouthWest(),F=a.getNorthEast();return[[[i.lng,i.lat],[F.lng,i.lat],[F.lng,F.lat],[i.lng,F.lat],[i.lng,i.lat]]]},[]),Te=l.useCallback((a,i,F)=>{const S={};if(a==="active"){if(S.status="A",i!=="all"){const T=new Date;if(i.endsWith("+")){const E=parseInt(i.replace("+","")),D=new Date(T);D.setDate(D.getDate()-E),S.maxListDate=D.toISOString().split("T")[0]}else{const E=parseInt(i),D=new Date(T);D.setDate(D.getDate()-E),S.minListDate=D.toISOString().split("T")[0]}}}else if(a==="sold"){S.status="U",S.lastStatus="Sld";const T=parseInt(i);if(T>=2007&&T<=2025)S.minSoldDate=`${i}-01-01`,S.maxSoldDate=`${i}-12-31`;else{const E=new Date,D=new Date(E);D.setDate(D.getDate()-T),S.minSoldDate=D.toISOString().split("T")[0],S.maxSoldDate=E.toISOString().split("T")[0]}}else if(a==="unavailable"){S.status="U";const T=parseInt(i);if(T>=2007&&T<=2025)S.minUnavailableDate=`${i}-01-01`,S.maxUnavailableDate=`${i}-12-31`;else{const E=new Date,D=new Date(E);D.setDate(D.getDate()-T),S.minUnavailableDate=D.toISOString().split("T")[0],S.maxUnavailableDate=E.toISOString().split("T")[0]}}if(P.listingType==="sale"?S.type="Sale":P.listingType==="lease"&&(S.type="Lease"),P.propertyTypes.length===1&&(S["details.propertyType"]=P.propertyTypes[0]),P.minPrice&&P.minPrice>0&&(S.minPrice=P.minPrice),P.maxPrice&&P.maxPrice>0&&(S.maxPrice=P.maxPrice),P.bedrooms&&P.bedrooms!=="all"&&(P.bedrooms==="5+"?S.minBedrooms=5:(S.minBedrooms=parseInt(P.bedrooms),S.maxBedrooms=parseInt(P.bedrooms))),P.bathrooms&&P.bathrooms!=="all"&&(S.minBaths=parseInt(P.bathrooms.replace("+",""))),P.garageSpaces&&P.garageSpaces!=="all"&&(S.minGarageSpaces=parseInt(P.garageSpaces.replace("+",""))),P.minSqft&&P.minSqft>0&&(S.minSqft=P.minSqft),P.maxSqft&&P.maxSqft>0&&(S.maxSqft=P.maxSqft),P.openHouse&&P.openHouse!=="all"){const T=new Date;T.setHours(0,0,0,0);let E=null,D=null;if(P.openHouse==="today")E=T,D=T;else if(P.openHouse==="thisWeekend"){const G=T.getDay(),$=G===0?6:6-G,Y=new Date(T);Y.setDate(T.getDate()+$);const oe=new Date(Y);oe.setDate(Y.getDate()+1),E=Y,D=oe}else if(P.openHouse==="thisWeek"){E=T;const G=new Date(T);G.setDate(T.getDate()+(7-T.getDay())),D=G}else P.openHouse==="anytime"&&(E=T);E&&(S.minOpenHouseDate=E.toISOString().split("T")[0],D&&(S.maxOpenHouseDate=D.toISOString().split("T")[0]))}return S},[P]),$e=l.useCallback((a,i)=>{const[F,S]=a,[T,E]=i,D=6371e3,G=(E-S)*Math.PI/180,$=(T-F)*Math.PI/180,Y=Math.sin(G/2)*Math.sin(G/2)+Math.cos(S*Math.PI/180)*Math.cos(E*Math.PI/180)*Math.sin($/2)*Math.sin($/2),oe=2*Math.atan2(Math.sqrt(Y),Math.sqrt(1-Y));return D*oe},[]),Me=l.useCallback((a,i)=>{const F=[],S=new Set;return a.forEach((T,E)=>{if(S.has(E))return;const D=[T];S.add(E);const G=T.geometry.coordinates;a.forEach(($,Y)=>{if(S.has(Y)||E===Y)return;const oe=$.geometry.coordinates;$e(G,oe)<=i&&(D.push($),S.add(Y))}),F.push(D)}),F},[$e]),ze=l.useCallback((a,i)=>{const F=i<=10?30:i<=12?60:i<=13?100:30,S=i<=10?500:i<=12?300:i<=13?200:100,T=a.filter($=>$.properties.count<=F),E=a.filter($=>$.properties.count>F);if(T.length===0)return a;const G=Me(T,S).map($=>{if($.length===1)return $[0];const Y=$.reduce((U,ae)=>U+ae.properties.count,0),oe=$.reduce((U,ae)=>U+ae.geometry.coordinates[0],0)/$.length,he=$.reduce((U,ae)=>U+ae.geometry.coordinates[1],0)/$.length;return{type:"Feature",properties:{count:Y,precision:$[0].properties.precision,id:`merged-${$.map(U=>U.properties.id).join("-")}`,members:[]},geometry:{type:"Point",coordinates:[oe,he]}}});return[...E,...G]},[Me]),r=l.useCallback(async a=>{var D,G,$,Y,oe,he;if(!d.current)return;const i=d.current.getZoom(),F=Ne(i),S=JSON.stringify(Ce(a)),T=Math.round(i*2)/2,E=JSON.stringify(P);if(!(I.current&&I.current.bounds===S&&Math.abs(I.current.zoom-T)<.5&&I.current.filters===E)){I.current={bounds:S,zoom:T,filters:E},R.current=i,z(null);try{const U=[];P.activeListingDays!==void 0&&U.push({type:"active",value:P.activeListingDays}),P.soldListingDays!==void 0&&U.push({type:"sold",value:P.soldListingDays}),P.unavailableListingDays!==void 0&&U.push({type:"unavailable",value:P.unavailableListingDays}),U.length===0&&U.push({type:"active",value:"all"});const ae=U.length>1;let Q;if(ae){console.log("[Bundled Search] Multiple status filters active:",U.map(Z=>Z.type));const s=U.map(({type:Z,value:W})=>{const X=Te(Z,W,i);return X.map=Ce(a),X}),O=new URL("https://api.repliers.io/listings");i>=18?(O.searchParams.set("cluster","false"),O.searchParams.set("listings","true"),O.searchParams.set("fields","address.*,mlsNumber,listPrice,details.numBedrooms,details.numBedroomsPlus,details.numBathrooms,details.numBathroomsPlus,details.numGarageSpaces,details.propertyType,type,lastStatus,images,status,class,coordinates,latitude,longitude,geo,location,map"),O.searchParams.set("pageSize","500")):(O.searchParams.set("cluster","true"),O.searchParams.set("clusterPrecision",F.toString()),O.searchParams.set("clusterLimit","500"),O.searchParams.set("clusterFields","mlsNumber,listPrice,coordinates,type,address.*,details.numBedrooms,details.numBedroomsPlus,details.numBathrooms,details.numBathroomsPlus,details.numGarageSpaces,details.propertyType,lastStatus,images,status,class"),i>=14?(O.searchParams.set("listings","true"),O.searchParams.set("fields","address.*,mlsNumber,listPrice,details.numBedrooms,details.numBedroomsPlus,details.numBathrooms,details.numBathroomsPlus,details.numGarageSpaces,details.propertyType,type,lastStatus,images,status,class,coordinates,latitude,longitude,geo,location,map"),O.searchParams.set("pageSize","500")):O.searchParams.set("listings","false"));const j={queries:s};console.log("[Bundled Search] POST Request Body:",JSON.stringify(j,null,2)),console.log("[Bundled Search] POST URL:",O.toString());const K=await fetch(O.toString(),{method:"POST",headers:{"REPLIERS-API-KEY":e,"Content-Type":"application/json"},body:JSON.stringify(j)});if(!K.ok){const Z=await K.text();throw console.error("[Bundled Search] Error Response:",Z),new Error(`Bundled API Error: ${K.status} ${K.statusText} - ${Z}`)}Q=await K.json();const _=((G=(D=Q.aggregates)==null?void 0:D.map)==null?void 0:G.clusters)||[],se=Q.listings||[];console.log(`[Bundled Search] API returned ${_.length} clusters and ${se.length} listings (already merged)`)}else{const{type:s,value:O}=U[0];console.log(`[Single Search] Status: ${s}, Value: ${O}`);const j=new URL("https://api.repliers.io/listings"),K=Te(s,O,i);Object.entries(K).forEach(([se,Z])=>{Array.isArray(Z)?Z.forEach(W=>j.searchParams.append(se,W.toString())):j.searchParams.set(se,Z.toString())}),j.searchParams.set("map",JSON.stringify(Ce(a))),j.searchParams.set("key",e),i>=18?(j.searchParams.set("cluster","false"),j.searchParams.set("listings","true"),j.searchParams.set("fields","address.*,mlsNumber,listPrice,details.numBedrooms,details.numBedroomsPlus,details.numBathrooms,details.numBathroomsPlus,details.numGarageSpaces,details.propertyType,type,lastStatus,images,status,class,coordinates,latitude,longitude,geo,location,map"),j.searchParams.set("pageSize","500")):(j.searchParams.set("cluster","true"),j.searchParams.set("clusterPrecision",F.toString()),j.searchParams.set("clusterLimit","500"),j.searchParams.set("clusterFields","mlsNumber,listPrice,coordinates,type,address.*,details.numBedrooms,details.numBedroomsPlus,details.numBathrooms,details.numBathroomsPlus,details.numGarageSpaces,details.propertyType,lastStatus,images,status,class"),i>=14?(j.searchParams.set("listings","true"),j.searchParams.set("fields","address.*,mlsNumber,listPrice,details.numBedrooms,details.numBedroomsPlus,details.numBathrooms,details.numBathroomsPlus,details.numGarageSpaces,details.propertyType,type,lastStatus,images,status,class,coordinates,latitude,longitude,geo,location,map"),j.searchParams.set("pageSize","500")):j.searchParams.set("listings","false")),console.log(`[API Call] ${j.toString()}`);const _=await fetch(j.toString(),{headers:{"REPLIERS-API-KEY":e,"Content-Type":"application/json"}});if(!_.ok)throw new Error(`API Error: ${_.status} ${_.statusText}`);Q=await _.json()}const re=((Y=($=Q.aggregates)==null?void 0:$.map)==null?void 0:Y.clusters)||Q.clusters||[],me=[],ee=[],le=Q.listings||Q.results||[];console.log(`
 API RESPONSE DEBUG (zoom: ${i.toFixed(2)})`),console.log(`   Clustering: ${i>=18?"DISABLED (individual listings only)":"ENABLED"}`),console.log(`   Total clusters from API: ${re.length}`),console.log(`   Total raw listings from API: ${le.length}`);const xe=le.map(s=>s.mlsNumber).filter(Boolean),Be=new Set(xe);xe.length!==Be.size&&console.log(`    DUPLICATES DETECTED: ${xe.length} total, ${Be.size} unique (${xe.length-Be.size} duplicates)`),re.length>0&&console.log("   First cluster structure:",{count:re[0].count,propertiesLength:((oe=re[0].properties)==null?void 0:oe.length)||0,mapLength:((he=re[0].map)==null?void 0:he.length)||0,hasMembers:!!(re[0].properties||re[0].map)});const be=s=>P.propertyTypes.length===0?!0:s?P.propertyTypes.includes(s):!1;re.forEach((s,O)=>{var K,_,se,Z,W,X,ne,ue,Re,st,nt,ot,at,it,lt,ct,dt,ut,pt,mt;const j=[((K=s.location)==null?void 0:K.longitude)||((_=s.coordinates)==null?void 0:_.lng)||s.longitude||((se=s.center)==null?void 0:se.lng),((Z=s.location)==null?void 0:Z.latitude)||((W=s.coordinates)==null?void 0:W.lat)||s.latitude||((X=s.center)==null?void 0:X.lat)];if(s.count===1&&i>=14){const Se=((ne=s.listing)==null?void 0:ne.listPrice)||s.listPrice||s.map&&((ue=s.map[0])==null?void 0:ue.listPrice),Xe=((st=(Re=s.listing)==null?void 0:Re.details)==null?void 0:st.propertyType)||((nt=s.details)==null?void 0:nt.propertyType);be(Xe)&&ee.push({type:"Feature",properties:{mlsNumber:s.mlsNumber||((ot=s.listing)==null?void 0:ot.mlsNumber)||`single-${O}`,listPrice:typeof Se=="string"?parseFloat(Se):Se,propertyType:s.propertyType||((at=s.listing)==null?void 0:at.propertyType)||s.status||"Sale",type:((it=s.listing)==null?void 0:it.type)||s.type,isProperty:!0,address:((lt=s.listing)==null?void 0:lt.address)||s.address,details:((ct=s.listing)==null?void 0:ct.details)||s.details,images:((dt=s.listing)==null?void 0:dt.images)||s.images,lastStatus:((ut=s.listing)==null?void 0:ut.lastStatus)||s.lastStatus,status:((pt=s.listing)==null?void 0:pt.status)||s.status,class:((mt=s.listing)==null?void 0:mt.class)||s.class},geometry:{type:"Point",coordinates:[j[0],j[1]]}})}else if(s.count===1)me.push({type:"Feature",properties:{count:s.count||1,apiCount:s.count||1,precision:s.precision||F,id:`cluster-${O}`,members:s.properties||s.map||[]},geometry:{type:"Point",coordinates:[j[0],j[1]]}});else{let Se=j;if(s.properties&&Array.isArray(s.properties)){const Ye=[];if(s.properties.forEach(We=>{const Je=Qe(We);Je&&Ye.push(Je)}),Ye.length>0){const We=et(Ye);We&&(Se=tt(Ye,We))}}const Xe=s.properties||s.map||[],Ut=s.count||1;me.push({type:"Feature",properties:{count:Ut,apiCount:s.count||1,precision:s.precision||F,id:`cluster-${O}`,members:Xe},geometry:{type:"Point",coordinates:[Se[0],Se[1]]}})}});const ce=new Set(ee.map(s=>s.properties.mlsNumber));console.log(`   Processing ${le.length} raw listings into property features...`);let te=0,ve=0,Oe=0;const de=le.filter(s=>{var se,Z,W,X,ne,ue,Re;if(ce.has(s.mlsNumber))return te++,!1;const O=((se=s.map)==null?void 0:se.longitude)||((Z=s.coordinates)==null?void 0:Z.lng)||((W=s.coordinates)==null?void 0:W.longitude)||s.longitude||s.lng,j=((X=s.map)==null?void 0:X.latitude)||((ne=s.coordinates)==null?void 0:ne.lat)||((ue=s.coordinates)==null?void 0:ue.latitude)||s.latitude||s.lat;return O!==void 0&&j!==void 0&&!isNaN(O)&&!isNaN(j)?be((Re=s.details)==null?void 0:Re.propertyType)?!0:(Oe++,!1):(ve++,!1)}).map(s=>{var _,se,Z,W,X;const O={mlsNumber:s.mlsNumber,listPrice:typeof s.listPrice=="string"?parseFloat(s.listPrice):s.listPrice,propertyType:s.propertyType||((_=s.details)==null?void 0:_.propertyType)||s.type||s.status||"Sale",type:s.type,isProperty:!0},j=i>=13?{address:s.address,details:s.details,images:s.images,type:s.type,lastStatus:s.lastStatus,status:s.status,class:s.class}:{};return{type:"Feature",properties:{...O,...j},geometry:{type:"Point",coordinates:[((se=s.coordinates)==null?void 0:se.lng)||s.longitude||((Z=s.map)==null?void 0:Z.longitude),((W=s.coordinates)==null?void 0:W.lat)||s.latitude||((X=s.map)==null?void 0:X.latitude)]}}}),ie=(s,O,j)=>{const K=[...O,...j];return s.map(_=>{const se=_.geometry.coordinates,Z=K.filter(X=>{const ne=X.geometry.coordinates;return $e(se,ne)<=50}),W=Z.length>0?Z.length:_.properties.count;return{..._,properties:{..._.properties,count:W}}})};console.log(`   Property features created: ${de.length}`),console.log(`   Single property features created: ${ee.length}`),console.log(`   Cluster features: ${me.length}`),le.length>0&&de.length===0&&console.log(`    Filtering issue: ${te} duplicates, ${ve} invalid coords, ${Oe} wrong property type`);const ge=de.length>0||ee.length>0,fe=i>=14&&ge?ie(me,de,ee):me;i>=14&&ge&&console.log(`   Recalculated cluster counts at zoom ${i.toFixed(2)}`);let qe;if(i>=14){const s=[...fe.map(j=>({...j,type:"cluster"})),...ee.map(j=>({...j,type:"singleProperty"})),...de.map(j=>({...j,type:"property"}))];qe=Me(s,50).map(j=>{const K=j.filter(W=>W.type==="cluster"),_=j.filter(W=>W.type==="property"||W.type==="singleProperty"),se=K.reduce((W,X)=>{var ne;return W+(((ne=X.properties)==null?void 0:ne.count)||0)},0),Z=_.length;return i>=17?_.length>0?_:K.length>0?K[0]:null:_.length>3?K.length>0?K.reduce((W,X)=>{var ne,ue;return(((ne=X.properties)==null?void 0:ne.count)||0)>(((ue=W.properties)==null?void 0:ue.count)||0)?X:W}):_[0]:se>Z&&K.length>0?K.reduce((W,X)=>{var ne,ue;return(((ne=X.properties)==null?void 0:ne.count)||0)>(((ue=W.properties)==null?void 0:ue.count)||0)?X:W}):_.length>0?_:K.length>0&&K[0].properties.count>0?K[0]:null}).flat().filter(Boolean)}else qe=ze([...me,...ee],i);const _t={type:"FeatureCollection",features:qe},rt=d.current.getSource("listings");rt&&(rt.setData(_t),De(qe));const Ht=Q.count||me.reduce((s,O)=>s+O.properties.count,0);v(Ht)}catch(U){const ae=U instanceof Error?U.message:"Failed to load listings";z(ae)}}},[e,Ne,Ce,De,P,Te,Me,ze]);return l.useEffect(()=>{ye.current=r},[r]),l.useEffect(()=>{if(!(!N.current||d.current||!w||y===null))return _e.accessToken=n,d.current=new _e.Map({container:N.current,style:f,center:w,zoom:y}),d.current.on("load",()=>{var i;if(!d.current)return;d.current.addControl(new _e.NavigationControl),d.current.addSource("listings",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),d.current.addLayer({id:"clusters",type:"circle",source:"listings",filter:["has","count"],paint:{"circle-color":["step",["get","count"],"#51bbd6",30,"#f1c40f",60,"#f39c12",150,"#f28cb1",500,"#e74c3c"],"circle-radius":["step",["get","count"],10,30,12,60,14,150,18,500,22],"circle-stroke-width":2,"circle-stroke-color":"#fff","circle-opacity":.8}}),d.current.addLayer({id:"cluster-count",type:"symbol",source:"listings",filter:["has","count"],layout:{"text-field":["get","count"],"text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":["step",["get","count"],10,30,11,60,12,150,14,500,16]},paint:{"text-color":"#ffffff"}}),d.current.addLayer({id:"property-dots",type:"circle",source:"listings",filter:["has","isProperty"],paint:{"circle-color":"#374151","circle-radius":3,"circle-stroke-width":1,"circle-stroke-color":"#fff","circle-opacity":.9}}),d.current.on("click","clusters",async F=>{var U,ae;if(!d.current||!((U=F.features)!=null&&U[0]))return;const S=F.features[0],T=S.geometry.coordinates,E=S.properties.count,D=S.properties.apiCount,G=F.originalEvent.clientX,$=F.originalEvent.clientY,Y=d.current.getZoom();if(console.log(`
 CLUSTER CLICKED`),console.log(`   Zoom Level: ${Y.toFixed(2)}`),console.log(`   Display Count: ${E}`),console.log(`   API Count (unfiltered): ${D||E}`),Y>=18){console.log("    Cluster exists at zoom 18+, zooming in further to break it apart"),d.current.easeTo({center:T,zoom:Math.min(Y+1,22),duration:500});return}if(Y>=14){const Q=d.current.getSource("listings");if(Q&&Q._data){const ee=((ae=Q._data.features)==null?void 0:ae.filter(ce=>{var te;return((te=ce.properties)==null?void 0:te.isProperty)===!0}))||[];console.log(`   Total Properties Available: ${ee.length}`);const le=ee.map(ce=>{var te;return(te=ce.properties)==null?void 0:te.mlsNumber}).filter(Boolean),xe=new Set(le);le.length!==xe.size&&console.log(`    DUPLICATES IN MAP DATA: ${le.length} total properties, ${xe.size} unique MLSNumbers`);const be=ee.map(ce=>{const te=ce.geometry.coordinates,ve=Math.sqrt(Math.pow(te[0]-T[0],2)+Math.pow(te[1]-T[1],2));return{feature:ce,distance:ve}}).sort((ce,te)=>ce.distance-te.distance).slice(0,E);if(console.log(`   Actual Properties in Cluster: ${be.length}`),console.log(`   Discrepancy: ${E!==be.length?` ${E-be.length} missing`:" Match"}`),be.length>0){const ce=be.map(({feature:de})=>{const ie=de.properties;return{mlsNumber:ie.mlsNumber||"N/A",listPrice:ie.listPrice||0,address:ie.address||{streetNumber:"Unknown",streetName:"Address",city:"Unknown",state:"Unknown"},details:ie.details||{numBedrooms:0,numBathrooms:0,numGarageSpaces:0,propertyType:"Unknown"},images:ie.images||[],type:ie.type||"Sale",lastStatus:ie.lastStatus||"New",status:ie.status||"A"}}),te=ce.map(de=>de.mlsNumber),ve=new Set(te);if(te.length!==ve.size){console.log(`    DUPLICATES IN CLUSTER TOOLTIP: ${te.length} total, ${ve.size} unique`);const de=te.reduce((ge,fe)=>(ge[fe]=(ge[fe]||0)+1,ge),{}),ie=Object.entries(de).filter(([ge,fe])=>fe>1).map(([ge,fe])=>`${ge} (${fe}x)`);console.log("   Duplicate MLSNumbers:",ie)}else console.log("    No duplicates in cluster tooltip");const Oe=ce.filter((de,ie,ge)=>ie===ge.findIndex(fe=>fe.mlsNumber===de.mlsNumber));pe(Oe),Ie({x:G,y:$}),J(!0),o(!1);return}}const re=[{mlsNumber:`Cluster-${E}`,listPrice:0,address:{streetNumber:"Multiple",streetName:"Properties",city:"Available",state:""},details:{numBedrooms:0,numBathrooms:0,numGarageSpaces:0,propertyType:`${E} Properties in Cluster`},images:[],type:"Sale",lastStatus:"Available",status:"A"}];pe(re),Ie({x:G,y:$}),J(!0),o(!1);return}const oe=Y>=14?2:Y>=12?3:4,he=Math.min(Y+oe,16);d.current.easeTo({center:T,zoom:he,duration:1e3,easing:Q=>Q*(2-Q)})}),d.current.on("mouseenter","clusters",()=>{d.current&&(d.current.getCanvas().style.cursor="pointer")}),d.current.on("mouseleave","clusters",()=>{d.current&&(d.current.getCanvas().style.cursor="")}),d.current.on("mouseenter","property-dots",()=>{d.current&&(d.current.getCanvas().style.cursor="pointer")}),d.current.on("mouseleave","property-dots",()=>{d.current&&(d.current.getCanvas().style.cursor="")});const a=d.current.getBounds();a&&((i=ye.current)==null||i.call(ye,a))}),d.current.on("moveend",()=>{var i;if(!d.current)return;const a=d.current.getBounds();a&&((i=ye.current)==null||i.call(ye,a))}),()=>{Pe(),d.current&&(d.current.remove(),d.current=null)}},[n,f,w,y,Pe,De]),l.useEffect(()=>{if(d.current){I.current=null;const a=d.current.getBounds();a&&r(a)}},[P,r]),t.jsxs("div",{style:{width:c,height:x,position:"relative"},children:[t.jsx("div",{ref:N,style:{width:"100%",height:"100%"},className:"rounded-lg overflow-hidden"}),t.jsx(Yt,{filters:P,onFiltersChange:Fe,apiKey:e}),b&&t.jsx("div",{style:{position:"absolute",bottom:"16px",right:"16px",backgroundColor:"rgba(255, 255, 255, 0.95)",padding:"8px 12px",borderRadius:"6px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)",fontSize:"14px",fontWeight:"600",color:"#374151"},children:k?t.jsx("span",{style:{color:"#ef4444"},children:"Error"}):t.jsxs("span",{children:[g.toLocaleString()," properties"]})}),k&&t.jsx("div",{style:{position:"absolute",bottom:"16px",left:"16px",right:"16px",backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"6px",padding:"12px",color:"#b91c1c",fontSize:"14px"},children:k}),t.jsx(Ft,{open:M,onClose:()=>o(!1),listing:p,position:q,mapContainer:N.current}),t.jsx(zt,{open:H,onClose:()=>J(!1),properties:V,position:Ze,mapContainer:N.current})]})}Wt.__docgenInfo={description:"",methods:[],displayName:"MapListings",props:{apiKey:{required:!0,tsType:{name:"string"},description:"Repliers API key - required"},mapboxToken:{required:!0,tsType:{name:"string"},description:"MapBox access token - required"},initialCenter:{required:!1,tsType:{name:"tuple",raw:"[number, number]",elements:[{name:"number"},{name:"number"}]},description:"Initial map center coordinates [lng, lat] - auto-detects if not provided"},initialZoom:{required:!1,tsType:{name:"number"},description:"Initial zoom level - auto-calculates if not provided"},height:{required:!1,tsType:{name:"string"},description:"Map container height",defaultValue:{value:'"100%"',computed:!1}},width:{required:!1,tsType:{name:"string"},description:"Map container width",defaultValue:{value:'"100%"',computed:!1}},mapStyle:{required:!1,tsType:{name:"string"},description:"Map style",defaultValue:{value:'"mapbox://styles/mapbox/streets-v12"',computed:!1}},centerCalculation:{required:!1,tsType:{name:"union",raw:'"average" | "city"',elements:[{name:"literal",value:'"average"'},{name:"literal",value:'"city"'}]},description:"Center calculation method",defaultValue:{value:'"average"',computed:!1}},showPropertyCount:{required:!1,tsType:{name:"boolean"},description:"Show property count display",defaultValue:{value:"true",computed:!1}}}};const ir={title:"Tutorials/Configuring the MapListings Component with the Repliers API (WIP)",component:Wt,parameters:{layout:"fullscreen",docs:{page:()=>null}},argTypes:{apiKey:{control:"text",description:"Repliers API key (required)"},mapboxToken:{control:"text",description:"MapBox access token (required)"},initialCenter:{control:"object",description:"Initial map center coordinates [lng, lat]"},initialZoom:{control:{type:"range",min:1,max:20,step:1},description:"Initial zoom level"},height:{control:"text",description:"Map container height"},width:{control:"text",description:"Map container width"},mapStyle:{control:"select",options:["mapbox://styles/mapbox/streets-v12","mapbox://styles/mapbox/light-v11","mapbox://styles/mapbox/dark-v11","mapbox://styles/mapbox/satellite-v9","mapbox://styles/mapbox/satellite-streets-v12"],description:"MapBox map style"}}},Ue="pxI19UMy9zfw9vz5lRxoGpjJWXrMnm",Ke="pk.eyJ1IjoibWlsYW5zb21hIiwiYSI6ImNtZWJrODZmajBwMWQya3B3cHE1M2Y3anoifQ.HMDLOc-6V9K3-mHKeTHHxw",Le={args:{apiKey:Ue,mapboxToken:Ke,initialZoom:8,height:"100vh",width:"100vw",mapStyle:"mapbox://styles/mapbox/streets-v12"},parameters:{docs:{description:{story:`
 **This is the main interactive demo!** This example demonstrates server-side clustering
with the Repliers API using the default 'average' center calculation method.

**Cluster Precision Levels:**
- **Zoom 6 and below**: Continental-level clusters (precision 3)
- **Zoom 7-8**: State/Province-level clusters (precision 5)
- **Zoom 9-10**: Metropolitan-level clusters (precision 8)
- **Zoom 11-12**: City-level clusters (precision 12)
- **Zoom 13-14**: District-level clusters (precision 16)
- **Zoom 15+**: Street-level clusters (precision 20)

**Center Calculation:**
Uses the largest cluster method to find the area with the most listings and centers the map on it.

**Performance Features:**
- Server-side clustering reduces data transfer
- Only one API call per map movement
- Cluster limit reduced to 100 for better distribution
        `}}}},je={args:{apiKey:Ue,mapboxToken:Ke,initialZoom:10,height:"100vh",width:"100vw",mapStyle:"mapbox://styles/mapbox/streets-v12"},parameters:{docs:{description:{story:`
 **Largest Cluster Center Calculation**

This method finds the largest cluster of listings and centers the map on it for optimal viewing.

**How it works:**
- Calls the clustering API with low precision to get the biggest clusters
- Identifies the cluster with the highest number of listings
- Centers the map on that cluster's location

**Best for:**
- Focusing on the most active area in your dataset
- Automatic centering on the densest listing concentration
- Quick identification of market hotspots

**Console output:** \` Largest cluster: 24938 listings at [-79.3832, 43.6532]\`
        `}}}},ke={args:{apiKey:Ue,mapboxToken:Ke,initialZoom:10,height:"100vh",width:"100vw",mapStyle:"mapbox://styles/mapbox/dark-v11"},parameters:{docs:{description:{story:`
 **Map Style Customization**

This example showcases the dark theme map style, demonstrating how you can customize
the visual appearance of your MapListings component.

**Available styles:**
- \`mapbox://styles/mapbox/streets-v12\` - Default streets view
- \`mapbox://styles/mapbox/light-v11\` - Light theme
- \`mapbox://styles/mapbox/dark-v11\` - Dark theme (shown here)
- \`mapbox://styles/mapbox/satellite-v9\` - Satellite imagery
- \`mapbox://styles/mapbox/satellite-streets-v12\` - Satellite with street labels

**Best for:**
- Matching your application's design theme
- Providing user choice for map appearance
- Better visibility in different lighting conditions

**Note:** The clustering and listing functionality remains the same across all styles.
        `}}}},Ee={args:{apiKey:Ue,mapboxToken:Ke,initialCenter:[-98.5795,39.8283],initialZoom:4,height:"100vh",width:"100vw",mapStyle:"mapbox://styles/mapbox/streets-v12"},parameters:{docs:{disable:!0}}};var ht,ft,yt,bt,xt;Le.parameters={...Le.parameters,docs:{...(ht=Le.parameters)==null?void 0:ht.docs,source:{originalSource:`{
  args: {
    apiKey: SAMPLE_API_KEY,
    mapboxToken: SAMPLE_MAPBOX_TOKEN,
    initialZoom: 8,
    height: "100vh",
    width: "100vw",
    mapStyle: "mapbox://styles/mapbox/streets-v12"
  },
  parameters: {
    docs: {
      description: {
        story: \`
 **This is the main interactive demo!** This example demonstrates server-side clustering
with the Repliers API using the default 'average' center calculation method.

**Cluster Precision Levels:**
- **Zoom 6 and below**: Continental-level clusters (precision 3)
- **Zoom 7-8**: State/Province-level clusters (precision 5)
- **Zoom 9-10**: Metropolitan-level clusters (precision 8)
- **Zoom 11-12**: City-level clusters (precision 12)
- **Zoom 13-14**: District-level clusters (precision 16)
- **Zoom 15+**: Street-level clusters (precision 20)

**Center Calculation:**
Uses the largest cluster method to find the area with the most listings and centers the map on it.

**Performance Features:**
- Server-side clustering reduces data transfer
- Only one API call per map movement
- Cluster limit reduced to 100 for better distribution
        \`
      }
    }
  }
}`,...(yt=(ft=Le.parameters)==null?void 0:ft.docs)==null?void 0:yt.source},description:{story:`**Part 1: Basic Map Listings Display**

This example shows the core functionality of displaying clustered real estate
listings on a map. Different API keys will show different datasets.

**Try this:**
1. Notice the large cluster numbers (hundreds/thousands of properties)
2. Click any cluster to zoom in and see it break into smaller sub-clusters
3. Continue drilling down until you reach individual blue property dots
4. Click individual properties to see basic listing details
5. Watch the property count update in the top-right corner`,...(xt=(bt=Le.parameters)==null?void 0:bt.docs)==null?void 0:xt.description}}};var vt,St,wt,Pt,Ct;je.parameters={...je.parameters,docs:{...(vt=je.parameters)==null?void 0:vt.docs,source:{originalSource:`{
  args: {
    apiKey: SAMPLE_API_KEY,
    mapboxToken: SAMPLE_MAPBOX_TOKEN,
    initialZoom: 10,
    height: "100vh",
    width: "100vw",
    mapStyle: "mapbox://styles/mapbox/streets-v12"
  },
  parameters: {
    docs: {
      description: {
        story: \`
 **Largest Cluster Center Calculation**

This method finds the largest cluster of listings and centers the map on it for optimal viewing.

**How it works:**
- Calls the clustering API with low precision to get the biggest clusters
- Identifies the cluster with the highest number of listings
- Centers the map on that cluster's location

**Best for:**
- Focusing on the most active area in your dataset
- Automatic centering on the densest listing concentration
- Quick identification of market hotspots

**Console output:** \\\` Largest cluster: 24938 listings at [-79.3832, 43.6532]\\\`
        \`
      }
    }
  }
}`,...(wt=(St=je.parameters)==null?void 0:St.docs)==null?void 0:wt.source},description:{story:`**Part 2: Largest Cluster Center Calculation**

This example demonstrates the largest cluster center calculation method, which
finds the cluster with the most listings and centers the map on it.
This provides optimal viewing of the most active areas.`,...(Ct=(Pt=je.parameters)==null?void 0:Pt.docs)==null?void 0:Ct.description}}};var Tt,Mt,Lt,jt,kt;ke.parameters={...ke.parameters,docs:{...(Tt=ke.parameters)==null?void 0:Tt.docs,source:{originalSource:`{
  args: {
    apiKey: SAMPLE_API_KEY,
    mapboxToken: SAMPLE_MAPBOX_TOKEN,
    initialZoom: 10,
    height: "100vh",
    width: "100vw",
    mapStyle: "mapbox://styles/mapbox/dark-v11"
  },
  parameters: {
    docs: {
      description: {
        story: \`
 **Map Style Customization**

This example showcases the dark theme map style, demonstrating how you can customize
the visual appearance of your MapListings component.

**Available styles:**
- \\\`mapbox://styles/mapbox/streets-v12\\\` - Default streets view
- \\\`mapbox://styles/mapbox/light-v11\\\` - Light theme
- \\\`mapbox://styles/mapbox/dark-v11\\\` - Dark theme (shown here)
- \\\`mapbox://styles/mapbox/satellite-v9\\\` - Satellite imagery
- \\\`mapbox://styles/mapbox/satellite-streets-v12\\\` - Satellite with street labels

**Best for:**
- Matching your application's design theme
- Providing user choice for map appearance
- Better visibility in different lighting conditions

**Note:** The clustering and listing functionality remains the same across all styles.
        \`
      }
    }
  }
}`,...(Lt=(Mt=ke.parameters)==null?void 0:Mt.docs)==null?void 0:Lt.source},description:{story:`**Part 3: Different Map Styles**

This example demonstrates different map styles available with the MapListings component.
You can choose from various MapBox styles to match your application's design.`,...(kt=(jt=ke.parameters)==null?void 0:jt.docs)==null?void 0:kt.description}}};var Et,It,At,Dt,Nt;Ee.parameters={...Ee.parameters,docs:{...(Et=Ee.parameters)==null?void 0:Et.docs,source:{originalSource:`{
  args: {
    apiKey: SAMPLE_API_KEY,
    mapboxToken: SAMPLE_MAPBOX_TOKEN,
    initialCenter: [-98.5795, 39.8283],
    // Continental USA center
    initialZoom: 4,
    height: "100vh",
    width: "100vw",
    mapStyle: "mapbox://styles/mapbox/streets-v12"
    // Note: These are placeholder props for future filter implementation
    // minBedrooms: 2,
    // maxPrice: 800000,
    // propertyTypes: ['residential', 'condo']
  },
  parameters: {
    docs: {
      disable: true // Hide from docs
    }
  }
}`,...(At=(It=Ee.parameters)==null?void 0:It.docs)==null?void 0:At.source},description:{story:`**Part 4: Custom Filters and Multi-Query Setup**

This placeholder demonstrates how the component could be extended with
property filters (bedrooms, bathrooms, price range) and multi-query
functionality for complex search scenarios.`,...(Nt=(Dt=Ee.parameters)==null?void 0:Dt.docs)==null?void 0:Nt.description}}};const lr=["Part1_BasicListings","Part2_LargestClusterCenter","Part3_MapStyles","Part4_FilteredSearch"],fr=Object.freeze(Object.defineProperty({__proto__:null,Part1_BasicListings:Le,Part2_LargestClusterCenter:je,Part3_MapStyles:ke,Part4_FilteredSearch:Ee,__namedExportsOrder:lr,default:ir},Symbol.toStringTag,{value:"Module"}));export{fr as M,Le as P};
