import{j as e}from"./jsx-runtime-xF634gn_.js";import{r as h}from"./index-C-7etoUd.js";import{S as G}from"./search-DVhWTIqa.js";import{L as z}from"./loader-circle-x9Fu845P.js";import{C as U,M as S}from"./map-pin-DKxHnLO8.js";import{c as O}from"./createLucideIcon-BmJP7rG3.js";import{B as V,C as Y}from"./car-CJRJwKAe.js";import{B as X}from"./bath-D_6pRDEi.js";/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 16s-1.5-2-4-2-4 2-4 2",key:"epbg0q"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],J=O("frown",W);function C({apiKey:v,placeholder:E="Search for properties..."}){const b=v||void 0,[d,L]=h.useState(""),[i,x]=h.useState({properties:[],cities:[],neighborhoods:[],areas:[]}),[m,N]=h.useState(!1),[j,g]=h.useState(!1),[y,u]=h.useState(null);h.useEffect(()=>{if(!d.trim()){x({properties:[],cities:[],neighborhoods:[],areas:[]}),u(null),g(!1);return}if(d.trim().length<3){x({properties:[],cities:[],neighborhoods:[],areas:[]}),u(null),g(!1);return}g(!0),u(null);const s=setTimeout(async()=>{g(!1),await $(d.trim())},400);return()=>{clearTimeout(s),g(!1)}},[d]);const I=s=>{const t=[{mlsNumber:"X12151945",listPrice:125e4,address:{streetNumber:"123",streetName:"Demo Street",city:"Toronto",state:"ON"},details:{numBedrooms:3,numBathrooms:2,numGarageSpaces:2,propertyType:"Single Family"},images:["sample1.jpg"],type:"Sale",lastStatus:"New"},{mlsNumber:"X12151946",listPrice:89e4,address:{streetNumber:"456",streetName:"Sample Avenue",city:"Vancouver",state:"BC"},details:{numBedrooms:2,numBathrooms:1,numGarageSpaces:1,propertyType:"Condo"},images:["sample2.jpg"],type:"Sale",lastStatus:"New"}],r=[{name:"Toronto",type:"city",address:{state:"ON",city:"Toronto"}},{name:"Downtown Toronto",type:"neighborhood",address:{state:"ON",city:"Toronto"}},{name:"Greater Toronto Area",type:"area",address:{state:"ON"}}],a=t.filter(l=>{var p,n;return((p=l.address.city)==null?void 0:p.toLowerCase().includes(s.toLowerCase()))||((n=l.address.streetName)==null?void 0:n.toLowerCase().includes(s.toLowerCase()))||l.mlsNumber.toLowerCase().includes(s.toLowerCase())}),o=r.filter(l=>l.name.toLowerCase().includes(s.toLowerCase()));return{listings:a,locations:o}},$=async s=>{if(!b){u("API key is required. Please provide the apiKey prop. Environment variable fallback only works in development mode.");return}if(N(!0),u(null),b==="your_sample_api_key_here"){await new Promise(o=>setTimeout(o,800));const t=I(s),r=t.locations,a=t.listings;x({properties:a,cities:r.filter(o=>o.type==="city"),neighborhoods:r.filter(o=>o.type==="neighborhood"),areas:r.filter(o=>o.type==="area")}),N(!1);return}try{const t=[fetch(`https://api.repliers.io/locations/autocomplete?search=${encodeURIComponent(s)}`,{headers:{"REPLIERS-API-KEY":b,"Content-Type":"application/json"}}),fetch(`https://api.repliers.io/listings?search=${encodeURIComponent(s)}&searchFields=address.streetNumber,address.streetName,mlsNumber,address.city&fields=address.*,mlsNumber,listPrice,details.numBedrooms,details.numBedroomsPlus,details.numBathrooms,details.numBathroomsPlus,details.numGarageSpaces,details.propertyType,type,lastStatus,images&fuzzysearch=true&status=A&status=U`,{headers:{"REPLIERS-API-KEY":b,"Content-Type":"application/json"}})],r=await Promise.all(t);for(let n=0;n<r.length;n++){const c=r[n];if(!c.ok){const w=n===0?"locations":"listings";if(c.status===400){if(w==="locations"&&s.length<3){x({properties:[],cities:[],neighborhoods:[],areas:[]}),N(!1);return}throw new Error(`Bad request to ${w} API. Please check your search query.`)}else throw c.status===401?new Error("Invalid API key. Please check your Repliers API key."):c.status===403?new Error(`API key doesn't have permission for the ${w} endpoint.`):c.status===429?new Error("Too many requests. Please wait a moment and try again."):new Error(`${w} API Error: ${c.status}`)}}const[a,o]=await Promise.all([r[0].json(),r[1].json()]),l=a.locations||[],p=o.listings||[];x({properties:p,cities:l.filter(n=>n.type==="city"),neighborhoods:l.filter(n=>n.type==="neighborhood"),areas:l.filter(n=>n.type==="area")})}catch(t){const r=t instanceof Error?t.message:"Failed to search. Please try again.";u(r)}finally{N(!1)}},B=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(s),_=s=>{if(!s)return"N/A";const t=s.numBedrooms,r=s.numBedroomsPlus;return t&&r&&r>0?`${t} + ${r}`:(t==null?void 0:t.toString())||"N/A"},R=s=>{if(!s)return"N/A";const t=s.numBathrooms,r=s.numBathroomsPlus;return t&&r&&r>0?`${t} + ${r}`:(t==null?void 0:t.toString())||"N/A"},M=s=>{var t;return s&&((t=s.numGarageSpaces)==null?void 0:t.toString())||"N/A"},F=(s,t)=>t==="New"||t==="Pc"||t==="Ext"?s==="Sale"?"For Sale":s==="Lease"?"For Lease":s||null:t?{Sus:"Suspended",Exp:"Expired",Sld:"Sold",Ter:"Terminated",Dft:"Deal Fell Through",Lsd:"Leased",Sc:"Sold Conditionally",Sce:"Sold Conditionally (Escape Clause)",Lc:"Leased Conditionally",Cs:"Coming Soon"}[t]||t:null,D=({type:s,lastStatus:t})=>{const r=F(s,t);if(!r)return null;let a="bg-green-100 text-green-600";switch(r){case"For Sale":case"For Lease":a="bg-green-100 text-green-600";break;case"Sold":a="bg-blue-100 text-blue-600";break;case"Leased":a="bg-purple-100 text-purple-600";break;case"Sold Conditionally":case"Sold Conditionally (Escape Clause)":case"Leased Conditionally":a="bg-amber-100 text-amber-600";break;case"Coming Soon":a="bg-indigo-100 text-indigo-600";break;case"Suspended":a="bg-orange-100 text-orange-600";break;case"Expired":a="bg-gray-100 text-gray-500";break;case"Terminated":case"Deal Fell Through":a="bg-red-100 text-red-600";break;default:a="bg-gray-100 text-gray-500"}return e.jsx("span",{className:`text-xs px-2 py-1 rounded-md font-medium ${a}`,children:r})},P=i.properties.length>0||i.cities.length>0||i.neighborhoods.length>0||i.areas.length>0,q=i.cities.length>0||i.neighborhoods.length>0||i.areas.length>0,K=d.trim()&&(P||m||j||y||d.trim().length>=3);return e.jsx("div",{className:"relative w-full max-w-[600px]",children:e.jsxs("div",{className:"relative flex items-center bg-gray-100 rounded-md px-4 py-2 w-full",children:[e.jsx(G,{className:"text-gray-400 w-5 h-5 mr-3"}),e.jsx("input",{type:"text",value:d,onChange:s=>L(s.target.value),placeholder:E,className:"flex-grow bg-transparent outline-none text-gray-700 placeholder-gray-500"}),m&&e.jsx(z,{className:"w-4 h-4 animate-spin text-gray-400 mr-2"}),e.jsx("span",{className:"text-gray-800 font-semibold text-sm px-2",children:"Search"}),K&&e.jsx("div",{className:"absolute top-full left-0 w-full min-w-[500px] max-w-[600px] mt-2 bg-white rounded-xl shadow-lg z-50",children:e.jsxs("div",{className:"max-h-[500px] overflow-y-auto p-4 space-y-4",children:[y&&e.jsxs("div",{className:"flex items-center gap-2 text-red-600 mb-4",children:[e.jsx(U,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:y})]}),m&&e.jsx("div",{className:"space-y-4",children:[...Array(3)].map((s,t)=>e.jsxs("div",{className:"flex items-center gap-4 animate-pulse",children:[e.jsx("div",{className:"w-24 h-16 bg-gray-200 rounded-md"}),e.jsxs("div",{className:"flex-grow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-32"}),e.jsx("div",{className:"h-5 bg-gray-200 rounded w-16"})]}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-20"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-16"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-18"})]})]})]},t))}),j&&!m&&e.jsx("div",{className:"space-y-4",children:[...Array(2)].map((s,t)=>e.jsxs("div",{className:"flex items-center gap-4 animate-pulse",children:[e.jsx("div",{className:"w-24 h-16 bg-gray-100 rounded-md"}),e.jsxs("div",{className:"flex-grow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("div",{className:"h-6 bg-gray-100 rounded w-32"}),e.jsx("div",{className:"h-5 bg-gray-100 rounded w-16"})]}),e.jsx("div",{className:"h-4 bg-gray-100 rounded w-3/4 mb-2"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("div",{className:"h-4 bg-gray-100 rounded w-20"}),e.jsx("div",{className:"h-4 bg-gray-100 rounded w-16"}),e.jsx("div",{className:"h-4 bg-gray-100 rounded w-18"})]})]})]},t))}),!m&&!j&&!y&&!P&&d.trim()&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(J,{className:"w-16 h-16 text-gray-400 mx-auto mb-3"}),e.jsx("h3",{className:"text-md font-semibold text-gray-700 mb-2",children:"No results found"}),e.jsx("p",{className:"text-gray-500 mb-2",children:"There aren't any search results that match your query."}),e.jsx("p",{className:"text-gray-500",children:"Try searching for a different property."})]}),!m&&!j&&!y&&(i.cities.length>0||i.neighborhoods.length>0||i.areas.length>0)&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide mb-2",children:"Locations"}),e.jsxs("div",{className:"space-y-0",children:[i.cities.map((s,t)=>{var a;const r=((a=s.address)==null?void 0:a.state)||s.state;return e.jsxs("div",{className:"flex items-center gap-3 px-3 py-2 hover:bg-blue-50 cursor-pointer transition-colors border-b border-gray-100 last:border-b-0",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded flex items-center justify-center flex-shrink-0",children:e.jsx(S,{className:"w-4 h-4 text-gray-600"})}),e.jsxs("div",{className:"flex flex-col min-w-0 flex-grow",children:[e.jsx("span",{className:"font-medium text-gray-800 text-sm leading-tight",children:s.name}),e.jsxs("span",{className:"text-xs text-gray-500 leading-tight",children:["City",r&&` in ${r}`]})]})]},`city-${s.name}-${t}`)}),i.neighborhoods.map((s,t)=>{var o,l;const r=((o=s.address)==null?void 0:o.city)||s.city,a=((l=s.address)==null?void 0:l.state)||s.state;return e.jsxs("div",{className:"flex items-center gap-3 px-3 py-2 hover:bg-green-50 cursor-pointer transition-colors border-b border-gray-100 last:border-b-0",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded flex items-center justify-center flex-shrink-0",children:e.jsx(S,{className:"w-4 h-4 text-gray-600"})}),e.jsxs("div",{className:"flex flex-col min-w-0 flex-grow",children:[e.jsx("span",{className:"font-medium text-gray-800 text-sm leading-tight",children:s.name}),e.jsxs("span",{className:"text-xs text-gray-500 leading-tight",children:["Neighborhood",r&&` in ${r}`,r&&a&&`, ${a}`,!r&&a&&` in ${a}`]})]})]},`neighborhood-${s.name}-${t}`)}),i.areas.map((s,t)=>{var a;const r=((a=s.address)==null?void 0:a.state)||s.state;return e.jsxs("div",{className:"flex items-center gap-3 px-3 py-2 hover:bg-purple-50 cursor-pointer transition-colors border-b border-gray-100 last:border-b-0",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded flex items-center justify-center flex-shrink-0",children:e.jsx(S,{className:"w-4 h-4 text-gray-600"})}),e.jsxs("div",{className:"flex flex-col min-w-0 flex-grow",children:[e.jsx("span",{className:"font-medium text-gray-800 text-sm leading-tight",children:s.name}),e.jsxs("span",{className:"text-xs text-gray-500 leading-tight",children:["Area",r&&` in ${r}`]})]})]},`area-${s.name}-${t}`)})]})]}),!m&&i.properties.length>0&&e.jsxs(e.Fragment,{children:[q&&e.jsx("div",{className:"pt-2",children:e.jsx("h4",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide mb-3",children:"Properties"})}),i.properties.map((s,t)=>{var r,a,o,l,p,n,c;return e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-24 h-16 bg-gray-100 rounded-md overflow-hidden",children:(r=s.images)!=null&&r[0]?e.jsx("img",{src:`https://cdn.repliers.io/${s.images[0]}?class=small`,alt:"Property",className:"object-cover w-full h-full"}):e.jsx("div",{className:"flex items-center justify-center h-full text-xs text-gray-400",children:"No Image"})}),e.jsxs("div",{className:"flex-grow",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold text-base",children:s.listPrice?B(s.listPrice):"Price N/A"}),e.jsx("span",{className:"text-gray-400",children:"|"}),e.jsx("span",{className:"text-sm text-gray-600",children:s.mlsNumber})]}),e.jsx(D,{type:s.type,lastStatus:s.lastStatus})]}),e.jsx("p",{className:"text-xs text-gray-600",children:`${((a=s.address)==null?void 0:a.streetNumber)||""} ${((o=s.address)==null?void 0:o.streetName)||""} ${((l=s.address)==null?void 0:l.streetSuffix)||""}, ${((p=s.address)==null?void 0:p.city)||""}${(n=s.address)!=null&&n.state?`, ${s.address.state}`:""}`}),e.jsxs("div",{className:"flex items-center text-xs text-gray-500 mt-1 space-x-3 flex-wrap",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(V,{className:"w-4 h-4"}),_(s.details)," Bedroom"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(X,{className:"w-4 h-4"}),R(s.details)," Bath"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Y,{className:"w-4 h-4"}),M(s.details)," Garage"]}),((c=s.details)==null?void 0:c.propertyType)&&e.jsxs("span",{children:["| ",s.details.propertyType]})]})]})]},s.mlsNumber||t)})]})]})})]})})}C.__docgenInfo={description:`AutocompleteSearch Component

@description A streamlined autocomplete search component that integrates with Repliers API
to search MLS listings and locations with real-time results and beautiful UI.

Features:
- Hybrid search combining listings and location autocomplete
- Debounced search (400ms) with fuzzy matching, minimum 3 characters
- Skeleton loading states
- Error handling and no results states
- Mobile-responsive design
- Real property images and details
- Environment variable support for API key (NEXT_PUBLIC_REPLIERS_API_KEY) - development only

@param props - The component props
@returns JSX.Element`,methods:[],displayName:"AutocompleteSearch",props:{apiKey:{required:!1,tsType:{name:"string"},description:"Repliers API key - required for production use (env fallback only works in development)"},placeholder:{required:!1,tsType:{name:"string"},description:"Placeholder text for the search input",defaultValue:{value:'"Search for properties..."',computed:!1}}}};const H="pxI19UMy9zfw9vz5lRxoGpjJWXrMnm",Z={title:"Tutorials/Configuring the AutocompleteSearch Component with the Repliers API",component:C,parameters:{layout:"fullscreen",docs:{page:()=>null}},argTypes:{apiKey:{control:"text",description:"Your Repliers API key (required)",table:{type:{summary:"string"},defaultValue:{summary:"required"}}},placeholder:{control:"text",description:"Placeholder text for the search input",table:{type:{summary:"string"},defaultValue:{summary:"Search for properties, cities, or neighborhoods..."}}}}},f={args:{apiKey:H,placeholder:"Search for properties, cities, or neighborhoods..."},decorators:[v=>e.jsx("div",{style:{display:"flex",justifyContent:"center",paddingTop:"30px",paddingBottom:"530px"},children:e.jsx(v,{})})],parameters:{docs:{description:{story:"ðŸŽ¯ **This is the main interactive demo!** Try searching for properties, cities, or neighborhoods. The component makes real API calls using your provided API key. **Great search terms to try:** city names like 'Toronto' or 'Vancouver', addresses, or MLS numbers."}}}};var k,A,T;f.parameters={...f.parameters,docs:{...(k=f.parameters)==null?void 0:k.docs,source:{originalSource:`{
  args: {
    apiKey: SAMPLE_API_KEY,
    placeholder: "Search for properties, cities, or neighborhoods..."
  },
  decorators: [Story => <div style={{
    display: "flex",
    justifyContent: "center",
    paddingTop: "30px",
    paddingBottom: "530px"
  }}>
        <Story />
      </div>],
  parameters: {
    docs: {
      description: {
        story: "ðŸŽ¯ **This is the main interactive demo!** Try searching for properties, cities, or neighborhoods. The component makes real API calls using your provided API key. **Great search terms to try:** city names like 'Toronto' or 'Vancouver', addresses, or MLS numbers."
      }
    }
  }
}`,...(T=(A=f.parameters)==null?void 0:A.docs)==null?void 0:T.source}}};const Q=["WorkingExample"],le=Object.freeze(Object.defineProperty({__proto__:null,WorkingExample:f,__namedExportsOrder:Q,default:Z},Symbol.toStringTag,{value:"Module"}));export{le as A,f as W};
